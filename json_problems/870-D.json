{
    "uid": "870-D",
    "url": "https://codeforces.com/contest/870/problem/D",
    "tags": [
        "brute force",
        " interactive",
        " probabilities"
    ],
    "title": "870-D",
    "statement": "D. Something with XOR Queriestime limit per test2 secondsmemory limit per test256 megabytesinputstandard inputoutputstandard outputThis is an interactive problem.Jury has hidden a permutationpof integers from0ton- 1. You know only the lengthn. Remind that in permutation all integers are distinct.Letbbe the inverse permutation forp, i.e.pbi=ifor alli. The only thing you can do is to askxorof elementspiandbj, printing two indicesiandj(not necessarily distinct). As a result of the query with indicesiandjyou'll get the value, wheredenotes thexoroperation. You can find the description ofxoroperation in notes.Note that some permutations can remain indistinguishable from the hidden one, even if you make all possiblen2queries. You have to compute the number of permutations indistinguishable from the hidden one, and print one of such permutations, making no more than2nqueries.The hidden permutation does not depend on your queries.InputThe first line contains single integern(1 ≤n≤ 5000) — the length of the hidden permutation. You should read this integer first.OutputWhen your program is ready to print the answer, print three lines.In the first line print \"!\".In the second line print single integeranswers_cnt— the number of permutations indistinguishable from the hidden one, including the hidden one.In the third line printnintegersp0,p1, ...,pn- 1(0 ≤pi<n, allpishould be distinct) — one of the permutations indistinguishable from the hidden one.Your program should terminate after printing the answer.InteractionTo ask aboutxorof two elements, print a string \"? i j\", whereiandj— are integers from0ton- 1— the index of the permutation element and the index of the inverse permutation element you want to know thexor-sum for. After that print a line break and makeflushoperation.After printing the query your program should read single integer — the value of.For a permutation of lengthnyour program should make no more than2nqueries aboutxor-sum. Note that printing answer doesn't count as a query. Note that you can't ask more than2nquestions. If you ask more than2nquestions or at least one incorrect question, your solution will get \"Wrong answer\".If at some moment your program reads-1as an answer, it should immediately exit (for example, by callingexit(0)). You will get \"Wrong answer\" in this case, it means that you asked more than2nquestions, or asked an invalid question. If you ignore this, you can get other verdicts since your program will continue to read from a closed stream.Your solution will get \"Idleness Limit Exceeded\", if you don't print anything or forget to flush the output, including for the final answer .To flush you can use (just after printing line break):fflush(stdout)in C++;System.out.flush()in Java;stdout.flush()in Python;flush(output)in Pascal;For other languages see the documentation.HackingFor hacking use the following format:np0p1...pn- 1Contestant programs will not be able to see this input.ExamplesInput3003232Output? 0 0? 1 1? 1 2? 0 2? 2 1? 2 0!10 1 2Input423202320Output? 0 1? 1 2? 2 3? 3 3? 3 2? 2 1? 1 0? 0 0!23 1 2 0Notexoroperation, or bitwise exclusive OR, is an operation performed over two integers, in which thei-th digit in binary representation of the result is equal to1if and only if exactly one of the two integers has thei-th digit in binary representation equal to1. For more information, seehere.In the first examplep= [0, 1, 2], thusb= [0, 1, 2], the valuesare correct for the giveni,j. There are no other permutations that give the same answers for the given queries.The answers for the queries are:,,,,,.In the second examplep= [3, 1, 2, 0], andb= [3, 1, 2, 0], the valuesmatch for all pairsi,j. But there is one more suitable permutationp= [0, 2, 1, 3],b= [0, 2, 1, 3]that matches alln2possible queries as well. All other permutations do not match even the shown queries.",
    "source": "CF",
    "vjudge": false
}