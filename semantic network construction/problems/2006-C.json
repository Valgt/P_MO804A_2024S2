{"uid": "2006-C", "url": "https://codeforces.com/contest/2006/problem/C", "tags": ["data structures", " divide and conquer", " math", " number theory", " two pointers"], "title": "2006-C", "statement": "C. Eri and Expanded Setstime limit per test3 secondsmemory limit per test512 megabytesinputstandard inputoutputstandard outputLet there be a set that containsdistinctpositive integers. To expand the set to contain as many integers as possible, Eri can choose two integers $$$x\\\\neq y$$$ from the set such that their average $$$\\\\frac{x+y}2$$$ is still a positive integer and isn't contained in the set, and add it to the set. The integers $$$x$$$ and $$$y$$$ remain in the set.Let's call the set of integersconsecutiveif, after the elements are sorted, the difference between any pair of adjacent elements is $$$1$$$. For example, sets $$$\\\\{2\\\\}$$$, $$$\\\\{2, 5, 4, 3\\\\}$$$, $$$\\\\{5, 6, 8, 7\\\\}$$$ are consecutive, while $$$\\\\{2, 4, 5, 6\\\\}$$$, $$$\\\\{9, 7\\\\}$$$ are not.Eri likes consecutive sets. Suppose there is an array $$$b$$$, then Eri puts all elements in $$$b$$$ into the set. If after a finite number of operations described above, the set can become consecutive, the array $$$b$$$ will be calledbrilliant.Note that if the same integer appears in the array multiple times, we only put it into the setonce, as a set always contains distinct positive integers.Eri has an array $$$a$$$ of $$$n$$$ positive integers. Please help him to count the number of pairs of integers $$$(l,r)$$$ such that $$$1 \\\\leq l \\\\leq r \\\\leq n$$$ and the subarray $$$a_l, a_{l+1}, \\\\ldots, a_r$$$ is brilliant.InputEach test consists of multiple test cases. The first line contains a single integer $$$t$$$ ($$$1 \\\\leq t \\\\leq 10^4$$$) — the number of test cases. The description of the test cases follows.The first line of each test case contains a single integer $$$n$$$ ($$$1 \\\\leq n \\\\leq 4 \\\\cdot 10^5$$$) — length of the array $$$a$$$.The second line of each test case contains $$$n$$$ integers $$$a_1, a_2, \\\\ldots a_n$$$ ($$$1 \\\\leq a_i \\\\leq 10^9$$$) — the elements of the array $$$a$$$.It is guaranteed that the sum of $$$n$$$ over all test cases doesn't exceed $$$4 \\\\cdot 10^5$$$.OutputFor each test case, output a single integer — the number of brilliant subarrays.ExampleInput622 261 3 6 10 15 2156 30 18 36 91100000000061 1 4 5 1 41270 130 90 90 90 108 612 500 451 171 193 193Output3 18 5 1 18 53NoteIn the first test case, the array $$$a = [2, 2]$$$ has $$$3$$$ subarrays: $$$[2]$$$, $$$[2]$$$, and $$$[2, 2]$$$. For all of them, the set only contains a single integer $$$2$$$, therefore it's always consecutive. All these subarrays are brilliant, so the answer is $$$3$$$.In the second test case, let's consider the subarray $$$[3, 6, 10]$$$. We can do operations as follows:$$$$$$\\\\{3,6,10\\\\} \\\\xrightarrow{x=6,y=10} \\\\{3,6,8,10\\\\} \\\\xrightarrow{x=6,y=8} \\\\{3,6,7,8,10\\\\} \\\\xrightarrow{x=3,y=7} \\\\{3,5,6,7,8,10\\\\}$$$$$$   $$$$$$\\\\xrightarrow{x=3,y=5} \\\\{3,4,5,6,7,8,10\\\\} \\\\xrightarrow{x=8,y=10} \\\\{3,4,5,6,7,8,9,10\\\\}$$$$$$$$$\\\\{3,4,5,6,7,8,9,10\\\\}$$$ is a consecutive set, so the subarray $$$[3, 6, 10]$$$ is brilliant.", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "a5710a6a", "template_md5": "35d339e4", "result": "You are given an array of distinct positive integers. You can perform the following operation on the array:\n\n1. Choose two distinct integers $x$ and $y$ from the array.\n2. Calculate their average: $(x+y)/2$.\n3. If the average is a positive integer and not already in the array, add it to the array.\n4. The integers $x$ and $y$ remain in the array.\n\nA set of integers is considered \"consecutive\" if the difference between any two adjacent elements is 1.\n\nDetermine the number of subarrays within the given array that, after performing the above operation a finite number of times, can become consecutive."}, {"prompt_md5": "095d0738", "template_md5": "465699a0", "result": "You are given a list of numbers.  You can combine two numbers from the list to create a new number that is their average, as long as the average is a whole number and not already in the list.  \n\nFind the number of sublists within the original list where, after repeatedly combining numbers in this way, you can create a list of consecutive numbers."}]}