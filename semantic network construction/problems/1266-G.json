{"uid": "1266-G", "url": "https://codeforces.com/contest/1266/problem/G", "tags": ["string suffix structures"], "title": "1266-G", "statement": "G. Permutation Concatenationtime limit per test1 secondmemory limit per test256 megabytesinputstandard inputoutputstandard outputLet $$$n$$$ be an integer. Consider all permutations on integers $$$1$$$ to $$$n$$$ in lexicographic order, and concatenate them into one big sequence $$$P$$$. For example, if $$$n = 3$$$, then $$$P = [1, 2, 3, 1, 3, 2, 2, 1, 3, 2, 3, 1, 3, 1, 2, 3, 2, 1]$$$. The length of this sequence is $$$n \\\\cdot n!$$$.Let $$$1 \\\\leq i \\\\leq j \\\\leq n \\\\cdot n!$$$ be a pair of indices. We call the sequence $$$(P_i, P_{i+1}, \\\\dots, P_{j-1}, P_j)$$$ asubarrayof $$$P$$$.You are given $$$n$$$. Find the number of distinct subarrays of $$$P$$$. Since this number may be large, output it modulo $$$998244353$$$ (a prime number).InputThe only line contains one integer $$$n$$$ ($$$1 \\\\leq n \\\\leq 10^6$$$), as described in the problem statement.OutputOutput a single integer — the number of distinct subarrays, modulo $$$998244353$$$.ExamplesInput2Output8Input10Output19210869NoteIn the first example, the sequence $$$P = [1, 2, 2, 1]$$$. It has eight distinct subarrays: $$$[1]$$$, $$$[2]$$$, $$$[1, 2]$$$, $$$[2, 1]$$$, $$$[2, 2]$$$, $$$[1, 2, 2]$$$, $$$[2, 2, 1]$$$ and $$$[1, 2, 2, 1]$$$.", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "f437d121", "template_md5": "35d339e4", "result": "You are given an integer $n$.  \n\nConsider all the ways to arrange the numbers from 1 to $n$ (permutations).  Write these permutations out in order, and then combine them into one long sequence.  \n\nFor example, if $n=3$, the sequence would be: $[1, 2, 3, 1, 3, 2, 2, 1, 3, 2, 3, 1, 3, 1, 2, 3, 2, 1]$.\n\nThis long sequence has $n \\cdot n!$ elements.\n\nA \"subarray\" is a continuous part of this sequence.  \n\nFind the number of unique subarrays in the sequence. Since this number can be very large, give your answer modulo 998244353 (a prime number)."}, {"prompt_md5": "f5b4731b", "template_md5": "465699a0", "result": "You are given a number *n*.  Imagine all possible arrangements of the numbers 1 through *n* written in order.  Now, write out all these arrangements one after another.  Count how many unique groups of numbers you can make within this long list.  Give the answer as a number."}]}