{"uid": "1799-H", "url": "https://codeforces.com/contest/1799/problem/H", "tags": ["bitmasks", " dfs and similar", " dp"], "title": "1799-H", "statement": "H. Tree Cuttingtime limit per test2 secondsmemory limit per test512 megabytesinputstandard inputoutputstandard outputYou are given a tree with $$$n$$$ vertices.A hero $$$k$$$ times do the following operation:Choose some edge.Remove it.Take one of the two remaining parts and delete it.Write the number of vertices in the remaining part.You are given an initial tree and the a sequence of written numbers. Find the number of ways to make operations such that the written numbers are equal to the given numbers. Due to the answer can be big, find it by modulo $$$998\\\\,244\\\\,353$$$. Two ways are considered different, if on some operation edge or remaining part are selected differently.InputThe first line contains a single integer $$$n$$$ ($$$2 \\\\leq n \\\\leq 5000$$$) — the number of vertices.Each of the next $$$n-1$$$ lines contains two integers $$$s$$$, $$$f$$$ ($$$1 \\\\leq s, f \\\\leq n$$$, $$$s \\\\neq f$$$) — description of edge $$$(s, f)$$$.Next line contains a single integer $$$k$$$ ($$$1 \\\\leq k \\\\leq \\\\min{(6, n - 1)}$$$) — the number of operations.Next line contains $$$k$$$ integers $$$s_1, s_2, \\\\ldots, s_k$$$ ($$$n > s_1 > s_2 > \\\\ldots > s_k \\\\geq 1$$$) — written numbers.OutputPrint a single integer — the answer to the problem by modulo $$$998\\\\,244\\\\,353$$$.ExamplesInput3 1 2 2 3 2 2 1Output4Input7 2 1 3 2 4 1 5 3 6 4 7 4 2 4 2Output2Input7 1 2 1 3 1 4 2 5 3 6 4 7 1 2Output3Input7 1 2 1 3 1 4 2 5 3 6 4 7 4 6 5 2 1Output24Input8 1 2 2 3 3 4 3 5 3 6 3 7 3 8 2 7 4Output0NoteIn the first test there are four possible ways to make operations:Remove the edge $$$(1, 2)$$$ and delete vertex $$$1$$$. Remove the edge $$$(2, 3)$$$ and delete vertex $$$2$$$.Remove the edge $$$(1, 2)$$$ and delete vertex $$$1$$$. Remove the edge $$$(3, 2)$$$ and delete vertex $$$3$$$.Remove the edge $$$(3, 2)$$$ and delete vertex $$$3$$$. Remove the edge $$$(1, 2)$$$ and delete vertex $$$1$$$.Remove the edge $$$(3, 2)$$$ and delete vertex $$$3$$$. Remove the edge $$$(2, 1)$$$ and delete vertex $$$2$$$.In the second test there are two possible ways to make operations:Remove the edge $$$(4, 1)$$$ and delete the part with vertex $$$4$$$. Remove the edge $$$(2, 3)$$$ and delete the part with vertex $$$2$$$.Remove the edge $$$(4, 1)$$$ and delete the part with vertex $$$4$$$. Remove the edge $$$(3, 2)$$$ and delete the part with vertex $$$3$$$.", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "5d60cf05", "template_md5": "35d339e4", "result": "You are given a tree with $n$ vertices.  You can perform the following operation $k$ times:\n\n1. Choose an edge in the tree and remove it.\n2. Choose one of the two resulting parts of the tree and delete it entirely.\n\nYou are given the initial tree structure and a sequence of $k$ numbers ($s_1, s_2, ..., s_k$).  Find the number of ways to perform the operations above so that the number of vertices remaining in the tree after each operation is equal to the corresponding number in the sequence ($s_1$, $s_2$, ..., $s_k$).  Since the answer can be large, find it modulo 998244353. Two ways are considered different if, at any point, a different edge is chosen for removal or a different part of the tree is deleted. \n\n\n\nLet me know if you'd like me to clarify any part of this!"}, {"prompt_md5": "d13e1814", "template_md5": "465699a0", "result": "You are given a tree with a certain number of nodes. You can repeatedly remove an edge from the tree and then delete one of the resulting parts.  You are given a sequence of numbers.  Find how many ways you can perform these operations to end up with a tree that has the given sequence of numbers of nodes remaining."}]}