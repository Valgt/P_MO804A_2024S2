{"uid": "1140-G", "url": "https://codeforces.com/contest/1140/problem/G", "tags": ["data structures", " divide and conquer", " shortest paths", " trees"], "title": "1140-G", "statement": "G. Double Treetime limit per test10 secondsmemory limit per test1024 megabytesinputstandard inputoutputstandard outputYou are given a special undirected graph. It consists of $$$2n$$$ vertices numbered from $$$1$$$ to $$$2n$$$. The following properties hold for the graph:there are exactly $$$3n-2$$$ edges in the graph: $$$n$$$ edges connect vertices having odd numbers with vertices having even numbers, $$$n - 1$$$ edges connect vertices having odd numbers with each other, and $$$n - 1$$$ edges connect vertices having even numbers with each other;for each edge $$$(u, v)$$$ between a pair of vertices with odd numbers, there exists an edge $$$(u + 1, v + 1)$$$, and vice versa;for each odd number $$$u \\\\in [1, 2n - 1]$$$, there exists an edge $$$(u, u + 1)$$$;the graph is connected; moreover, if we delete all vertices with even numbers from it, and all edges incident to them, the graph will become a tree (the same applies to deleting odd vertices).So, the graph can be represented as two trees having the same structure, and $$$n$$$ edges connecting each vertex of the first tree to the corresponding vertex of the second tree.Edges of the graph are weighted. The length of some simple path in the graph is the sum of weights of traversed edges.You are given $$$q$$$ queries to this graph; in each query, you are asked to compute the length of the shortest path between some pair of vertices in this graph. Can you answer all of the queries?InputThe first line of the input contains one integer $$$n$$$ ($$$2 \\\\le n \\\\le 3 \\\\cdot 10^5$$$).The second line contains $$$n$$$ integers $$$w_{1, 2}$$$, $$$w_{3,4}$$$, ..., $$$w_{2n - 1, 2n}$$$ ($$$1 \\\\le w_{i, i + 1} \\\\le 10^{12}$$$). These integers describe the weights of the edges connecting odd vertices with even ones.Then $$$n-1$$$ lines follow. $$$i$$$-th line contains four integers $$$x_i$$$, $$$y_i$$$, $$$w_{i, 1}$$$ and $$$w_{i, 2}$$$ ($$$1 \\\\le x_i, y_i \\\\le n$$$, $$$x_i \\\\ne y_i$$$, $$$1 \\\\le w_{i, j} \\\\le 10^{12}$$$); it describes two edges: one connecting $$$2x_i - 1$$$ with $$$2y_i - 1$$$ and having weight $$$w_{i, 1}$$$; another connecting $$$2x_i$$$ with $$$2y_i$$$ and having weight $$$w_{i, 2}$$$.The next line contains one integer $$$q$$$ ($$$1 \\\\le q \\\\le 6 \\\\cdot 10^5$$$) â€” the number of queries.Then $$$q$$$ lines follow, $$$i$$$-th line contains two integers $$$u_i$$$ and $$$v_i$$$ ($$$1 \\\\le u_i, v_i \\\\le 2n$$$, $$$u_i \\\\ne v_i$$$), describing a query \"compute the length of the shortest path between vertices $$$u_i$$$ and $$$v_i$$$\".OutputPrint $$$q$$$ integers, $$$i$$$-th integer should be equal to the answer to the $$$i$$$-th query.ExampleInput5 3 6 15 4 8 1 2 5 4 2 3 5 7 1 4 1 5 1 5 2 1 3 1 2 5 6 1 10Output3 15 4NoteThe graph in the first test looks like that:", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "01e313ee", "template_md5": "35d339e4", "result": "You are given a graph with $2n$ vertices numbered from 1 to $2n$. The graph has the following properties:\n\n* There are $3n-2$ edges in total.\n* $n$ edges connect odd-numbered vertices to even-numbered vertices.\n* $n-1$ edges connect odd-numbered vertices to each other.\n* $n-1$ edges connect even-numbered vertices to each other.\n* For each edge $(u,v)$ between two odd vertices, there is another edge $(u+1,v+1)$.\n* For each odd number $u$ from 1 to $2n-1$, there is an edge $(u,u+1)$.\n* The graph is connected. If you remove all even vertices and the edges connected to them, the remaining graph is a tree. The same is true if you remove all odd vertices and their edges.\n\nThe edges in the graph have weights. You are given $q$ queries, each asking for the shortest path distance between two vertices.\n\n**Input:**\n\n* The first line contains an integer $n$ ($2 \\le n \\le 3 \\cdot 10^5$).\n* The second line contains $n$ integers $w_{1,2}, w_{3,4}, ..., w_{2n-1,2n}$ ($1 \\le w_{i,i+1} \\le 10^{12}$), representing the weights of the edges connecting odd to even vertices.\n* The next $n-1$ lines each contain four integers $x_i, y_i, w_{i,1}, w_{i,2}$ ($1 \\le x_i, y_i \\le n$, $x_i \\ne y_i$, $1 \\le w_{i,j} \\le 10^{12}$), describing two edges: one connecting $2x_i-1$ to $2y_i-1$ with weight $w_{i,1}$, and another connecting $2x_i$ to $2y_i$ with weight $w_{i,2}$.\n* The next line contains an integer $q$ ($1 \\le q \\le 6 \\cdot 10^5$), the number of queries.\n* The next $q$ lines each contain two integers $u_i, v_i$ ($1 \\le u_i, v_i \\le 2n$, $u_i \\ne v_i$), representing a query for the shortest path distance between vertices $u_i$ and $v_i$.\n\n**Output:**\n\nPrint $q$ integers, where the $i$-th integer is the answer to the $i$-th query."}, {"prompt_md5": "9b0220a6", "template_md5": "465699a0", "result": "You are given a special graph with twice as many nodes as edges. The graph is made up of two connected trees, with edges connecting corresponding nodes in each tree. You are given the weights of all the edges.  You need to find the shortest path between pairs of nodes in the graph."}]}