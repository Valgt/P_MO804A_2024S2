{"uid": "1879-E", "url": "https://codeforces.com/contest/1879/problem/E", "tags": ["brute force", " constructive algorithms", " dfs and similar", " graphs", " implementation", " interactive", " trees"], "title": "1879-E", "statement": "E. Interactive Game with Coloringtime limit per test2 secondsmemory limit per test512 megabytesinputstandard inputoutputstandard outputThis is an interactive problem. Remember to flush your output while communicating with the testing program.You may usefflush(stdout)in C++,system.out.flush()in Java,stdout.flush()in Python orflush(output)in Pascal to flush the output. If you use some other programming language, consult its documentation. You may also refer to the guide on interactive problems:https://codeforces.com/blog/entry/45307.You are given a tree on $$$n$$$ vertices; vertex $$$1$$$ is the root of the tree. For every $$$i \\\\in [2, n]$$$, the parent of the $$$i$$$-th vertex is $$$p_i$$$, and $$$p_i < i$$$.You have to color all edges of the tree using theminimum possible number of colorssuch that you can win the game on that tree (every edge should be painted into exactly one color).The game we're going to play will be conducted as follows. After you paint the edges and print their colors, the jury will place a chip into one of the vertices of the tree (except for the root). Your goal is to move this chip to the root in exactly $$$d$$$ moves, where $$$d$$$ is the distance from the root to that vertex (the distance is equal to the number of edges on the path). If the chip reaches the root in $$$d$$$ moves, you win. Otherwise, you lose.The jury won't tell you where the chip is located. You won't even know the value of $$$d$$$ in advance. However, at the start of each move, you will be told how many edges of each color are incident to the current vertex (this includes both the edge leading up the tree and the edges leading away from the root). You have to choose one of these colors, and the chip will be moved along the edge of the chosen color (if there are multiple edges with that color incident to the current vertex, the jury gets to choose one of them). After the chip is moved, you will be told the same information about the current vertex again, and the game continues, until you either reach the root, or you make $$$d$$$ moves without reaching the root.The interactor for this problem is adaptive. It means that both the starting vertex and the current vertex arenot fixedand may change \"on the run\" depending on the output of your program. However, the state of the game will always be consistent with the information you are given:there will always be at least one starting vertex and at least one path of your chip from that vertex consistent with both the information about the colors you receive and the colors you've chosen during the moves.InputThe first line contains one integer $$$n$$$ ($$$3 \\\\le n \\\\le 100$$$) — the number of vertices in the tree.The second line contains $$$n-1$$$ integers $$$p_2, p_3, \\\\dots, p_n$$$ ($$$1 \\\\le p_i < i$$$), where $$$p_i$$$ is the parent of the $$$i$$$-th vertex in the tree.InteractionFirst, you have to print the coloring of the edges you've chosen as follows:in the first line, print one integer $$$k$$$ ($$$1 \\\\le k \\\\le n - 1$$$) — the number of colors you are using;in the second line, print $$$n-1$$$ integers $$$c_2, c_3, \\\\dots, c_n$$$ ($$$1 \\\\le c_i \\\\le k$$$), where $$$c_i$$$ should be the color of the edge connecting $$$p_i$$$ with $$$i$$$.Then, the game begins. At the start of each move, the jury program prints one of the following:one integer $$$1$$$ on a separate line, indicating that the chip has reached the root and you won;one integer $$$-1$$$ on a separate line, indicating that either you didn't reach the root in $$$d$$$ moves and lost, or you have done something incorrect (either the coloring you provided didn't meet the constraints, or your previous move is impossible);or one integer $$$0$$$ on a separate line, followed by a line containing $$$k$$$ integers $$$e_1, e_2, \\\\dots, e_k$$$, where $$$e_i$$$ is the number of edges with color $$$i$$$ incident to the current vertex.If you receive $$$1$$$ or $$$-1$$$, your program should terminate immediately, otherwise the verdict for your submission may be undefined. If you receive $$$0$$$ followed by $$$k$$$ integers $$$e_1, e_2, \\\\dots, e_k$$$, you have to print one integer indicating the color you choose during the move (of course, $$$e_i$$$ for that color should not be equal to $$$0$$$).Don't forget to flush the output every time you print something!ExamplesInput5 1 1 1 1 0 1 1Output1 1 1 1 1 1Input4 1 2 3 0 0 1 0 0 1 1 0 0 1 0 1 1Output3 3 1 2 2 1 3Input3 1 2 0 1 1 1Output2 1 2 1NoteIn the first example, every vertex from $$$2$$$ to $$$n$$$ is connected to the root. So, we can paint all edges into the same color $$$1$$$, and when the game starts, there will be only one edge incident to the current vertex (and it will lead to the root).In the second example, the tree is a path of $$$4$$$ vertices. We have to paint its edges into different colors, because it can be shown that we don't have a winning strategy with just two colors.", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "80da9f8d", "template_md5": "35d339e4", "result": "You are given a tree with $n$ vertices ($3 \\le n \\le 100$). Vertex 1 is the root, and for each vertex $i$ ($2 \\le i \\le n$), vertex $p_i$ is its parent ($1 \\le p_i < i$).\n\nYou need to color the edges of the tree with the minimum number of colors so that you can win a game played on the tree.\n\nHere's how the game works:\n\n1. You color each edge with a color from 1 to $k$ ($k$ is the number of colors you choose).\n\n2. The game starts with a chip placed on a vertex (except the root). You don't know the starting vertex.\n\n3. In each turn, you are told how many edges of each color are connected to the current vertex.\n\n4. You choose one of these colors, and the chip moves along the chosen edge.\n\n5. You continue playing until the chip reaches the root or you make $d$ moves without reaching the root (where $d$ is the distance from the root to the starting vertex).\n\n**You win if you reach the root in $d$ moves. Otherwise, you lose.**\n\nThe game is adaptive, meaning the starting vertex and the current vertex can change during the game.\n\n**Input:**\n\n* The first line contains $n$.\n* The second line contains $n-1$ integers $p_2, p_3, ..., p_n$.\n\n**Output:**\n\n* The first line contains $k$ (the number of colors).\n* The second line contains $n-1$ integers $c_2, c_3, ..., c_n$ (the color of each edge).\n\n**Interaction:**\n\n* The game will output:\n    * 1: You win.\n    * -1: You lose or made an invalid move.\n    * 0 followed by $k$ integers $e_1, e_2, ..., e_k$ (the number of edges of each color incident to the current vertex).\n\nIf you receive 1 or -1, your program should terminate. If you receive 0 followed by $k$ integers, print the color you choose for the next move."}, {"prompt_md5": "8fbc9de8", "template_md5": "465699a0", "result": "You are given a tree with a root. You need to color the edges of the tree with the minimum number of colors so that you can always win a game played on the tree. \n\nIn the game, a chip is placed on a random node (except the root). You must move the chip to the root in a specific number of moves, equal to the distance from the starting node to the root.  \n\nAt each move, you are told how many edges of each color are connected to the current node. You must choose one of those colors to move the chip along. If you reach the root in the correct number of moves, you win. Otherwise, you lose."}]}