{"uid": "1567-E", "url": "https://codeforces.com/contest/1567/problem/E", "tags": ["data structures", " divide and conquer", " math"], "title": "1567-E", "statement": "E. Non-Decreasing Dilemmatime limit per test2 secondsmemory limit per test256 megabytesinputstandard inputoutputstandard outputAlice has recently received an array $$$a_1, a_2, \\\\dots, a_n$$$ for her birthday! She is very proud of her array, and when she showed her friend Bob the array, he was very happy with her present too!However, soon Bob became curious, and as any sane friend would do, asked Alice to perform $$$q$$$ operations of two types on her array:$$$1$$$ $$$x$$$ $$$y$$$: update the element $$$a_x$$$ to $$$y$$$ (set $$$a_x = y$$$).$$$2$$$ $$$l$$$ $$$r$$$: calculate how many non-decreasing subarrays exist within the subarray $$$[a_l, a_{l+1}, \\\\dots, a_r]$$$. More formally, count the number of pairs of integers $$$(p,q)$$$ such that $$$l \\\\le p \\\\le q \\\\le r$$$ and $$$a_p \\\\le a_{p+1} \\\\le \\\\dots \\\\le a_{q-1} \\\\le a_q$$$.Help Alice answer Bob's queries!InputThe first line contains two integers $$$n$$$ and $$$q$$$ ($$$1 \\\\le n, q \\\\le 2 \\\\cdot 10^5$$$) — the size of the array, and the number of queries, respectively.The second line contains $$$n$$$ integers $$$a_1, a_2, \\\\dots, a_n$$$ ($$$1 \\\\le a_i \\\\le 10^9$$$) — the elements of Alice's array.The next $$$q$$$ lines consist of three integers each. The first integer of the $$$i$$$-th line is $$$t_i$$$, the operation being performed on the $$$i$$$-th step ($$$t_i = 1$$$ or $$$t_i = 2$$$).If $$$t_i = 1$$$, the next two integers are $$$x_i$$$ and $$$y_i$$$ ($$$1 \\\\le x_i \\\\le n$$$; $$$1 \\\\le y_i \\\\le 10^9$$$), updating the element at position $$$x_i$$$ to $$$y_i$$$ (setting $$$a_{x_i} = y_i$$$).If $$$t_i = 2$$$, the next two integers are $$$l_i$$$ and $$$r_i$$$ ($$$1 \\\\le l_i \\\\le r_i \\\\le n$$$), the two indices Bob asks Alice about for the $$$i$$$-th query.It's guaranteed that there is at least one operation of the second type.OutputFor each query of type $$$2$$$, print a single integer, the answer to the query.ExampleInput5 6 3 1 4 1 5 2 2 5 2 1 3 1 4 4 2 2 5 1 2 6 2 2 5Output6 4 10 7NoteFor the first query, $$$l = 2$$$ and $$$r = 5$$$, and the non-decreasing subarrays $$$[p,q]$$$ are $$$[2,2]$$$, $$$[3,3]$$$, $$$[4,4]$$$, $$$[5,5]$$$, $$$[2,3]$$$ and $$$[4,5]$$$.", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "d79da1c8", "template_md5": "35d339e4", "result": "You are given an array of $n$ integers. You need to process $q$ queries. \n\nThere are two types of queries:\n\n* **Type 1:** Update the $x$-th element of the array to a new value $y$.\n* **Type 2:**  For a given range $[l, r]$ in the array, count the number of non-decreasing subarrays within this range. A non-decreasing subarray is a sequence of elements where each element is less than or equal to the next element.\n\n**Input:**\n\n* The first line contains two integers $n$ and $q$ ($1 \\le n, q \\le 2 \\cdot 10^5$) representing the size of the array and the number of queries, respectively.\n* The second line contains $n$ integers $a_1, a_2, ..., a_n$ ($1 \\le a_i \\le 10^9$) representing the elements of the array.\n* The next $q$ lines describe the queries. Each line contains three integers:\n    * If the first integer is 1, it's a Type 1 query, and the next two integers are $x$ and $y$ ($1 \\le x \\le n$; $1 \\le y \\le 10^9$), indicating the update operation.\n    * If the first integer is 2, it's a Type 2 query, and the next two integers are $l$ and $r$ ($1 \\le l \\le r \\le n$), indicating the range for the subarray count.\n\n**Output:**\n\nFor each Type 2 query, print a single integer representing the number of non-decreasing subarrays within the specified range."}, {"prompt_md5": "a37e1f03", "template_md5": "465699a0", "result": "You are given a list of numbers. You can update individual numbers in the list.  You need to answer queries that ask for the number of non-decreasing subsequences within a given range of the list."}]}