{"uid": "331-B2", "url": "https://codeforces.com/contest/331/problem/B2", "tags": ["data structures"], "title": "331-B2", "statement": "B2. Shave Beaver!time limit per test2 secondsmemory limit per test256 megabytesinputstdinoutputstdoutThe Smart Beaver has recently designed and built an innovative nanotechnologic all-purpose beaver mass shaving machine, \"Beavershave 5000\". Beavershave 5000 can shave beavers by families! How does it work? Very easily!There arenbeavers, each of them has a unique id from 1 ton. Consider a permutationa1,a2, ...,anofnthese beavers. Beavershave 5000 needs one session to shave beavers with ids fromxtoy(inclusive) if and only if there are such indicesi1<i2< ... <ik, thatai1=x,ai2=x+ 1, ...,aik- 1=y- 1,aik=y. And that is really convenient. For example, it needs one session to shave a permutation of beavers1, 2, 3, ...,n.If we can't shave beavers fromxtoyin one session, then we can split these beavers into groups[x,p1],[p1+ 1,p2], ...,[pm+ 1,y](x≤p1<p2< ... <pm<y), in such a way that the machine can shave beavers in each group in one session. But then Beavershave 5000 needsm+ 1working sessions to shave beavers fromxtoy.All beavers are restless and they keep trying to swap. So if we consider the problem more formally, we can consider queries of two types:what is the minimum number of sessions that Beavershave 5000 needs to shave beavers with ids fromxtoy, inclusive?two beavers on positionsxandy(the beaversaxanday) swapped.You can assume that any beaver can be shaved any number of times.InputThe first line contains integern— the total number of beavers,2 ≤n. The second line containsnspace-separated integers — the initial beaver permutation.The third line contains integerq— the number of queries,1 ≤q≤ 105. The nextqlines contain the queries. Each queryilooks aspixiyi, wherepiis the query type (1is to shave beavers fromxitoyi, inclusive,2is to swap beavers on positionsxiandyi). All queries meet the condition:1 ≤xi<yi≤n.to get 30 points, you need to solve the problem with constraints:n≤ 100(subproblem B1);to get 100 points, you need to solve the problem with constraints:n≤ 3·105(subproblems B1+B2).Note that the number of queriesqis limited1 ≤q≤ 105in both subproblem B1 and subproblem B2.OutputFor each query withpi= 1, print the minimum number of Beavershave 5000 sessions.ExamplesInput51 3 4 2 561 1 51 3 42 2 31 1 52 1 51 1 5Output2135", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "0e97744a", "template_md5": "35d339e4", "result": "You are given a permutation of $n$ integers, representing $n$ beavers.  A machine can shave a contiguous subarray of beavers in one session if the beavers' IDs are consecutive.\n\nYou are given $q$ queries. Each query can be one of two types:\n\n* **Type 1:**  Find the minimum number of sessions required to shave beavers with IDs from $x$ to $y$ (inclusive).\n* **Type 2:** Swap the beavers at positions $x$ and $y$.\n\nAfter each swap, you need to answer Type 1 queries for the updated permutation.\n\n**Input:**\n\n* The first line contains $n$, the number of beavers.\n* The second line contains the permutation of $n$ integers.\n* The third line contains $q$, the number of queries.\n* The next $q$ lines contain the queries, each with one of the following formats:\n    * `1 x y`: Type 1 query, find the minimum sessions to shave beavers from $x$ to $y$.\n    * `2 x y`: Type 2 query, swap beavers at positions $x$ and $y$.\n\n**Output:**\n\nFor each Type 1 query, print the minimum number of sessions required."}, {"prompt_md5": "cd921d0b", "template_md5": "465699a0", "result": "You are given a list of numbers representing the order of items. You can group consecutive numbers together and process them in one step.  You are asked to find the minimum number of steps needed to process all items in a given range, and you can swap two items in the list."}]}