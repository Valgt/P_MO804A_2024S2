{"uid": "1552-I", "url": "https://codeforces.com/contest/1552/problem/I", "tags": ["dfs and similar", " math"], "title": "1552-I", "statement": "I. Organizing a Music Festivaltime limit per test1 secondmemory limit per test256 megabytesinputstandard inputoutputstandard outputYou are the organizer of the famous \"Zurich Music Festival\". There will be $$$n$$$ singers who will perform at the festival, identified by the integers $$$1$$$, $$$2$$$, $$$\\\\dots$$$, $$$n$$$. You must choose in which order they are going to perform on stage.You have $$$m$$$ friends and each of them has a set of favourite singers. More precisely, for each $$$1\\\\le i\\\\le m$$$, the $$$i$$$-th friend likes singers $$$s_{i,1}, \\\\, s_{i, 2}, \\\\, \\\\dots, \\\\,s_{i, q_i}$$$.A friend of yours is happy if the singers he likes perform consecutively (in an arbitrary order). An ordering of the singers is valid if it makes all your friends happy.Compute the number of valid orderings modulo $$$998\\\\,244\\\\,353$$$.InputThe first line contains two integers $$$n$$$ and $$$m$$$ ($$$1\\\\le n,\\\\,m\\\\le 100$$$) — the number of singers and the number of friends correspondingly.The $$$i$$$-th of the next $$$m$$$ lines contains the integer $$$q_i$$$ ($$$1\\\\le q_i\\\\le n$$$) — the number of favorite singers of the $$$i$$$-th friend – followed by the $$$q_i$$$ integers $$$s_{i,1}, \\\\, s_{i, 2}, \\\\, \\\\dots, \\\\,s_{i, q_i}$$$ ($$$1\\\\le s_{i,1}<s_{i,2}<\\\\cdots<s_{i,q_i}\\\\le n$$$) — the indexes of his favorite singers.OutputPrint the number of valid orderings of the singers modulo $$$998\\\\,244\\\\,353$$$.ExamplesInput3 1 2 1 3Output4Input5 5 2 1 2 2 2 3 2 3 4 2 4 5 2 1 5Output0Input100 1 1 50Output35305197Input5 1 5 1 2 3 4 5Output120Input2 5 1 2 1 2 1 2 1 1 1 1Output2Input11 4 5 4 5 7 9 11 2 2 10 2 9 11 7 1 2 3 5 8 10 11Output384NoteExplanation of the first sample:There are $$$3$$$ singers and only $$$1$$$ friend. The friend likes the two singers $$$1$$$ and $$$3$$$. Thus, the $$$4$$$ valid orderings are:1 3 22 1 32 3 13 1 2Explanation of the second sample:There are $$$5$$$ singers and $$$5$$$ friends. One can show that no ordering is valid.Explanation of the third sample:There are $$$100$$$ singers and only $$$1$$$ friend. The friend likes only singer $$$50$$$, hence all the $$$100!$$$ possible orderings are valid.Explanation of the fourth sample:There are $$$5$$$ singers and only $$$1$$$ friend. The friend likes all the singers, hence all the $$$5!=120$$$ possible orderings are valid.", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "c890996b", "template_md5": "35d339e4", "result": "You have $n$ singers and $m$ friends. Each friend has a set of favorite singers.  A valid order of the singers is one where each friend's favorite singers perform consecutively. \n\nFind the number of valid orderings of the singers modulo 998244353.\n\nInput:\n\n* The first line contains two integers $n$ and $m$ ($1 \\le n, m \\le 100$) - the number of singers and the number of friends.\n* Each of the next $m$ lines contains:\n    * An integer $q_i$ ($1 \\le q_i \\le n$) - the number of favorite singers of the $i$-th friend.\n    * $q_i$ integers $s_{i,1}, s_{i,2}, ..., s_{i,q_i}$ ($1 \\le s_{i,1} < s_{i,2} < ... < s_{i,q_i} \\le n$) - the indexes of the $i$-th friend's favorite singers.\n\nOutput:\n\nPrint the number of valid orderings modulo 998244353."}, {"prompt_md5": "c65fe98e", "template_md5": "465699a0", "result": "You have a list of singers and a list of friends, each friend has a list of favorite singers.  Find the number of ways to order the singers so that every friend is happy (meaning all their favorite singers are next to each other in the order).  The answer should be the number of valid orderings modulo 998244353."}]}