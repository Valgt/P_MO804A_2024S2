{"uid": "776-D", "url": "https://codeforces.com/contest/776/problem/D", "tags": ["2-sat", " dfs and similar", " dsu", " graphs"], "title": "776-D", "statement": "D. The Door Problemtime limit per test2 secondsmemory limit per test256 megabytesinputstandard inputoutputstandard outputMoriarty has trappednpeople inndistinct rooms in a hotel. Some rooms are locked, others are unlocked. But, there is a condition that the people in the hotel can only escape when all the doors are unlocked at the same time. There aremswitches. Each switch control doors of some rooms, but each door is controlled byexactly twoswitches.You are given the initial configuration of the doors. Toggling any switch, that is, turning it ON when it is OFF, or turning it OFF when it is ON, toggles the condition of the doors that this switch controls. Say, we toggled switch1, which was connected to room1,2and3which were respectively locked, unlocked and unlocked. Then, after toggling the switch, they become unlocked, locked and locked.You need to tell Sherlock, if there exists a way to unlock all doors at the same time.InputFirst line of input contains two integersnandm(2 ≤n≤ 105,2 ≤m≤ 105) — the number of rooms and the number of switches.Next line containsnspace-separated integersr1,r2, ...,rn(0 ≤ri≤ 1) which tell the status of room doors. Thei-th room is locked ifri= 0, otherwise it is unlocked.Thei-th of nextmlines contains an integerxi(0 ≤xi≤n) followed byxidistinct integers separated by space, denoting the number of rooms controlled by thei-th switch followed by the room numbers that this switch controls. It is guaranteed that the room numbers are in the range from1ton. It is guaranteed that each door is controlled by exactly two switches.OutputOutput \"YES\" without quotes, if it is possible to open all doors at the same time, otherwise output \"NO\" without quotes.ExamplesInput3 31 0 12 1 32 1 22 2 3OutputNOInput3 31 0 13 1 2 31 22 1 3OutputYESInput3 31 0 13 1 2 32 1 21 3OutputNONoteIn the second example input, the initial statuses of the doors are[1, 0, 1](0means locked,1— unlocked).After toggling switch3, we get[0, 0, 0]that means all doors are locked.Then, after toggling switch1, we get[1, 1, 1]that means all doors are unlocked.It can be seen that for the first and for the third example inputs it is not possible to make all doors unlocked.", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "3ceaf4d1", "template_md5": "35d339e4", "result": "There are $n$ rooms, some locked and some unlocked.  There are $m$ switches, and each switch controls exactly two rooms. Toggling a switch changes the state (locked or unlocked) of the two rooms it controls.\n\nGiven the initial state of each room and the rooms controlled by each switch, determine if it is possible to unlock all the rooms simultaneously by toggling the switches. \n\n\nInput:\n\n* The first line contains two integers, $n$ and $m$ ($2 \\le n \\le 10^5$, $2 \\le m \\le 10^5$), representing the number of rooms and switches, respectively.\n* The second line contains $n$ space-separated integers ($0 \\le r_i \\le 1$), where $r_i = 0$ means the $i$-th room is locked and $r_i = 1$ means it is unlocked.\n* Each of the next $m$ lines contains an integer $x_i$ ($0 \\le x_i \\le n$) followed by $x_i$ distinct integers separated by spaces, representing the number of rooms controlled by the $i$-th switch and the room numbers they control.\n\nOutput:\n\n* Print \"YES\" if it is possible to unlock all the rooms simultaneously, and \"NO\" otherwise."}, {"prompt_md5": "50002f77", "template_md5": "465699a0", "result": "You have a number of rooms, some locked and some unlocked.  You have switches that can toggle the state (locked/unlocked) of multiple rooms.  Can you find a sequence of switch toggles to unlock all the rooms?"}]}