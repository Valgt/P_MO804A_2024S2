{"uid": "925-D", "url": "https://codeforces.com/contest/925/problem/D", "tags": ["constructive algorithms"], "title": "925-D", "statement": "D. Aztec Catacombstime limit per test2 secondsmemory limit per test256 megabytesinputstandard inputoutputstandard outputIndiana Jones found ancient Aztec catacombs containing a golden idol. The catacombs consists of $$$n$$$ caves. Each pair of caves is connected with a two-way corridor that can be opened or closed. The entrance to the catacombs is in the cave $$$1$$$, the idol and the exit are in the cave $$$n$$$.When Indiana goes from a cave $$$x$$$ to a cave $$$y$$$ using an open corridor, all corridors connected to the cave $$$x$$$ change their state: all open corridors become closed, all closed corridors become open. Indiana wants to go from cave $$$1$$$ to cave $$$n$$$ going through as small number of corridors as possible. Help him find the optimal path, or determine that it is impossible to get out of catacombs.InputThe first line contains two integers $$$n$$$ and $$$m$$$ ($$$2 \\\\leq n \\\\leq 3\\\\cdot 10^5$$$, $$$0 \\\\leq m \\\\leq 3 \\\\cdot 10^5$$$) — the number of caves and the number of open corridors at the initial moment.The next $$$m$$$ lines describe the open corridors. The $$$i$$$-th of these lines contains two integers $$$u_i$$$ and $$$v_i$$$ ($$$1 \\\\leq u_i, v_i \\\\leq n$$$, $$$u_i \\\\neq v_i$$$) — the caves connected by the $$$i$$$-th open corridor. It is guaranteed that each unordered pair of caves is presented at most once.OutputIf there is a path to exit, in the first line print a single integer $$$k$$$ — the minimum number of corridors Indians should pass through ($$$1 \\\\leq k \\\\leq 10^6$$$). In the second line print $$$k+1$$$ integers $$$x_0, \\\\ldots, x_k$$$ — the number of caves in the order Indiana should visit them. The sequence $$$x_0, \\\\ldots, x_k$$$ should satisfy the following:$$$x_0 = 1$$$, $$$x_k = n$$$;for each $$$i$$$ from $$$1$$$ to $$$k$$$ the corridor from $$$x_{i - 1}$$$ to $$$x_i$$$ should be open at the moment Indiana walks along this corridor.If there is no path, print a single integer $$$-1$$$.We can show that if there is a path, there is a path consisting of no more than $$$10^6$$$ corridors.ExamplesInput4 41 22 31 33 4Output21 3 4Input4 21 22 3Output41 2 3 1 4", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "b46f4880", "template_md5": "35d339e4", "result": "You are given a network of $n$ caves connected by $m$ two-way corridors. Some corridors are initially open, and others are closed. \n\nA special rule applies when moving between caves: when you enter a cave, all corridors connected to that cave change their state (open becomes closed, closed becomes open).\n\nYou start in cave 1 and want to reach cave $n$ using the fewest corridor switches possible.\n\n**Input:**\n\n* The first line contains two integers, $n$ (the number of caves) and $m$ (the number of initially open corridors).\n* The next $m$ lines each contain two integers, $u_i$ and $v_i$, representing a pair of caves connected by an initially open corridor.\n\n**Output:**\n\n* If a path exists from cave 1 to cave $n$, print the minimum number of corridor switches required ($k$) followed by $k+1$ integers representing the sequence of caves to visit.\n* If no path exists, print $-1$."}, {"prompt_md5": "3cd66e46", "template_md5": "465699a0", "result": "You are given a network of rooms connected by doors. Some doors are initially open, others are closed.  You start in room 1 and need to reach room n.  When you enter a room, all the doors connected to that room change their state (open doors become closed, closed doors become open). Find the fewest number of doors you need to pass through to reach room n. If it's impossible to reach room n, say so."}]}