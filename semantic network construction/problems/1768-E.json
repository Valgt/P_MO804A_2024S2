{"uid": "1768-E", "url": "https://codeforces.com/contest/1768/problem/E", "tags": ["combinatorics", " math", " number theory"], "title": "1768-E", "statement": "E. Partial Sortingtime limit per test1.5 secondsmemory limit per test1024 megabytesinputstandard inputoutputstandard outputConsider a permutation$$$^\\\\dagger$$$ $$$p$$$ of length $$$3n$$$. Each time you can do one of the following operations:Sort the first $$$2n$$$ elements in increasing order.Sort the last $$$2n$$$ elements in increasing order.We can show that every permutation can be made sorted in increasing order using only these operations. Let's call $$$f(p)$$$ the minimum number of these operations needed to make the permutation $$$p$$$ sorted in increasing order.Given $$$n$$$, find the sum of $$$f(p)$$$ over all $$$(3n)!$$$ permutations $$$p$$$ of size $$$3n$$$.Since the answer could be very large, output it modulo a prime $$$M$$$.$$$^\\\\dagger$$$ A permutation of length $$$n$$$ is an array consisting of $$$n$$$ distinct integers from $$$1$$$ to $$$n$$$ in arbitrary order. For example, $$$[2,3,1,5,4]$$$ is a permutation, but $$$[1,2,2]$$$ is not a permutation ($$$2$$$ appears twice in the array), and $$$[1,3,4]$$$ is also not a permutation ($$$n=3$$$ but there is $$$4$$$ in the array).InputThe only line of input contains two numbers $$$n$$$ and $$$M$$$ ($$$1 \\\\leq n \\\\leq 10^6$$$, $$$10^8 \\\\leq M \\\\leq 10^9$$$). It is guaranteed that $$$M$$$ is a prime number.OutputOutput the answer modulo $$$M$$$.ExamplesInput1 100009067Output9Input2 100000357Output1689Input69 999900997Output193862705NoteIn the first test case, all the permutations are:$$$[1, 2, 3]$$$, which requires $$$0$$$ operations;$$$[1, 3, 2]$$$, which requires $$$1$$$ operation;$$$[2, 1, 3]$$$, which requires $$$1$$$ operation;$$$[2, 3, 1]$$$, which requires $$$2$$$ operations;$$$[3, 1, 2]$$$, which requires $$$2$$$ operations;$$$[3, 2, 1]$$$, which requires $$$3$$$ operations.Therefore, the answer is $$$0+1+1+2+2+3=9$$$.", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "5edacd53", "template_md5": "35d339e4", "result": "You are given a positive integer $n$.  \n\nConsider all permutations of length $3n$ consisting of the numbers from 1 to $3n$.  A permutation is an arrangement of these numbers in a specific order.\n\nYou can perform the following operation on a permutation:\n\n* Sort the first $2n$ elements in increasing order.\n* Sort the last $2n$ elements in increasing order.\n\nThe goal is to find the sum, modulo a prime number $M$, of the minimum number of operations required to sort each permutation in increasing order. \n\nOutput the final sum modulo $M$."}, {"prompt_md5": "89f4a016", "template_md5": "465699a0", "result": "You are given a list of 3n numbers. You can sort the first 2n numbers or the last 2n numbers in increasing order. What is the total minimum number of times you need to do this to sort the entire list for all possible arrangements of the numbers?  The answer can be very large, so give the result after dividing it by a large prime number."}]}