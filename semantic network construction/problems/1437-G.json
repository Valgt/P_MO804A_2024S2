{"uid": "1437-G", "url": "https://codeforces.com/contest/1437/problem/G", "tags": ["data structures", " string suffix structures", " strings", " trees"], "title": "1437-G", "statement": "G. Death DBMStime limit per test2 secondsmemory limit per test512 megabytesinputstandard inputoutputstandard outputFor the simplicity, let's say that the \"Death Note\" is a notebook that kills a person when their name is written in it.It's easy to kill with it, but it's pretty hard to keep track of people you haven't killed and still plan to. You decided to make a \"Death Database Management System\" — a computer program that provides the easy access to the database of possible victims. Let me describe its specifications to you.Let's define a victim entity: a victim has a name (not necessarily unique) that consists only of lowercase Latin letters and an integer suspicion value.At the start of the program the user enters a list of $$$n$$$ victim names into a database, each suspicion value is set to $$$0$$$.Then the user makes queries of two types:$$$1~i~x$$$ — set the suspicion value of the $$$i$$$-th victim to $$$x$$$;$$$2~q$$$ — given a string $$$q$$$ find the maximum suspicion value of a victim whose name is a contiguous substring of $$$q$$$.Just to remind you, this program doesn't kill people, it only helps to search for the names to write down in an actual notebook. Thus, the list of the victims in the database doesn't change throughout the queries.What are you waiting for? Write that program now!InputThe first line contains two integers $$$n$$$ and $$$m$$$ ($$$1 \\\\le n, m \\\\le 3 \\\\cdot 10^5$$$) — the number of victims and the number of queries, respectively.Each of the next $$$n$$$ lines contains a single string $$$s_i$$$ — the name of the $$$i$$$-th victim. Each name consists only of lowercase Latin letters.Each of the next $$$m$$$ lines contains a query of one of two types:$$$1~i~x$$$ ($$$1 \\\\le i \\\\le n$$$, $$$0 \\\\le x \\\\le 10^9$$$) — change the suspicion value of the $$$i$$$-th victim to $$$x$$$;$$$2~q$$$ — given a string $$$q$$$ consisting only of lowercase Latin letters find the maximum suspicion value of a victim whose name is a contiguous substring of $$$q$$$.There is at least one query of the second type. The total length of the strings $$$s_i$$$ doesn't exceed $$$3 \\\\cdot 10^5$$$. The total length of the strings $$$q$$$ doesn't exceed $$$3 \\\\cdot 10^5$$$.OutputFor each query of the second type print an integer value. If there is no victim name that is a contiguous substring of $$$q$$$, then print $$$-1$$$. Otherwise, print the maximum suspicion value of a victim whose name is a contiguous substring of $$$q$$$.ExamplesInput5 8 kurou takuo takeshi naomi shingo 2 nakiraomi 2 abanaomicaba 1 3 943 2 takuotakeshishingo 1 5 135832 2 shingotakeshi 1 5 0 2 shingotakeshiOutput-1 0 943 135832 943Input6 15 a ab ba b a ba 2 aa 1 4 4 2 bbb 1 2 1 1 2 18 2 b 2 c 1 6 10 2 aba 2 abbbba 1 2 12 2 bbaaab 1 1 11 1 5 5 2 baaOutput0 4 4 -1 18 18 12 11", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "0077c2c3", "template_md5": "35d339e4", "result": "You are given a list of $n$ names, each with an initial suspicion value of 0. You can perform two types of operations:\n\n1. **Update Suspicion:** Set the suspicion value of the $i$-th name to $x$.\n2. **Find Maximum Suspicion:** Given a string $q$, find the maximum suspicion value among all names that are substrings of $q$. If no names are substrings of $q$, output -1.\n\nInput:\n\n* The first line contains two integers $n$ and $m$ ($1 \\le n, m \\le 3 \\cdot 10^5$), representing the number of names and the number of operations, respectively.\n* The next $n$ lines each contain a single name (consisting of lowercase letters).\n* The next $m$ lines each contain an operation:\n    * `1 i x`: Update the suspicion value of the $i$-th name to $x$.\n    * `2 q`: Find the maximum suspicion value of a name substring of $q$.\n\nOutput:\n\nFor each operation of type `2`, output the maximum suspicion value found."}, {"prompt_md5": "e6677e7d", "template_md5": "465699a0", "result": "You are given a list of names and their associated scores. You can update the scores.  You are then asked to find the highest score associated with a name that is a subsequence of a given string. If no such name exists, output -1."}]}