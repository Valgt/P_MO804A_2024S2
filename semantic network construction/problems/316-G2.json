{"uid": "316-G2", "url": "https://codeforces.com/contest/316/problem/G2", "tags": ["string suffix structures"], "title": "316-G2", "statement": "G2. Good Substringstime limit per test4 secondsmemory limit per test256 megabytesinputstdinoutputstdoutSmart Beaver recently got interested in a new word game. The point is as follows: count the number of distinct good substrings of some strings. To determine if a string is good or not the game uses rules. Overall there arenrules. Each rule is described by a group of three(p,l,r), wherepis a string andlandr(l≤r)are integers. We’ll say that stringtcomplies with rule(p,l,r), if the number of occurrences of stringtin stringplies betweenlandr, inclusive. For example, string \"ab\", complies with rules (\"ab\",1,2) and (\"aab\",0,1), but does not comply with rules (\"cd\",1,2) and (\"abab\",0,1).Asubstrings[l...r](1 ≤l≤r≤ |s|)of strings=s1s2...s|s|(|s|is a length ofs) is stringslsl+ 1...sr.Consider anumber of occurrencesof stringtin stringpas a number of pairs of integersl,r(1 ≤l≤r≤ |p|)such thatp[l...r] =t.We’ll say that stringtis good if it complies with allnrules. Smart Beaver asks you to help him to write a program that can calculate the number of distinct good substrings of strings. Two substringss[x...y]ands[z...w]are cosidered to be distinct iffs[x...y] ≠s[z...w].InputThe first line contains strings. The second line contains integern. Nextnlines contain the rules, one per line. Each of these lines contains a string and two integerspi,li,ri, separated by single spaces (0 ≤li≤ri≤ |pi|). It is guaranteed that all the given strings are non-empty and only contain lowercase English letters.The input limits for scoring 30 points are (subproblem G1):0 ≤n≤ 10.The length of stringsand the maximum length of stringpis≤ 200.The input limits for scoring 70 points are (subproblems G1+G2):0 ≤n≤ 10.The length of stringsand the maximum length of stringpis≤ 2000.The input limits for scoring 100 points are (subproblems G1+G2+G3):0 ≤n≤ 10.The length of stringsand the maximum length of stringpis≤ 50000.OutputPrint a single integer — the number of good substrings of strings.ExamplesInputaaab2aa 0 0aab 1 1Output3Inputltntlnen3n 0 0ttlneenl 1 4lelllt 1 1Output2Inputa0Output1NoteThere are three good substrings in the first sample test: «aab», «ab» and «b».In the second test only substrings «e» and «t» are good.", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "cd9a9533", "template_md5": "465699a0", "result": "You are given a string and a set of rules. Each rule consists of a pattern and a range within that pattern. A substring is considered \"good\" if it matches all the rules.  Count the number of distinct good substrings within the given string."}, {"prompt_md5": "47c6bfe7", "template_md5": "35d339e4", "result": "You are given a string $s$ and $n$ rules. Each rule is defined by a string $p$ and two integers $l$ and $r$ ($l \\le r$). A substring $t$ of $s$ complies with a rule $(p, l, r)$ if the number of times $t$ appears in $p$ between positions $l$ and $r$ (inclusive) is a specific number.\n\nA substring of $s$ is considered \"good\" if it complies with all $n$ rules.\n\nYour task is to count the number of distinct good substrings of $s$. \n\n\nTwo substrings $s[x...y]$ and $s[z...w]$ are distinct if $s[x...y] \\neq s[z...w]$."}]}