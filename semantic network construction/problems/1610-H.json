{"uid": "1610-H", "url": "https://codeforces.com/contest/1610/problem/H", "tags": ["data structures", " dfs and similar", " greedy", " trees"], "title": "1610-H", "statement": "H. Squid Gametime limit per test2 secondsmemory limit per test256 megabytesinputstandard inputoutputstandard outputAfter watching the newover-ratedseries Squid Game, Mashtali and Soroush decided to hold their own Squid Games! Soroush agreed to be the host and will provide money for the winner's prize, and Mashtali became the Front Man!$$$m$$$ players registered to play in the games to win the great prize, but when Mashtali found out how huge the winner's prize is going to be, he decided tokilleliminate all the players so he could take the money for himself!Here is how evil Mashtali is going to eliminate players:There is an unrooted tree with $$$n$$$ vertices. Every player has $$$2$$$ special vertices $$$x_i$$$ and $$$y_i$$$.In one operation, Mashtali can choose any vertex $$$v$$$ of the tree. Then, for each remaining player $$$i$$$ he finds a vertex $$$w$$$ on the simple path from $$$x_i$$$ to $$$y_i$$$, which is the closest to $$$v$$$. If $$$w\\\\ne x_i$$$ and $$$w\\\\ne y_i$$$, player $$$i$$$ will be eliminated.Now Mashtali wondered: \"What is the minimum number of operations I should perform so that I can remove every player from the game and take the money for myself?\"Since he was only thinking about the money, he couldn't solve the problem by himself and asked for your help!InputThe first line contains $$$2$$$ integer $$$n$$$ and $$$m$$$ $$$(1 \\\\le n, m \\\\le 3 \\\\cdot 10^5)$$$ — the number of vertices of the tree and the number of players.The second line contains $$$n-1$$$ integers $$$par_2, par_3, \\\\ldots, par_n$$$ $$$(1 \\\\le par_i < i)$$$ — denoting an edge between node $$$i$$$ and $$$par_i$$$.The $$$i$$$-th of the following $$$m$$$ lines contains two integers $$$x_i$$$ and $$$y_i$$$ $$$(1 \\\\le x_i, y_i \\\\le n, x_i \\\\ne y_i)$$$ — the special vertices of the $$$i$$$-th player.OutputPrint the minimum number of operations Mashtali has to perform.If there is no way for Mashtali to eliminate all the players, print $$$-1$$$.ExamplesInput6 3 1 1 1 4 4 1 5 3 4 2 6Output2Input5 3 1 1 3 3 1 2 1 4 1 5Output-1NoteExplanation for the first sample:In the first operation, Mashtali can choose vertex $$$1$$$ and eliminate players with colors red and blue. In the second operation, he can choose vertex $$$6$$$ and eliminate the player with orange color.In the second sample, Mashtali can't eliminate the first player.", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "d5014f4a", "template_md5": "35d339e4", "result": "There is a tree with $n$ vertices.  $m$ players are each assigned two vertices, $x_i$ and $y_i$.\n\nThe goal is to eliminate all players using the following operation:\n\n* Choose a vertex $v$ in the tree.\n* For each player $i$, find the vertex $w$ on the path between $x_i$ and $y_i$ that is closest to $v$. If $w$ is not equal to $x_i$ or $y_i$, then player $i$ is eliminated.\n\nWhat is the minimum number of operations needed to eliminate all players? If it is impossible to eliminate all players, output -1."}, {"prompt_md5": "642bace5", "template_md5": "465699a0", "result": "You are given a tree with  'n' nodes.  'm' players each have two special nodes in the tree.  You can choose a node in the tree and eliminate players whose paths between their special nodes pass through the chosen node. Find the minimum number of node choices needed to eliminate all players. If it's impossible, output -1."}]}