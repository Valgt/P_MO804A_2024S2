{"uid": "1907-G", "url": "https://codeforces.com/contest/1907/problem/G", "tags": ["brute force", " constructive algorithms", " dfs and similar", " graphs", " greedy", " implementation"], "title": "1907-G", "statement": "G. Lightstime limit per test2 secondsmemory limit per test256 megabytesinputstandard inputoutputstandard outputIn the end of the day, Anna needs to turn off the lights in the office. There are $$$n$$$ lights and $$$n$$$ light switches, but their operation scheme is really strange. The switch $$$i$$$ changes the state of light $$$i$$$, but it also changes the state of some other light $$$a_i$$$ (change the state means that if the light was on, it goes off and vice versa).Help Anna to turn all the lights off using minimal number of switches, or say it is impossible.InputThe first line of input contains a single integer $$$t$$$ ($$$1 \\\\le t \\\\le 10^4$$$) — the number of test cases. Descriptions of test cases follow.The first line of each test case contains the integer $$$n$$$ ($$$2 \\\\le n \\\\le 10^5$$$) — the number of lights.The second line of each test case contains the string of $$$n$$$ characters, the initial state of the lights. Character \"0\" means that the corresponding light is off, and \"1\" means that it is on.The third line of each test case contains $$$n$$$ integers $$$a_i$$$ ($$$1 \\\\le a_i \\\\le n$$$, $$$a_i \\\\neq i$$$) — the switch $$$i$$$ changes the states of light $$$i$$$ and light $$$a_i$$$.It is guaranteed that sum of $$$n$$$ over all test cases does not exceed $$$2 \\\\cdot 10^5$$$OutputFor each test case output the integer $$$k$$$, the minimal number of switches to use, then in the separate line output the list of $$$k$$$ switches.If it is impossible to turn off all the lights, output single integer $$$-1$$$.ExampleInput85111014 3 4 2 22102 11000000000119 10 10 7 10 9 9 9 10 21010001111019 3 8 9 2 1 3 7 2 71000011010105 7 6 10 8 3 6 6 2 21001011000108 7 7 9 9 4 1 4 2 71010101110107 9 10 7 7 2 8 6 10 41011100000013 10 10 1 10 8 6 3 2 1Output3 1 5 3  -1 1 9  5 5 6 10 2 3  6 4 9 5 10 8 7  3 5 4 9  6 1 3 5 9 7 8  2 2 1", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "6f31c91d", "template_md5": "35d339e4", "result": "You are given $n$ lights and $n$ switches. Each switch $i$ controls light $i$ and another light $a_i$. Flipping switch $i$ toggles the state of both light $i$ and light $a_i$.\n\nDetermine the minimum number of switches needed to turn off all the lights. If it's impossible, output -1.\n\n**Input:**\n\n* The first line contains $t$ (the number of test cases).\n* For each test case:\n    * The first line contains $n$ (the number of lights).\n    * The second line contains a string of $n$ characters, where '0' represents an off light and '1' represents an on light.\n    * The third line contains $n$ integers $a_i$ (the light controlled by each switch).\n\n**Output:**\n\n* For each test case:\n    * Output the minimum number of switches needed.\n    * Output a list of the indices of the switches to use.\n    * If it's impossible to turn off all the lights, output -1."}, {"prompt_md5": "b0c7a838", "template_md5": "465699a0", "result": "You are given a set of lights and switches. Each switch controls a light and another light.  Find the minimum number of switches to turn off all the lights. If it's impossible, say so."}]}