{"uid": "1488-H", "url": "https://codeforces.com/contest/1488/problem/H", "tags": ["*special", " combinatorics", " data structures"], "title": "1488-H", "statement": "H. Build From Suffixestime limit per test10 secondsmemory limit per test512 megabytesinputstandard inputoutputstandard outputYou are given an integer $$$n$$$ and a sequence $$$a$$$ of $$$n-1$$$ integers, each element is either $$$0$$$ or $$$1$$$.You are asked to build a string of length $$$n$$$ such that:each letter is one of \"abcd\";if $$$a_i=1$$$, then the $$$i$$$-th suffix of the string is lexicographically smaller than the $$$(i+1)$$$-th suffix;if $$$a_i=0$$$, then the $$$i$$$-th suffix of the string is lexicographically greater than the $$$(i+1)$$$-th suffix.You will be asked $$$q$$$ queries of form:$$$i$$$ ($$$1 \\\\le i \\\\le n - 1$$$) — flip the value of $$$a_i$$$ (if $$$a_i=0$$$, then set $$$a_i$$$ to $$$1$$$, and vice versa).After each query print the number of different strings that satisfy the given constraints modulo $$$998\\\\,244\\\\,353$$$.InputThe first line contains two integers $$$n$$$ and $$$q$$$ ($$$2 \\\\le n \\\\le 10^5$$$; $$$1 \\\\le q \\\\le 10^5$$$) — the length of the string and the number of queries.The second line contains $$$n-1$$$ integers $$$a_1, a_2, \\\\dots, a_{n-1}$$$ ($$$a_i \\\\in \\\\{0, 1\\\\}$$$) — the constraints on suffixes of the string.Each of the next $$$q$$$ lines contains a query: an integer $$$i$$$ ($$$1 \\\\le i \\\\le n - 1$$$) — flip the value of $$$a_i$$$ (if $$$a_i=0$$$, then set $$$a_i$$$ to $$$1$$$, and vice versa).OutputAfter each query print the number of different strings that satisfy the given constraints modulo $$$998\\\\,244\\\\,353$$$.ExamplesInput2 2 0 1 1Output6 10Input3 4 0 0 1 2 1 2Output20 10 14 20Input10 10 0 0 0 1 1 1 0 1 0 4 1 8 4 2 9 5 6 6 8Output1815 3201 2710 2776 2290 1644 2668 1271 2668 2436NoteThe $$$i$$$-th suffix of a string is a continuous substring that starts from the $$$i$$$-th position and ends in the last position.A string $$$a$$$ is lexicographically smaller than a string $$$b$$$ if and only if one of the following holds:$$$a$$$ is a prefix of $$$b$$$, but $$$a \\\\ne b$$$;in the first position where $$$a$$$ and $$$b$$$ differ, the string $$$a$$$ has a letter that appears earlier in the alphabet than the corresponding letter in $$$b$$$.Two strings $$$a$$$ and $$$b$$$ of length $$$n$$$ differ if there exists a position $$$i$$$ such that $$$a_i \\\\neq b_i$$$.", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "6897ea5d", "template_md5": "35d339e4", "result": "You are given an integer $n$ and a sequence of $n-1$ integers, where each integer is either 0 or 1.  You need to build a string of length $n$ using the characters \"abcd\" that satisfies the following conditions:\n\n* If the $i$-th integer in the sequence is 1, then the $i$-th suffix of the string must be lexicographically smaller than the $(i+1)$-th suffix.\n* If the $i$-th integer in the sequence is 0, then the $i$-th suffix of the string must be lexicographically greater than the $(i+1)$-th suffix.\n\nYou will be given $q$ queries. Each query will be an integer $i$ (between 1 and $n-1$). For each query, you need to flip the value of the $i$-th integer in the sequence (change 0 to 1, and 1 to 0). After each query, you need to calculate and print the number of different strings that still satisfy the given conditions, modulo 998244353.\n\n\n\nLet me know if you'd like me to elaborate on any of the terms like \"lexicographically smaller\" or \"suffix\"."}, {"prompt_md5": "a73eda91", "template_md5": "465699a0", "result": "You are given a sequence of 0s and 1s.  Each 1 means the corresponding suffix of a string must be lexicographically smaller than the next suffix, and each 0 means the corresponding suffix must be lexicographically larger.  You can flip a 0 to a 1 or a 1 to a 0. After each flip, count the number of different strings that satisfy the rules."}]}