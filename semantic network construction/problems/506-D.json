{"uid": "506-D", "url": "https://codeforces.com/contest/506/problem/D", "tags": ["brute force", " dfs and similar", " dsu", " graphs"], "title": "506-D", "statement": "D. Mr. Kitayuta's Colorful Graphtime limit per test4 secondsmemory limit per test256 megabytesinputstdinoutputstdoutMr. Kitayuta has just bought an undirected graph withnvertices andmedges. The vertices of the graph are numbered from 1 ton. Each edge, namely edgei, has a colorci, connecting vertexaiandbi.Mr. Kitayuta wants you to process the followingqqueries.In thei-th query, he gives you two integers -uiandvi.Find the number of the colors that satisfy the following condition: the edges of that color connect vertexuiand vertexvidirectly or indirectly.InputThe first line of the input contains space-separated two integers -nandm(2 ≤n≤ 105, 1 ≤m≤ 105), denoting the number of the vertices and the number of the edges, respectively.The nextmlines contain space-separated three integers -ai,bi(1 ≤ai<bi≤n)andci(1 ≤ci≤m). Note that there can be multiple edges between two vertices. However, there are no multiple edges of the same color between two vertices, that is, ifi≠j, (ai,bi,ci) ≠ (aj,bj,cj).The next line contains a integer-q(1 ≤q≤ 105), denoting the number of the queries.Then followsqlines, containing space-separated two integers -uiandvi(1 ≤ui,vi≤n). It is guaranteed thatui≠vi.OutputFor each query, print the answer in a separate line.ExamplesInput4 51 2 11 2 22 3 12 3 32 4 331 23 41 4Output210Input5 71 5 12 5 13 5 14 5 11 2 22 3 23 4 251 55 12 51 51 4Output11112NoteLet's consider the first sample.The figure above shows the first sample.Vertex1and vertex2are connected by color1and2.Vertex3and vertex4are connected by color3.Vertex1and vertex4are not connected by any single color.", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "275e5f63", "template_md5": "35d339e4", "result": "You are given an undirected graph with $n$ vertices and $m$ edges. Each edge has a unique color from 1 to $m$. \n\nYou need to process $q$ queries. Each query consists of two integers $u$ and $v$ (where $u \\neq v$). For each query, find the number of colors that connect vertex $u$ to vertex $v$ either directly or indirectly.\n\n**Input:**\n\n* The first line contains two integers $n$ and $m$ ($2 \\le n \\le 10^5$, $1 \\le m \\le 10^5$), representing the number of vertices and edges, respectively.\n* The next $m$ lines each contain three integers $a_i$, $b_i$, and $c_i$ ($1 \\le a_i < b_i \\le n$, $1 \\le c_i \\le m$), representing an edge between vertices $a_i$ and $b_i$ with color $c_i$.\n* The next line contains an integer $q$ ($1 \\le q \\le 10^5$), representing the number of queries.\n* The next $q$ lines each contain two integers $u_i$ and $v_i$ ($1 \\le u_i, v_i \\le n$, $u_i \\neq v_i$), representing a query.\n\n**Output:**\n\n* For each query, print the number of colors that connect $u_i$ and $v_i$ on a separate line."}, {"prompt_md5": "a7e32ff6", "template_md5": "465699a0", "result": "You are given a graph with nodes and edges, each edge having a color.  You need to answer queries asking for the number of colors that connect two given nodes, either directly or indirectly."}]}