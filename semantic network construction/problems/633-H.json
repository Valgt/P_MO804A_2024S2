{"uid": "633-H", "url": "https://codeforces.com/contest/633/problem/H", "tags": ["data structures", " implementation"], "title": "633-H", "statement": "H. Fibonacci-ish IItime limit per test5 secondsmemory limit per test512 megabytesinputstandard inputoutputstandard outputYash is finally tired of computing the length of the longest Fibonacci-ish sequence. He now plays around with more complex things such as Fibonacci-ish potentials.Fibonacci-ish potential of an arrayaiis computed as follows:Remove all elementsjif there existsi<jsuch thatai=aj.Sort the remaining elements in ascending order, i.e.a1<a2< ... <an.Compute the potential asP(a) =a1·F1+a2·F2+ ... +an·Fn, whereFiis thei-th Fibonacci number (see notes for clarification).You are given an arrayaiof lengthnandqranges fromljtorj. For each rangejyou have to compute the Fibonacci-ish potential of the arraybi, composed using all elements ofaifromljtorjinclusive. Find these potentials modulom.InputThe first line of the input contains integers ofnandm(1 ≤n,m≤ 30 000) — the length of the initial array and the modulo, respectively.The next line containsnintegersai(0 ≤ai≤ 109) — elements of the array.Then follow the number of rangesq(1 ≤q≤ 30 000).Lastqlines contain pairs of indicesliandri(1 ≤li≤ri≤n) — ranges to compute Fibonacci-ish potentials.OutputPrintqlines,i-th of them must contain the Fibonacci-ish potential of thei-th range modulom.ExampleInput5 102 1 2 1 222 44 5Output33NoteFor the purpose of this problem define Fibonacci numbers as follows:F1=F2= 1.Fn=Fn- 1+Fn- 2for eachn> 2.In the first query, the subarray [1,2,1] can be formed using the minimal set {1,2}. Thus, the potential of this subarray is 1*1+2*1=3.", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "92b25e1d", "template_md5": "35d339e4", "result": "You are given an array of integers $a$ of length $n$.  You need to calculate the \"Fibonacci-ish potential\" of several subarrays of $a$.\n\nThe Fibonacci-ish potential of an array $b$ is calculated as follows:\n\n1. Remove any duplicate elements from $b$.\n2. Sort the remaining elements in ascending order.\n3. Calculate the sum  $P(b) = b_1F_1 + b_2F_2 + ... + b_nF_n$, where $F_i$ is the $i$-th Fibonacci number (with $F_1 = F_2 = 1$ and $F_n = F_{n-1} + F_{n-2}$ for $n > 2$).\n\nYou are given $q$ ranges, each defined by a starting index $l_i$ and an ending index $r_i$. For each range $[l_i, r_i]$, calculate the Fibonacci-ish potential of the subarray $a[l_i...r_i]$ modulo $m$.\n\n**Input:**\n\n* The first line contains two integers, $n$ and $m$ (the length of the array and the modulo).\n* The second line contains $n$ integers, the elements of the array $a$.\n* The third line contains an integer $q$, the number of ranges.\n* The next $q$ lines each contain two integers, $l_i$ and $r_i$, defining a range.\n\n**Output:**\n\nPrint $q$ lines, each containing the Fibonacci-ish potential of the corresponding range modulo $m$."}, {"prompt_md5": "d5bdae63", "template_md5": "465699a0", "result": "You are given a list of numbers.  For each given range of numbers in the list, find the sum of each number in the range multiplied by its corresponding position in the Fibonacci sequence (starting with F1 = F2 = 1, and each subsequent number being the sum of the two previous ones).  The result should be calculated modulo a given number."}]}