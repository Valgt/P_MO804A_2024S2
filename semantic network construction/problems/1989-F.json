{"uid": "1989-F", "url": "https://codeforces.com/contest/1989/problem/F", "tags": ["dfs and similar", " divide and conquer", " graphs"], "title": "1989-F", "statement": "F. Simultaneous Coloringtime limit per test6 secondsmemory limit per test512 megabytesinputstandard inputoutputstandard outputYou are given a matrix, consisting of $$$n$$$ rows and $$$m$$$ columns.You can perform two types of actions on it:paint the entire column in blue;paint the entire row in red.Note that you cannot choose which color to paint the row or column.In one second, you can perform either one action or multiple actions at the same time. If you perform one action, it will be free. If you perform $$$k > 1$$$ actions at the same time, it will cost $$$k^2$$$ coins. When multiple actions are performed at the same time, for each cell affected by actions of both types, the color can be chosen independently.You are asked to process $$$q$$$ queries. Before each query, all cells become colorless. Initially, there are no restrictions on the color of any cells. In the $$$i$$$-th query, a restriction of the following form is added:$$$x_i~y_i~c_i$$$ — the cell in row $$$x_i$$$ in column $$$y_i$$$ should be painted in color $$$c_i$$$.Thus, after $$$i$$$ queries, there are $$$i$$$ restrictions on the required colors of the matrix cells. After each query, output the minimum cost of painting the matrix according to the restrictions.InputThe first line contains three integers $$$n, m$$$ and $$$q$$$ ($$$1 \\\\le n, m, q \\\\le 2 \\\\cdot 10^5$$$) — the size of the matrix and the number of queries.In the $$$i$$$-th of the next $$$q$$$ lines, two integers $$$x_i, y_i$$$ and a character $$$c_i$$$ ($$$1 \\\\le x_i \\\\le n$$$; $$$1 \\\\le y_i \\\\le m$$$; $$$c_i \\\\in$$$ {'R','B'}, where'R'means red, and'B'means blue) — description of the $$$i$$$-th restriction. The cells in all queries are pairwise distinct.OutputPrint $$$q$$$ integers — after each query, output the minimum cost of painting the matrix according to the restrictions.ExamplesInput2 2 41 1 R2 2 R1 2 B2 1 BOutput0 0 0 16Input3 5 101 1 B2 5 B2 2 B2 3 R2 1 B3 2 R3 3 B1 2 R1 3 B3 1 BOutput0 0 0 0 0 0 16 16 25 25", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "a0157827", "template_md5": "35d339e4", "result": "You are given a matrix with $n$ rows and $m$ columns. You can perform two actions:\n\n1. Paint the entire column blue.\n2. Paint the entire row red.\n\nYou cannot choose which color to paint a row or column.  \n\n* Performing one action costs 0 coins.\n* Performing $k > 1$ actions at the same time costs $k^2$ coins.\n\nYou have $q$ queries. Before each query, the matrix is cleared of all colors.  \n\nIn the $i$-th query, a restriction is added:\n\n* You must paint the cell in row $x_i$ and column $y_i$ with color $c_i$ ('R' for red, 'B' for blue).\n\nAfter each query, find the minimum cost to paint the matrix according to all the restrictions. \n\n\n\nInput:\n\n* The first line contains three integers: $n$, $m$, and $q$ ($1 \\le n, m, q \\le 2 \\cdot 10^5$).\n* Each of the next $q$ lines contains three integers: $x_i$, $y_i$, and $c_i$ ($1 \\le x_i \\le n$, $1 \\le y_i \\le m$, $c_i \\in {'R', 'B'}$).\n\nOutput:\n\n* Print $q$ integers, where the $i$-th integer is the minimum cost after the $i$-th query."}, {"prompt_md5": "7229d584", "template_md5": "465699a0", "result": "You have a grid of cells. You can paint entire rows red or entire columns blue.  Each action costs 1 coin if done alone, or  $k^2$ coins if you do $k$ actions at the same time.  You are given a list of rules, each saying a specific cell must be a certain color.  After each rule is added, find the cheapest way to color the grid so that all the rules are followed."}]}