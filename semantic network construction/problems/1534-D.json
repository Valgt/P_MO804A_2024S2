{"uid": "1534-D", "url": "https://codeforces.com/contest/1534/problem/D", "tags": ["constructive algorithms", " interactive", " trees"], "title": "1534-D", "statement": "D. Lost Treetime limit per test3 secondsmemory limit per test256 megabytesinputstandard inputoutputstandard outputThis is an interactive problem.Little Dormi was faced with an awkward problem at the carnival: he has to guess the edges of an unweighted tree of $$$n$$$ nodes! The nodes of the tree are numbered from $$$1$$$ to $$$n$$$.The game master only allows him to ask one type of question:Little Dormi picks a node $$$r$$$ ($$$1 \\\\le r \\\\le n$$$), and the game master will reply with an array $$$d_1, d_2, \\\\ldots, d_n$$$, where $$$d_i$$$ is the length of the shortest path from node $$$r$$$ to $$$i$$$, for all $$$1 \\\\le i \\\\le n$$$.Additionally, tomake the game unfairchallenge Little Dormi the game master will allow at most $$$\\\\lceil\\\\frac{n}{2}\\\\rceil$$$ questions, where $$$\\\\lceil x \\\\rceil$$$ denotes the smallest integer greater than or equal to $$$x$$$.Faced with the stomach-churning possibility of not being able to guess the tree, Little Dormi needs your help to devise a winning strategy!Note that the game master creates the tree before the game starts, and does not change it during the game.InputThe first line of input contains the integer $$$n$$$ ($$$2 \\\\le n \\\\le 2\\\\,000$$$), the number of nodes in the tree.You will then begin interaction.OutputWhen your program has found the tree, first output a line consisting of a single \"!\" followed by $$$n-1$$$ lines each with two space separated integers $$$a$$$ and $$$b$$$, denoting an edge connecting nodes $$$a$$$ and $$$b$$$ ($$$1 \\\\le a, b \\\\le n$$$). Once you are done, terminate your program normally immediately after flushing the output stream.You may output the edges in any order and an edge $$$(a,b)$$$ is considered the same as an edge $$$(b,a)$$$. Answering is not considered as a query.InteractionAfter taking input, you may make at most $$$\\\\lceil\\\\frac{n}{2}\\\\rceil$$$ queries. Each query is made in the format \"? r\", where $$$r$$$ is an integer $$$1 \\\\le r \\\\le n$$$ that denotes the node you want to pick for that query.You will then receive $$$n$$$ space separated integers $$$d_1, d_2, \\\\ldots, d_n$$$, where $$$d_i$$$ is the length of the shortest path from node $$$r$$$ to $$$i$$$, followed by a newline.After printing a query do not forget to output end of line and flush the output. Otherwise, you will getIdleness limit exceeded. To do this, use:fflush(stdout)orcout.flush()in C++;System.out.flush()in Java;flush(output)in Pascal;stdout.flush()in Python;see documentation for other languages.If at any point you make an invalid query or try to make more than $$$\\\\lceil \\\\frac{n}{2} \\\\rceil$$$ queries, the interaction will terminate immediately and you will receive a Wrong Answer verdict.HacksTo hack a solution, use the following format.The first line contains the integer $$$n$$$ ($$$2 \\\\le n \\\\le 2\\\\,000$$$).The next $$$nâˆ’1$$$ lines contain two integers $$$u$$$ and $$$v$$$ ($$$1 \\\\le u,v \\\\le n$$$) denoting an edge between $$$u$$$ and $$$v$$$ ($$$u \\\\neq v$$$). These $$$n-1$$$ edges must form a tree.ExamplesInput4  0 1 2 2  1 0 1 1Output? 1  ? 2  ! 4 2 1 2 2 3Input5  2 2 1 1 0Output? 5  ! 4 5 3 5 2 4 1 3NoteHere is the tree from the first example.Notice that the edges can be output in any order.Additionally, here are the answers for querying every single node in example $$$1$$$:$$$1$$$: $$$[0,1,2,2]$$$$$$2$$$: $$$[1,0,1,1]$$$$$$3$$$: $$$[2,1,0,2]$$$$$$4$$$: $$$[2,1,2,0]$$$Below is the tree from the second example interaction.Lastly, here are the answers for querying every single node in example $$$2$$$:$$$1$$$: $$$[0,4,1,3,2]$$$$$$2$$$: $$$[4,0,3,1,2]$$$$$$3$$$: $$$[1,3,0,2,1]$$$$$$4$$$: $$$[3,1,2,0,1]$$$$$$5$$$: $$$[2,2,1,1,0]$$$", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "6a372a30", "template_md5": "35d339e4", "result": "You are given an unweighted tree with $n$ nodes ($2 \\le n \\le 2000$). You can ask the following type of question:\n\n* Choose a node $r$ ($1 \\le r \\le n$). The system will respond with an array $d_1, d_2, ..., d_n$, where $d_i$ is the shortest path length from node $r$ to node $i$ for all $1 \\le i \\le n$.\n\nYou are allowed to ask at most $\\lceil \\frac{n}{2} \\rceil$ questions. Your goal is to determine all the edges of the tree.\n\nOutput your answer as a list of edges, where each edge is represented by two space-separated integers $a$ and $b$ (denoting an edge between nodes $a$ and $b$). You can output the edges in any order."}, {"prompt_md5": "e84d1bce", "template_md5": "465699a0", "result": "You need to figure out the connections between $n$ points. You can ask questions about the shortest distance from a chosen point to all other points. You are allowed to ask at most $\\lceil \\frac{n}{2} \\rceil$ questions.  After figuring out the connections, list them out."}]}