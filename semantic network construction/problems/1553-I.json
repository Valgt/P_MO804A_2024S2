{"uid": "1553-I", "url": "https://codeforces.com/contest/1553/problem/I", "tags": ["combinatorics", " divide and conquer", " dp", " fft", " math"], "title": "1553-I", "statement": "I. Stairstime limit per test10 secondsmemory limit per test1024 megabytesinputstandard inputoutputstandard outputFor a permutation $$$p$$$ of numbers $$$1$$$ through $$$n$$$, we define astair array$$$a$$$ as follows: $$$a_i$$$ is length of the longest segment of permutation which contains position $$$i$$$ and is made of consecutive values in sorted order: $$$[x, x+1, \\\\ldots, y-1, y]$$$ or $$$[y, y-1, \\\\ldots, x+1, x]$$$ for some $$$x \\\\leq y$$$. For example, for permutation $$$p = [4, 1, 2, 3, 7, 6, 5]$$$ we have $$$a = [1, 3, 3, 3, 3, 3, 3]$$$.You are given the stair array $$$a$$$. Your task is to calculate the number of permutations which have stair array equal to $$$a$$$. Since the number can be big, compute it modulo $$$998\\\\,244\\\\,353$$$. Note that this number can be equal to zero.InputThe first line of input contains integer $$$n$$$ ($$$1 \\\\le n \\\\le 10^5$$$)  — the length of a stair array $$$a$$$.The second line of input contains $$$n$$$ integers $$$a_1, a_2, \\\\ldots, a_n$$$ ($$$1 \\\\le a_i \\\\le n$$$).OutputPrint the number of permutations which have stair array equal to $$$a$$$. Since the number can be big, compute it modulo $$$998\\\\,244\\\\,353$$$.ExamplesInput6 3 3 3 1 1 1Output6Input7 4 4 4 4 3 3 3Output6Input1 1Output1Input8 2 2 2 2 2 2 1 1Output370Input4 3 2 3 1Output0", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "4e2138d7", "template_md5": "35d339e4", "result": "You are given an array $a$ of length $n$.  Each element $a_i$ represents the length of the longest consecutive sequence of numbers in a permutation of length $n$ that includes the element at index $i$.  \n\nFor example, if $n=7$ and $a = [1, 3, 3, 3, 3, 3, 3]$, then there are permutations where the longest consecutive sequence containing the element at index 0 has length 1, the longest consecutive sequence containing the element at index 1 has length 3, and so on.\n\nYour task is to find the number of different permutations that could result in the given array $a$.  Since the number of permutations could be very large, output the result modulo 998244353."}, {"prompt_md5": "2be29bec", "template_md5": "465699a0", "result": "You are given a list of numbers. Each number represents the length of the longest consecutive sequence of numbers in a permutation that includes that position.  Find the number of different permutations that could produce this list.  The answer may be very large, so give it modulo 998244353."}]}