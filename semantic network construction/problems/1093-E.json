{"uid": "1093-E", "url": "https://codeforces.com/contest/1093/problem/E", "tags": ["data structures"], "title": "1093-E", "statement": "E. Intersection of Permutationstime limit per test6 secondsmemory limit per test512 megabytesinputstandard inputoutputstandard outputYou are given two permutations $$$a$$$ and $$$b$$$, both consisting of $$$n$$$ elements. Permutation of $$$n$$$ elements is such a integer sequence that each value from $$$1$$$ to $$$n$$$ appears exactly once in it.You are asked to perform two types of queries with them:$$$1~l_a~r_a~l_b~r_b$$$ — calculate the number of values which appear in both segment $$$[l_a; r_a]$$$ of positions in permutation $$$a$$$ and segment $$$[l_b; r_b]$$$ of positions in permutation $$$b$$$;$$$2~x~y$$$ — swap values on positions $$$x$$$ and $$$y$$$ in permutation $$$b$$$.Print the answer for each query of the first type.It is guaranteed that there will be at least one query of the first type in the input.InputThe first line contains two integers $$$n$$$ and $$$m$$$ ($$$2 \\\\le n \\\\le 2 \\\\cdot 10^5$$$, $$$1 \\\\le m \\\\le 2 \\\\cdot 10^5$$$) — the number of elements in both permutations and the number of queries.The second line contains $$$n$$$ integers $$$a_1, a_2, \\\\dots, a_n$$$ ($$$1 \\\\le a_i \\\\le n$$$) — permutation $$$a$$$. It is guaranteed that each value from $$$1$$$ to $$$n$$$ appears in $$$a$$$ exactly once.The third line contains $$$n$$$ integers $$$b_1, b_2, \\\\dots, b_n$$$ ($$$1 \\\\le b_i \\\\le n$$$) — permutation $$$b$$$. It is guaranteed that each value from $$$1$$$ to $$$n$$$ appears in $$$b$$$ exactly once.Each of the next $$$m$$$ lines contains the description of a certain query. These are either:$$$1~l_a~r_a~l_b~r_b$$$ ($$$1 \\\\le l_a \\\\le r_a \\\\le n$$$, $$$1 \\\\le l_b \\\\le r_b \\\\le n$$$);$$$2~x~y$$$ ($$$1 \\\\le x, y \\\\le n$$$, $$$x \\\\ne y$$$).OutputPrint the answers for the queries of the first type, each answer in the new line — the number of values which appear in both segment $$$[l_a; r_a]$$$ of positions in permutation $$$a$$$ and segment $$$[l_b; r_b]$$$ of positions in permutation $$$b$$$.ExampleInput6 7 5 1 4 2 3 6 2 5 3 1 4 6 1 1 2 4 5 2 2 4 1 1 2 4 5 1 2 3 3 5 1 1 6 1 2 2 4 1 1 4 4 1 3Output1 1 1 2 0NoteConsider the first query of the first example. Values on positions $$$[1; 2]$$$ of $$$a$$$ are $$$[5, 1]$$$ and values on positions $$$[4; 5]$$$ of $$$b$$$ are $$$[1, 4]$$$. Only value $$$1$$$ appears in both segments.After the first swap (the second query) permutation $$$b$$$ becomes $$$[2, 1, 3, 5, 4, 6]$$$.After the second swap (the sixth query) permutation $$$b$$$ becomes $$$[5, 1, 3, 2, 4, 6]$$$.", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "ad8b8fa0", "template_md5": "35d339e4", "result": "You are given two lists of numbers,  *a* and *b*, each containing *n* unique numbers from 1 to *n*.  \n\nYou need to answer two types of queries:\n\n1. **Intersection:** Given two ranges in each list, *[l<sub>a</sub>, r<sub>a</sub>]* in *a* and *[l<sub>b</sub>, r<sub>b</sub>]* in *b*, count how many numbers appear in both ranges.\n2. **Swap:** Swap the numbers at positions *x* and *y* in list *b*.\n\nPrint the answer to each intersection query. \n\n**Input:**\n\n* The first line contains two integers *n* and *m*, the length of the lists and the number of queries.\n* The second line contains the elements of list *a*.\n* The third line contains the elements of list *b*.\n* Each of the next *m* lines describes a query:\n    * `1 l<sub>a</sub> r<sub>a</sub> l<sub>b</sub> r<sub>b</sub>`: An intersection query.\n    * `2 x y`: A swap query.\n\n**Output:**\n\nPrint the answer to each intersection query on a new line."}, {"prompt_md5": "e4f91a19", "template_md5": "465699a0", "result": "You are given two lists of numbers.  You need to answer questions about how many numbers appear in overlapping sections of the two lists. You can also swap numbers within one of the lists."}]}