{"uid": "1948-F", "url": "https://codeforces.com/contest/1948/problem/F", "tags": ["combinatorics", " math", " probabilities"], "title": "1948-F", "statement": "F. Rare Coinstime limit per test2 secondsmemory limit per test256 megabytesinputstandard inputoutputstandard outputThere are $$$n$$$ bags numbered from $$$1$$$ to $$$n$$$, the $$$i$$$-th bag contains $$$a_i$$$ golden coins and $$$b_i$$$ silver coins.The value of a gold coin is $$$1$$$. The value of a silver coin is either $$$0$$$ or $$$1$$$, determined for each silver coin independently ($$$0$$$ with probability $$$\\\\frac{1}{2}$$$, $$$1$$$ with probability $$$\\\\frac{1}{2}$$$).You have to answer $$$q$$$ independent queries. Each query is the following:$$$l$$$ $$$r$$$ — calculate the probability that the total value of coins in bags from $$$l$$$ to $$$r$$$ is strictly greater than the total value in all other bags.InputThe first line contains two integers $$$n$$$ and $$$q$$$ ($$$1 \\\\le n, q \\\\le 3 \\\\cdot 10^5$$$) — the number of bags and the number of queries, respectively.The second line contains $$$n$$$ integers $$$a_1, a_2, \\\\dots, a_n$$$ ($$$0 \\\\le a_i \\\\le 10^6$$$) — the number of gold coins in the $$$i$$$-th bag.The third line contains $$$n$$$ integers $$$b_1, b_2, \\\\dots, b_n$$$ ($$$0 \\\\le b_i \\\\le 10^6$$$) — the number of silver coins in the $$$i$$$-th bag.Next $$$q$$$ lines contain queries. The $$$j$$$-th of the next $$$q$$$ lines contains two integers $$$l_j$$$ and $$$r_j$$$ ($$$1 \\\\le l_j \\\\le r_j \\\\le n$$$) — the description of the $$$j$$$-th query.Additional constraints on the input:the sum of the array $$$a$$$ doesn't exceed $$$10^6$$$;the sum of the array $$$b$$$ doesn't exceed $$$10^6$$$.OutputFor each query, print one integer — the probability that the total value of coins in bags from $$$l$$$ to $$$r$$$ is strictly greater than the total value in all other bags, taken modulo $$$998244353$$$.Formally, the probability can be expressed as an irreducible fraction $$$\\\\frac{x}{y}$$$. You have to print the value of $$$x \\\\cdot y^{-1} \\\\bmod 998244353$$$, where $$$y^{-1}$$$ is an integer such that $$$y \\\\cdot y^{-1} \\\\bmod 998244353 = 1$$$.ExamplesInput2 21 00 22 21 1Output748683265 748683265Input4 32 3 4 51 0 7 33 32 31 4Output997756929 273932289 1NoteIn both queries from the first example, the answer is $$$\\\\frac{1}{4}$$$.", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "5c148f15", "template_md5": "35d339e4", "result": "There are $n$ bags, each containing $a_i$ gold coins and $b_i$ silver coins. Each silver coin has a value of either $0$ or $1$ with equal probability.\n\nYou need to answer $q$ queries. Each query is defined by two numbers $l$ and $r$. For each query, calculate the probability that the total value of coins in bags from $l$ to $r$ is strictly greater than the total value in all other bags.\n\n**Input:**\n\n* The first line contains two integers $n$ and $q$ ($1 \\le n, q \\le 3 \\cdot 10^5$) - the number of bags and the number of queries, respectively.\n* The second line contains $n$ integers $a_1, a_2, ..., a_n$ ($0 \\le a_i \\le 10^6$) - the number of gold coins in each bag.\n* The third line contains $n$ integers $b_1, b_2, ..., b_n$ ($0 \\le b_i \\le 10^6$) - the number of silver coins in each bag.\n* The next $q$ lines contain queries. The $j$-th of the next $q$ lines contains two integers $l_j$ and $r_j$ ($1 \\le l_j \\le r_j \\le n$) - the description of the $j$-th query.\n\n**Output:**\n\nFor each query, print one integer - the probability that the total value of coins in bags from $l$ to $r$ is strictly greater than the total value in all other bags, taken modulo $998244353$."}, {"prompt_md5": "2a141968", "template_md5": "465699a0", "result": "You have a number of bags, each containing a certain number of gold coins and silver coins. The value of a silver coin is either 0 or 1. You need to calculate the probability that the total value of coins in a given range of bags is greater than the total value of coins in all other bags."}]}