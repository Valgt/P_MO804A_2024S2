{"uid": "1743-G", "url": "https://codeforces.com/contest/1743/problem/G", "tags": ["bitmasks", " combinatorics", " constructive algorithms", " data structures", " dp", " hashing", " math"], "title": "1743-G", "statement": "G. Antifibonacci Cuttime limit per test12 secondsmemory limit per test4 megabytesinputstandard inputoutputstandard outputNote that the memory limit is unusual.Let's define the sequence of Fibonacci strings as follows: $$$f_0$$$ is0, $$$f_1$$$ is1, $$$f_i$$$ is $$$f_{i-1} + f_{i-2}$$$ for $$$i>1$$$ ($$$+$$$ denotes the concatenation of two strings). So, for example, $$$f_2$$$ is10, $$$f_3$$$ is101, $$$f_4$$$ is10110.For a given string $$$s$$$, let's define $$$g(s)$$$ as the number of ways to cut it into several (any number, possibly even just one) strings such that none of these strings are Fibonacci strings. For example, if $$$s$$$ is10110101, $$$g(s) = 3$$$ since there are three ways to cut it:101101$$$+$$$01;1011$$$+$$$0101;1011$$$+$$$01$$$+$$$01.You are given a sequence of strings $$$s_1, s_2, \\\\dots, s_n$$$. Calculate $$$g(s_1), g(s_1 + s_2), \\\\dots, g(s_1 + s_2 + \\\\ldots + s_n)$$$. Since these values can be huge, print them modulo $$$998244353$$$.InputThe first line of the input contains one integer $$$n$$$ ($$$1 \\\\le n \\\\le 3 \\\\cdot 10^3$$$).Then, $$$n$$$ lines follow. The $$$i$$$-th line contains the string $$$s_i$$$ ($$$1 \\\\le |s_i| \\\\le 10^3$$$), consisting of characters0and/or1.OutputPrint $$$n$$$ integers, where the $$$i$$$-th integer is $$$g(s_1 + s_2 + \\\\ldots + s_i) \\\\bmod 998244353$$$.ExamplesInput1 10110101Output3Input3 1111 1 0Output2 3 3Input6 10110101 100100001110 0000001100010001 1111 1001010100101010101001 000100000010101111Output3 561 1466229 9887505 972227653 52128355", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "98fc23bc", "template_md5": "35d339e4", "result": "You are given a sequence of binary strings ($$s_1, s_2, ..., s_n$$).  \n\nDefine a function $$g(s)$$ as the number of ways to cut a string $$s$$ into smaller strings such that none of the smaller strings are Fibonacci strings.  \n\nFor example, if $$s = 10110101$$, then $$g(s) = 3$$ because there are three ways to cut it:\n\n* $$101101 + 01$$\n* $$1011 + 0101$$\n* $$1011 + 01 + 01$$\n\nCalculate $$g(s_1), g(s_1 + s_2), ..., g(s_1 + s_2 + ... + s_n)$$ and print each result modulo $$998244353$$."}, {"prompt_md5": "5e64cf50", "template_md5": "465699a0", "result": "You are given a sequence of binary strings. For each prefix of the strings, calculate the number of ways to cut it into pieces where no piece is a Fibonacci string (Fibonacci strings are formed by concatenating previous Fibonacci strings, starting with \"0\" and \"1\").  The answer should be taken modulo 998244353."}]}