{"uid": "455-C", "url": "https://codeforces.com/contest/455/problem/C", "tags": ["dfs and similar", " dp", " dsu", " ternary search", " trees"], "title": "455-C", "statement": "C. Civilizationtime limit per test1 secondmemory limit per test256 megabytesinputstdinoutputstdoutAndrew plays a game called \"Civilization\". Dima helps him.The game hasncities andmbidirectional roads. The cities are numbered from1ton. Between any pair of cities there either is a single (unique) path, or there is no path at all. A path is such a sequence of distinct citiesv1,v2, ...,vk, that there is a road between any contiguous citiesviandvi+ 1(1 ≤i<k). The length of the described path equals to(k- 1). We assume that two cities lie in the same region if and only if, there is a path connecting these two cities.During the game events of two types take place:Andrew asks Dima about the length of the longest path in the region where cityxlies.Andrew asks Dima to merge the region where cityxlies with the region where cityylies. If the cities lie in the same region, then no merging is needed. Otherwise, you need to merge the regions as follows: choose a city from the first region, a city from the second region and connect them by a road so as to minimize the length of the longest path in the resulting region. If there are multiple ways to do so, you are allowed to choose any of them.Dima finds it hard to execute Andrew's queries, so he asks you to help him. Help Dima.InputThe first line contains three integersn,m,q(1 ≤n≤ 3·105;0 ≤m<n;1 ≤q≤ 3·105) — the number of cities, the number of the roads we already have and the number of queries, correspondingly.Each of the followingmlines contains two integers,aiandbi(ai≠bi;1 ≤ai,bi≤n). These numbers represent the road between citiesaiandbi. There can be at most one road between two cities.Each of the followingqlines contains one of the two events in the following format:1xi. It is the request Andrew gives to Dima to find the length of the maximum path in the region that contains cityxi(1 ≤xi≤n).2xiyi. It is the request Andrew gives to Dima to merge the region that contains cityxiand the region that contains cityyi(1 ≤xi,yi≤n). Note, thatxican be equal toyi.OutputFor each event of the first type print the answer on a separate line.ExamplesInput6 0 62 1 22 3 42 5 62 3 22 5 31 1Output4", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "588bf7ac", "template_md5": "35d339e4", "result": "There are $n$ cities and $m$ roads connecting them.  Roads are bidirectional.  \n\nA region is defined as a group of cities connected by a path.\n\nThe problem has $q$ queries of two types:\n\n* **Type 1:** Find the length of the longest path in the region containing city $x$.\n* **Type 2:** Merge the region containing city $x$ with the region containing city $y$. If they are already in the same region, do nothing. Otherwise, connect a city from each region with a new road to minimize the length of the longest path in the resulting region. If there are multiple ways to do this, choose any.\n\nFor each Type 1 query, output the length of the longest path. \n\n\n\nInput:\n\n* The first line contains three integers: $n$, $m$, and $q$ ($1 \\le n \\le 3 \\cdot 10^5$, $0 \\le m < n$, $1 \\le q \\le 3 \\cdot 10^5$).\n* The next $m$ lines each contain two integers, $a_i$ and $b_i$ ($a_i \\neq b_i$, $1 \\le a_i, b_i \\le n$), representing a road between cities $a_i$ and $b_i$.\n* The next $q$ lines each contain a query of Type 1 or Type 2 in the format:\n    * `1 x` for a Type 1 query\n    * `2 x y` for a Type 2 query\n\nOutput:\n\n* For each Type 1 query, output the length of the longest path on a separate line."}, {"prompt_md5": "fdfa6460", "template_md5": "465699a0", "result": "You are given a set of cities connected by roads.  Some cities may not be connected.  You need to answer two types of queries:\n\n1. Find the length of the longest path of connected cities starting from a given city.\n2. Merge two regions of connected cities by adding a single road between them in a way that minimizes the length of the longest path in the new combined region."}]}