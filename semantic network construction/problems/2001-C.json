{"uid": "2001-C", "url": "https://codeforces.com/contest/2001/problem/C", "tags": ["binary search", " brute force", " dfs and similar", " divide and conquer", " dsu", " greedy", " interactive", " trees"], "title": "2001-C", "statement": "C. Guess The Treetime limit per test2 secondsmemory limit per test256 megabytesinputstandard inputoutputstandard outputThis is an interactive problem.Misuki has chosen a secret tree with $$$n$$$ nodes, indexed from $$$1$$$ to $$$n$$$, and asked you to guess it by using queries of the following type:\"? a b\"— Misuki will tell you which node $$$x$$$ minimizes $$$|d(a,x) - d(b,x)|$$$, where $$$d(x,y)$$$ is the distance between nodes $$$x$$$ and $$$y$$$. If more than one such node exists, Misuki will tell you the one which minimizes $$$d(a,x)$$$.Find out the structure of Misuki's secret tree using at most $$$15n$$$ queries!InputEach test consists of multiple test cases. The first line contains a single integer $$$t$$$ ($$$1 \\\\le t \\\\le 200$$$) — the number of test cases.Each test case consists of a single line with an integer $$$n$$$ ($$$2 \\\\le n \\\\le 1000$$$), the number of nodes in the tree.It is guaranteed that the sum of $$$n$$$ across all test cases does not exceed $$$1000$$$.InteractionThe interaction begins by reading the integer $$$n$$$.Then you can make up to $$$15n$$$ queries.To make a query, output a line in the format\"? a b\"(without quotes) ($$$1 \\\\le a,b \\\\le n$$$). After each query, read an integer — the answer to your query.To report the answer, output a line in the format\"! $$$a_1$$$ $$$b_1$$$ $$$a_2$$$ $$$b_2$$$ ... $$$a_{n-1}$$$ $$$b_{n-1}$$$\"(without quotes), meaning that there is an edge between nodes $$$a_i$$$ and $$$b_i$$$, for each $$$1 \\\\le i \\\\le n-1$$$. You can print the edges in any order.After $$$15n$$$ queries have been made, the response to any other query will be $$$-1$$$. Once you receive such a response, terminate the program to receive theWrong Answerverdict.After printing each line, do not forget to output the end of line and flush the output buffer. Otherwise, you will receive theIdleness limit exceededverdict. To flush, use:fflush(stdout)orcout.flush()in C++;System.out.flush()in Java;flush(output)in Pascal;stdout.flush()in Python;see the documentation for other languages.HacksFor hacks, use the following format: The first line contains an integer $$$t$$$ ($$$1 \\\\le t \\\\le 200$$$) — the number of test cases.The first line of each test contains an integer $$$n$$$ — the number of nodes in the hidden tree.Then $$$n-1$$$ lines follow. The $$$i$$$-th of them contains two integers $$$a_i$$$ and $$$b_i$$$ ($$$1 \\\\le a_i, b_i \\\\le n$$$), meaning that there is an edge between $$$a_i$$$ and $$$b_i$$$ in the hidden tree.The sum of $$$n$$$ over all test cases must not exceed $$$1000$$$.ExampleInput1 4 1 1 3Output? 1 2  ? 1 3  ? 1 4  ! 1 2 1 3 3 4NoteA tree is an undirected acyclic connected graph. A tree with $$$n$$$ nodes will always have $$$n-1$$$ edges.In the example case, the answer to\"? 1 2\"is $$$1$$$. This means that there is an edge between nodes $$$1$$$ and $$$2$$$.The answer to\"? 1 3\"is $$$1$$$. This means that there is an edge between nodes $$$1$$$ and $$$3$$$.The answer to\"? 1 4\"is $$$3$$$. It can be proven that this can only happen if node $$$3$$$ is connected to both node $$$1$$$ and $$$4$$$.The edges of the tree are hence $$$(1,2)$$$, $$$(1,3)$$$ and $$$(3,4)$$$.", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "beae3c0b", "template_md5": "35d339e4", "result": "You are given a tree with $n$ nodes. You need to determine the structure of the tree by asking queries of the following type:\n\n\"? a b\"\n\nFor a given pair of nodes $a$ and $b$, the tree will tell you the node $x$ that minimizes the distance between $a$ and $x$ and the distance between $b$ and $x$. If there are multiple nodes that satisfy this condition, the tree will choose the node $x$ that minimizes the distance between $a$ and $x$.\n\nYou can ask up to $15n$ queries to determine the structure of the tree. To report your answer, output a list of edges in the format:\n\n\"! $a_1$ $b_1$ $a_2$ $b_2$ ... $a_{n-1}$ $b_{n-1}$\"\n\nwhere each pair $(a_i, b_i)$ represents an edge in the tree."}, {"prompt_md5": "4706c504", "template_md5": "465699a0", "result": "You need to figure out the connections between nodes in a tree. You can ask questions about which node is closest to two given nodes. You have a limited number of questions to determine all the connections in the tree."}]}