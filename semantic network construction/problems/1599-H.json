{"uid": "1599-H", "url": "https://codeforces.com/contest/1599/problem/H", "tags": ["interactive", " math"], "title": "1599-H", "statement": "H. Hidden Fortresstime limit per test1 secondmemory limit per test256 megabytesinputstandard inputoutputstandard outputThis is an interactive problem!As part of your contribution in the Great Bubble War, you have been tasked with finding the newly built enemy fortress. The world you live in is a giant $$$10^9 \\\\times 10^9$$$ grid, with squares having both coordinates between $$$1$$$ and $$$10^9$$$.You know that the enemy base has the shape of a rectangle, with the sides parallel to the sides of the grid. The people of your world are extremely scared of being at the edge of the world, so you know that the base doesn't contain any of the squares on the edges of the grid (the $$$x$$$ or $$$y$$$ coordinate being $$$1$$$ or $$$10^9$$$).To help you locate the base, you have been given a device that you can place in any square of the grid, and it will tell you the manhattan distance to the closest square of the base. The manhattan distance from square $$$(a, b)$$$ to square $$$(p, q)$$$ is calculated as $$$|a−p|+|b−q|$$$. If you try to place the device inside the enemy base, you will be captured by the enemy. Because of this,you need to make sure to never place the device inside the enemy base.Unfortunately, the device is powered by a battery and you can't recharge it. This means that you can use the device at most $$$40$$$ times.InputThe input contains the answers to your queries.InteractionYour code is allowed to place the device on any square in the grid by writing \"? $$$i$$$ $$$j$$$\" $$$(1 \\\\leq i,j \\\\leq 10^9)$$$. In return, it will recieve the manhattan distance to the closest square of the enemy base from square $$$(i,j)$$$ or $$$-1$$$ if the square you placed the device on is inside the enemy base or outside the grid.If you recieve $$$-1$$$ instead of a positive number, exit immidiately and you will see thewrong answerverdict. Otherwise, you can get an arbitrary verdict because your solution will continue to read from a closed stream.Your solution should use no more than $$$40$$$ queries.Once you are sure where the enemy base is located, you should print \"! $$$x$$$ $$$y$$$ $$$p$$$ $$$q$$$\" $$$(1 \\\\leq x \\\\leq p\\\\leq 10^9, 1 \\\\leq y \\\\leq q\\\\leq 10^9)$$$, where $$$(x, y)$$$ is the square inside the enemy base with the smallest $$$x$$$ and $$$y$$$ coordinates, and $$$(p, q)$$$ is the square inside the enemy base with the largest $$$x$$$ and $$$y$$$ coordinates.Note that answering doesn't count as one of the 40 queries.After printing a query or printing the answer, do not forget to output end of line and flush the output. Otherwise, you will getidleness limit exceeded. To do this, use:fflush(stdout)orcout.flush()in C++;System.out.flush()in Java;flush(output)in Pascal;stdout.flush()in Python;See the documentation for other languages.ExampleInput1 1 2 1Output? 2 2 ? 5 5 ? 4 7 ? 1 5 ! 2 3 4 5", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "6e9083ff", "template_md5": "35d339e4", "result": "You are trying to find a rectangular enemy base hidden on a $10^9 \\times 10^9$ grid. The base does not touch the edges of the grid. You have a device that can measure the Manhattan distance to the nearest point of the base from any given point on the grid.  Manhattan distance is calculated as $|a-p| + |b-q|$ where $(a,b)$ is the current point and $(p,q)$ is a point on the base.\n\nYou can only use the device 40 times before it runs out of power.  You cannot place the device inside the base.\n\nYour task is to find the coordinates of the top-left and bottom-right corners of the base.\n\n**Here's how to interact with the problem:**\n\n* **Query:** To use the device, print a line \"? i j\" where i and j are the coordinates of the point you want to check.\n* **Response:** The program will respond with the Manhattan distance to the nearest point on the base, or -1 if the point is inside the base or outside the grid.\n* **Answer:** When you find the base, print a line \"! x y p q\" where:\n    * (x, y) are the coordinates of the top-left corner of the base.\n    * (p, q) are the coordinates of the bottom-right corner of the base."}, {"prompt_md5": "4ffa7707", "template_md5": "465699a0", "result": "You need to find a rectangular area within a large grid. You can ask for the distance to the nearest edge of the rectangle from a given point. You have a limited number of questions (40) and cannot ask questions inside the rectangle. Once you find the rectangle, report its smallest and largest corner coordinates."}]}