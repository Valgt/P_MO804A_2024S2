{"uid": "1327-F", "url": "https://codeforces.com/contest/1327/problem/F", "tags": ["bitmasks", " combinatorics", " data structures", " dp", " two pointers"], "title": "1327-F", "statement": "F. AND Segmentstime limit per test3 secondsmemory limit per test256 megabytesinputstandard inputoutputstandard outputYou are given three integers $$$n$$$, $$$k$$$, $$$m$$$ and $$$m$$$ conditions $$$(l_1, r_1, x_1), (l_2, r_2, x_2), \\\\dots, (l_m, r_m, x_m)$$$.Calculate the number of distinct arrays $$$a$$$, consisting of $$$n$$$ integers such that:$$$0 \\\\le a_i < 2^k$$$ for each $$$1 \\\\le i \\\\le n$$$;bitwise AND of numbers $$$a[l_i] \\\\& a[l_i + 1] \\\\& \\\\dots \\\\& a[r_i] = x_i$$$ for each $$$1 \\\\le i \\\\le m$$$.Two arrays $$$a$$$ and $$$b$$$ are considered different if there exists such a position $$$i$$$ that $$$a_i \\\\neq b_i$$$.The number can be pretty large so print it modulo $$$998244353$$$.InputThe first line contains three integers $$$n$$$, $$$k$$$ and $$$m$$$ ($$$1 \\\\le n \\\\le 5 \\\\cdot 10^5$$$, $$$1 \\\\le k \\\\le 30$$$, $$$0 \\\\le m \\\\le 5 \\\\cdot 10^5$$$) — the length of the array $$$a$$$, the value such that all numbers in $$$a$$$ should be smaller than $$$2^k$$$ and the number of conditions, respectively.Each of the next $$$m$$$ lines contains the description of a condition $$$l_i$$$, $$$r_i$$$ and $$$x_i$$$ ($$$1 \\\\le l_i \\\\le r_i \\\\le n$$$, $$$0 \\\\le x_i < 2^k$$$) — the borders of the condition segment and the required bitwise AND value on it.OutputPrint a single integer — the number of distinct arrays $$$a$$$ that satisfy all the above conditions modulo $$$998244353$$$.ExamplesInput4 3 2 1 3 3 3 4 6Output3Input5 2 3 1 3 2 2 5 0 3 3 3Output33NoteYou can recall what is a bitwise AND operationhere.In the first example, the answer is the following arrays: $$$[3, 3, 7, 6]$$$, $$$[3, 7, 7, 6]$$$ and $$$[7, 3, 7, 6]$$$.", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "d3ce9b34", "template_md5": "35d339e4", "result": "You are given:\n\n*  $n$: the length of an array.\n*  $k$: a number such that all numbers in the array should be less than $2^k$.\n*  $m$: the number of conditions.\n\nEach condition is defined by:\n\n*  $l_i$: the starting index of a segment in the array.\n*  $r_i$: the ending index of a segment in the array.\n*  $x_i$: the required bitwise AND value of all elements in the segment.\n\nFind the number of distinct arrays that satisfy all the conditions. Two arrays are distinct if they have at least one different element.\n\nThe answer can be very large, so print it modulo 998244353."}, {"prompt_md5": "5ce191cc", "template_md5": "465699a0", "result": "You are given a length and a maximum value. You need to find the number of different arrays of that length where each element is less than the maximum value, and the bitwise AND of elements in specific ranges of the array equals a given value for each range.  The answer should be the number of unique arrays modulo 998244353."}]}