{"uid": "1172-E", "url": "https://codeforces.com/contest/1172/problem/E", "tags": ["data structures"], "title": "1172-E", "statement": "E. Nauuo and ODTtime limit per test7.5 secondsmemory limit per test512 megabytesinputstandard inputoutputstandard outputNauuo is a girl who loves traveling.One day she went to a tree, Old Driver Tree, literally, a tree with an old driver on it.The tree is a connected graph consisting of $$$n$$$ nodes and $$$n-1$$$ edges. Each node has a color, and Nauuo will visit the ODT through a simple path on the tree in the old driver's car.Nauuo wants to visit see more different colors in her journey, but she doesn't know which simple path she will be traveling on. So, she wants to calculate the sum of the numbers of different colors on all different paths. Can you help her?What's more, the ODT is being redecorated, so there will be $$$m$$$ modifications, each modification will change a single node's color. Nauuo wants to know the answer after each modification too.Note that in this problem, we consider the simple path from $$$u$$$ to $$$v$$$ and the simple path from $$$v$$$ to $$$u$$$ as two different simple paths if and only if $$$u\\\\ne v$$$.InputThe first line contains two integers $$$n$$$ and $$$m$$$ ($$$2\\\\le n\\\\le 4\\\\cdot 10^5$$$, $$$1\\\\le m\\\\le 4\\\\cdot 10^5$$$) — the number of nodes and the number of modifications.The second line contains $$$n$$$ integers $$$c_1,c_2,\\\\ldots,c_n$$$ ($$$1\\\\le c_i\\\\le n$$$), where $$$c_i$$$ is the initial color of node $$$i$$$.Each of the next $$$n-1$$$ lines contains two integers $$$u$$$ and $$$v$$$ ($$$1\\\\le u,v\\\\le n$$$), denoting there is an edge between $$$u$$$ and $$$v$$$. It is guaranteed that the given edges form a tree.Each of the next $$$m$$$ lines contains two integers $$$u$$$ and $$$x$$$ ($$$1\\\\le u,x\\\\le n$$$), which means a modification that changes the color of node $$$u$$$ into $$$x$$$.OutputThe output contains $$$m+1$$$ integers — the first integer is the answer at the beginning, the rest integers are the answers after every modification in the given order.ExamplesInput5 3 1 2 1 2 3 1 2 1 3 3 4 3 5 3 3 4 1 4 3Output47 51 49 45Input6 1 1 1 1 1 1 1 1 2 2 3 3 4 4 5 5 6 1 2Output36 46NoteExample 1The number of colors on each simple path at the beginning:", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "2a22f23c", "template_md5": "35d339e4", "result": "You are given a tree with $n$ nodes. Each node has a color, represented by an integer from 1 to $n$.  \n\nYou need to calculate the sum of the number of different colors on all simple paths in the tree. \n\nThere will be $m$ modifications, each changing the color of a single node. After each modification, you need to recalculate the sum of different colors on all simple paths.\n\n**Input:**\n\n* The first line contains two integers $n$ and $m$ ($2 \\le n \\le 4 \\cdot 10^5$, $1 \\le m \\le 4 \\cdot 10^5$) - the number of nodes and the number of modifications.\n* The second line contains $n$ integers $c_1, c_2, ..., c_n$ ($1 \\le c_i \\le n$) - the initial color of each node.\n* The next $n-1$ lines each contain two integers $u$ and $v$ ($1 \\le u, v \\le n$) - representing an edge between nodes $u$ and $v$.\n* The next $m$ lines each contain two integers $u$ and $x$ ($1 \\le u, x \\le n$) - representing a modification that changes the color of node $u$ to $x$.\n\n**Output:**\n\n* Output $m+1$ integers. The first integer is the sum of different colors on all paths at the beginning. The remaining integers are the sums after each modification, in the order they occur."}, {"prompt_md5": "c12a4e6b", "template_md5": "465699a0", "result": "You are given a tree with $n$ nodes, each initially colored with a distinct number from 1 to $n$.  You need to find the total number of unique colors visited along all possible simple paths in the tree.  Then, you will be given $m$ updates, each changing the color of a single node. After each update, you need to recalculate the total number of unique colors visited along all simple paths."}]}