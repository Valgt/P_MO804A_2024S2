{"uid": "1515-H", "url": "https://codeforces.com/contest/1515/problem/H", "tags": ["bitmasks", " brute force", " data structures", " sortings"], "title": "1515-H", "statement": "H. Phoenix and Bitstime limit per test4 secondsmemory limit per test512 megabytesinputstandard inputoutputstandard outputPhoenix loves playing with bits — specifically, by using the bitwise operationsAND,OR, andXOR. He has $$$n$$$ integers $$$a_1, a_2, \\\\dots, a_n$$$, and will perform $$$q$$$ of the following queries:replace all numbers $$$a_i$$$ where $$$l \\\\le a_i \\\\le r$$$ with $$$a_i$$$AND$$$x$$$;replace all numbers $$$a_i$$$ where $$$l \\\\le a_i \\\\le r$$$ with $$$a_i$$$OR$$$x$$$;replace all numbers $$$a_i$$$ where $$$l \\\\le a_i \\\\le r$$$ with $$$a_i$$$XOR$$$x$$$;output how manydistinctintegers $$$a_i$$$ where $$$l \\\\le a_i \\\\le r$$$.For each query, Phoenix is given $$$l$$$, $$$r$$$, and $$$x$$$. Note that he is considering the values of the numbers, not their indices.InputThe first line contains two integers $$$n$$$ and $$$q$$$ ($$$1 \\\\le n \\\\le 2 \\\\cdot 10^5$$$; $$$1 \\\\le q \\\\le 10^5$$$) — the number of integers and the number of queries, respectively.The second line contains $$$n$$$ integers $$$a_1, a_2, \\\\dots, a_n$$$ ($$$0 \\\\le a_i < 2^{20}$$$) — the integers that Phoenix starts with.The next $$$q$$$ lines contain the queries. For each query, the first integer of each line is $$$t$$$ ($$$1 \\\\le t \\\\le 4$$$) — the type of query.If $$$t \\\\in \\\\{1, 2, 3\\\\}$$$, then three integers $$$l_i$$$, $$$r_i$$$, and $$$x_i$$$ will follow ($$$0 \\\\le l_i, r_i, x_i < 2^{20}$$$; $$$l_i \\\\le r_i$$$).Otherwise, if $$$t=4$$$, two integers $$$l_i$$$ and $$$r_i$$$ will follow ($$$0 \\\\le l_i \\\\le r_i < 2^{20}$$$).It is guaranteed that there is at least one query where $$$t=4$$$.OutputPrint the answer for each query where $$$t=4$$$.ExamplesInput5 6 5 4 3 2 1 1 2 3 2 4 2 5 3 2 5 3 4 1 6 2 1 1 8 4 8 10Output3 2 1Input6 7 6 0 2 3 2 7 1 0 4 3 2 6 8 4 4 0 7 3 2 5 3 1 0 1 2 4 0 3 4 2 7Output5 1 2NoteIn the first example:For the first query, $$$2$$$ is replaced by $$$2$$$AND$$$2 = 2$$$ and $$$3$$$ is replaced with $$$3$$$AND$$$2 = 2$$$. The set of numbers is $$$\\\\{1, 2, 4, 5\\\\}$$$.For the second query, there are $$$3$$$ distinct numbers between $$$2$$$ and $$$5$$$: $$$2$$$, $$$4$$$, and $$$5$$$.For the third query, $$$2$$$ is replaced by $$$2$$$XOR$$$3 = 1$$$, $$$4$$$ is replaced by $$$4$$$XOR$$$3 = 7$$$, and $$$5$$$ is replaced by $$$5$$$XOR$$$3 = 6$$$. The set of numbers is $$$\\\\{1, 6, 7\\\\}$$$.For the fourth query, there are $$$2$$$ distinct numbers between $$$1$$$ and $$$6$$$: $$$1$$$ and $$$6$$$.For the fifth query, $$$1$$$ is replaced by $$$1$$$OR$$$8 = 9$$$. The set of numbers is $$$\\\\{6, 7, 9\\\\}$$$.For the sixth query, there is one distinct number between $$$8$$$ and $$$10$$$: $$$9$$$.", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "69a8283b", "template_md5": "35d339e4", "result": "You are given an array of $n$ integers $a_1, a_2, ..., a_n$. You will perform $q$ queries. Each query is one of the following types:\n\n* **Type 1:** Replace all elements in the array $a_i$ where $l \\le a_i \\le r$ with $a_i$ AND $x$.\n* **Type 2:** Replace all elements in the array $a_i$ where $l \\le a_i \\le r$ with $a_i$ OR $x$.\n* **Type 3:** Replace all elements in the array $a_i$ where $l \\le a_i \\le r$ with $a_i$ XOR $x$.\n* **Type 4:** Count the number of distinct integers in the array $a_i$ where $l \\le a_i \\le r$.\n\nFor each query of type 4, output the count of distinct integers.\n\n**Input:**\n\n* The first line contains two integers $n$ and $q$ ($1 \\le n \\le 2 \\cdot 10^5$, $1 \\le q \\le 10^5$) - the number of integers and the number of queries.\n* The second line contains $n$ integers $a_1, a_2, ..., a_n$ ($0 \\le a_i < 2^{20}$) - the initial array.\n* The next $q$ lines contain the queries. Each query starts with an integer $t$ ($1 \\le t \\le 4$) indicating the type of query.\n    * If $t \\in \\{1, 2, 3\\}$, the next three integers are $l_i$, $r_i$, and $x_i$ ($0 \\le l_i, r_i, x_i < 2^{20}$, $l_i \\le r_i$).\n    * If $t = 4$, the next two integers are $l_i$ and $r_i$ ($0 \\le l_i \\le r_i < 2^{20}$).\n\n**Output:**\n\nFor each query of type 4, print the count of distinct integers."}, {"prompt_md5": "04f18908", "template_md5": "465699a0", "result": "You are given a list of numbers. You will be asked to perform several operations on the list. Each operation involves selecting a range of numbers in the list and applying a bitwise operation (AND, OR, or XOR) to each number in that range with a given value. After each operation, you need to count the number of unique numbers remaining in the list within the specified range."}]}