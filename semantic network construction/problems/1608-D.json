{"uid": "1608-D", "url": "https://codeforces.com/contest/1608/problem/D", "tags": ["combinatorics", " fft", " graphs", " math", " number theory"], "title": "1608-D", "statement": "D. Dominoestime limit per test1 secondmemory limit per test256 megabytesinputstandard inputoutputstandard outputYou are given $$$n$$$ dominoes. Each domino has a left and a right cell. Each cell can be colored either black or white. Some cells are already colored, while some aren't yet.The coloring is said to bevalidif and only if it is possible to rearrange the dominoes in some order such that for each $$$1 \\\\le i \\\\le n$$$ the color of the right cell of the $$$i$$$-th domino is different from the color of the left cell of the $$$((i \\\\bmod n)+1)$$$-st domino.Note that you can't rotate the dominoes, so the left cell always remains the left cell, and the right cell always remains the right cell.Count the number of valid ways to color the yet uncolored cells of dominoes. Two ways are considered different if there is a cell that is colored white in one way and black in the other. In particular, coloringsBWWBandWBBWdifferent (and both invalid).As this number can be very big, output it modulo $$$998\\\\,244\\\\,353$$$.InputThe first line of the input contains a single integer $$$n$$$ ($$$1 \\\\le n \\\\le 10^5$$$) — the number of dominoes.The next $$$n$$$ lines describe dominoes. Each line contains two characters which represent the left and the right cell. CharacterBmeans that the corresponding cell is black, characterWmeans that the corresponding cell is white, and?means that the cell is yet to be colored.OutputPrint a single integer — the answer to the problem.ExamplesInput1 ?WOutput1Input2 ?? W?Output2Input4 BB ?? W? ??Output10NoteIn the first test case, there is only one domino, and we need the color of its right cell to be different from the color of its left cell. There is only one way to achieve this.In the second test case, there are only $$$2$$$ such colorings:BBWWandWBWB.", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "c051123d", "template_md5": "35d339e4", "result": "You are given $n$ dominoes. Each domino has two sides, a left side and a right side. Each side can be colored black or white. Some sides are already colored, while others are not.\n\nA coloring is valid if you can arrange the dominoes in a way that for each domino $i$, the color of the right side of the $i$-th domino is different from the color of the left side of the $(i \\mod n) + 1$st domino.\n\nYou cannot rotate the dominoes.\n\nCount the number of valid ways to color the uncolored sides of the dominoes. Two colorings are different if there is at least one side that is colored white in one coloring and black in the other.\n\nThe answer may be very large, so output it modulo $998244353$."}, {"prompt_md5": "c7ac7ba6", "template_md5": "465699a0", "result": "You have a number of dominoes. Each domino has two sides, and each side can be either black or white. Some sides are already colored, and some are not.  You need to figure out how many ways you can color the uncolored sides so that the right side of each domino is a different color from the left side of the next domino."}]}