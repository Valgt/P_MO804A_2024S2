{"uid": "578-F", "url": "https://codeforces.com/contest/578/problem/F", "tags": ["matrices", " trees"], "title": "578-F", "statement": "F. Mirror Boxtime limit per test2 secondsmemory limit per test256 megabytesinputstandard inputoutputstandard outputYou are given a box full of mirrors. Box consists of grid of sizen×m. Each cell of the grid contains a mirror put in the shape of '\\\\' or '/' (45degree to the horizontal or vertical line). But mirrors in some cells have been destroyed. You want to put new mirrors into these grids so that the following two conditions are satisfied:If you put a light ray horizontally/vertically into the middle of any unit segment that is side of some border cell, the light will go out from the neighboring unit segment to the segment you put the ray in.each unit segment of the grid of the mirror box can be penetrated by at least one light ray horizontally/vertically put into the box according to the rules of the previous paragraphAfter you tried putting some mirrors, you find out that there are many ways of doing so. How many possible ways are there? The answer might be large, so please find the result modulo prime numberMOD.InputThe first line contains three integersn,m,MOD(1 ≤n,m≤ 100,3 ≤MOD≤ 109+ 7,MODis prime),m,nindicates the dimensions of a box andMODis the number to module the answer.The followingnlines each contains a string of lengthm. Each string contains only '/', '\\\\', '*', where '*' denotes that the mirror in that grid has been destroyed.It is guaranteed that the number of '*' is no more than200.OutputOutput the answer moduloMOD.ExamplesInput2 2 1000000007*//*Output1Input2 2 1000000007**\\\\\\\\Output1Input2 2 3****Output2NoteThe only way for sample 1 is shown on the left picture from the statement.The only way for sample 2 is shown on the right picture from the statement.For the third sample, there are5possibilities that are listed below:1.2.3.4.5.The answer is then module by3so the output should be2.", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "8ff2f5d1", "template_md5": "35d339e4", "result": "You are given a grid of size $n \\times m$ representing a box full of mirrors. Each cell in the grid can contain a mirror in the shape of '\\\\' or '/' (45 degrees to the horizontal or vertical line), or it can be empty ('*'). \n\nYou need to place mirrors in the empty cells so that the following conditions are met:\n\n1. If you shine a light ray horizontally or vertically into the middle of any edge of the grid, the light will reflect out to a neighboring cell.\n2. Every cell in the grid must be able to be hit by at least one light ray, either horizontally or vertically.\n\nFind the number of ways to place the mirrors that satisfy these conditions. The answer may be large, so find the result modulo a prime number $MOD$. \n\n\n\nInput:\n\n* The first line contains three integers: $n$, $m$, and $MOD$ ($1 \\le n, m \\le 100$, $3 \\le MOD \\le 10^9 + 7$, $MOD$ is prime).\n* The following $n$ lines each contain a string of length $m$. Each string contains only '/', '\\\\', or '*'.\n\nOutput:\n\n* Output the number of possible ways to place the mirrors modulo $MOD$."}, {"prompt_md5": "690f9f64", "template_md5": "465699a0", "result": "You have a grid of squares. Some squares have mirrors in them, represented by '/', '\\', and some are empty, represented by '*'.  You need to fill in the empty squares with mirrors so that light rays entering from the edges of the grid will bounce off the mirrors and exit through another edge.  How many different ways can you do this?  The answer should be the number of ways modulo a given prime number."}]}