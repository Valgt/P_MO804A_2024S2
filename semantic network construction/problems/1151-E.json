{"uid": "1151-E", "url": "https://codeforces.com/contest/1151/problem/E", "tags": ["combinatorics", " data structures", " dp", " math"], "title": "1151-E", "statement": "E. Number of Componentstime limit per test1 secondmemory limit per test256 megabytesinputstandard inputoutputstandard outputThe Kingdom of Kremland is a tree (a connected undirected graph without cycles) consisting of $$$n$$$ vertices. Each vertex $$$i$$$ has its own value $$$a_i$$$. All vertices are connected in series by edges. Formally, for every $$$1 \\\\leq i < n$$$ there is an edge between the vertices of $$$i$$$ and $$$i+1$$$.Denote the function $$$f(l, r)$$$, which takes two integers $$$l$$$ and $$$r$$$ ($$$l \\\\leq r$$$):We leave in the tree only vertices whose values ​​range from $$$l$$$ to $$$r$$$.The value of the function will be the number of connected components in the new graph.Your task is to calculate the following sum: $$$$$$\\\\sum_{l=1}^{n} \\\\sum_{r=l}^{n} f(l, r) $$$$$$InputThe first line contains a single integer $$$n$$$ ($$$1 \\\\leq n \\\\leq 10^5$$$) — the number of vertices in the tree.The second line contains $$$n$$$ integers $$$a_1, a_2, \\\\ldots, a_n$$$ ($$$1 \\\\leq a_i \\\\leq n$$$) — the values of the vertices.OutputPrint one number — the answer to the problem.ExamplesInput3 2 1 3Output7Input4 2 1 1 3Output11Input10 1 5 2 5 5 3 10 6 5 1Output104NoteIn the first example, the function values ​​will be as follows:$$$f(1, 1)=1$$$ (there is only a vertex with the number $$$2$$$, which forms one component)$$$f(1, 2)=1$$$ (there are vertices $$$1$$$ and $$$2$$$ that form one component)$$$f(1, 3)=1$$$ (all vertices remain, one component is obtained)$$$f(2, 2)=1$$$ (only vertex number $$$1$$$)$$$f(2, 3)=2$$$ (there are vertices $$$1$$$ and $$$3$$$ that form two components)$$$f(3, 3)=1$$$ (only vertex $$$3$$$)Totally out $$$7$$$.In the second example, the function values ​​will be as follows:$$$f(1, 1)=1$$$$$$f(1, 2)=1$$$$$$f(1, 3)=1$$$$$$f(1, 4)=1$$$$$$f(2, 2)=1$$$$$$f(2, 3)=2$$$$$$f(2, 4)=2$$$$$$f(3, 3)=1$$$$$$f(3, 4)=1$$$$$$f(4, 4)=0$$$ (there is no vertex left, so the number of components is $$$0$$$)Totally out $$$11$$$.", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "b6e3a58b", "template_md5": "35d339e4", "result": "You are given a tree with $n$ vertices, where each vertex has a value $a_i$ ($1 \\le a_i \\le n$).  \n\nFor any two integers $l$ and $r$ ($l \\le r$), consider the tree after removing all vertices whose values are not between $l$ and $r$ (inclusive).  \n\nThe function $f(l, r)$ represents the number of connected components in the remaining tree.\n\nCalculate the following sum:\n\n$$\\sum_{l=1}^{n} \\sum_{r=l}^{n} f(l, r)$$ \n\nIn other words, you need to sum up the number of connected components for all possible ranges of values from $l$ to $r$."}, {"prompt_md5": "8da8b95a", "template_md5": "465699a0", "result": "You are given a list of numbers.  Calculate the sum of the number of groups you can make from the list by choosing a starting and ending point, where each group contains only numbers within that range."}]}