{"uid": "712-E", "url": "https://codeforces.com/contest/712/problem/E", "tags": ["data structures", " math", " probabilities"], "title": "712-E", "statement": "E. Memory and Casinostime limit per test4 secondsmemory limit per test512 megabytesinputstandard inputoutputstandard outputThere arencasinos lined in a row. If Memory plays at casinoi, he has probabilitypito win and move to the casino on the right (i+ 1) or exit the row (ifi=n), and a probability1 -pito lose and move to the casino on the left (i- 1) or also exit the row (ifi= 1).We say that Memorydominateson the intervali...jif he completes a walk such that,He starts on casinoi.He never looses in casinoi.He finishes his walk by winning in casinoj.Note that Memory can still walk left of the1-st casino and right of the casinonand that always finishes the process.Now Memory has some requests, in one of the following forms:1iab: Set.2lr: Print the probability that Memory willdominateon the intervall...r, i.e. compute the probability that Memory will first leave the segmentl...rafter winning at casinor, if she starts in casinol.It is guaranteed that at any moment of timepis anon-decreasing sequence, i.e.pi≤pi+ 1for allifrom1ton- 1.Please help Memory by answering all his requests!InputThe first line of the input contains two integersnandq(1 ≤n,q≤ 100 000),  — number of casinos and number of requests respectively.The nextnlines each contain integersaiandbi(1 ≤ai<bi≤ 109)  —is the probabilitypiof winning in casinoi.The nextqlines each contain queries of one of the types specified above (1 ≤a<b≤ 109,1 ≤i≤n,1 ≤l≤r≤n).It's guaranteed that there will be at least one query of type2, i.e. the output will be non-empty. Additionally, it is guaranteed thatpforms a non-decreasing sequence at all times.OutputPrint a real number for every request of type2— the probability that boy will \"dominate\" on that interval. Your answer will be considered correct if its absolute error does not exceed10- 4.Namely: let's assume that one of your answers isa, and the corresponding answer of the jury isb. The checker program will consider your answer correct if|a-b| ≤ 10- 4.ExampleInput3 131 31 22 32 1 12 1 22 1 32 2 22 2 32 3 31 2 2 32 1 12 1 22 1 32 2 22 2 32 3 3Output0.33333333330.20000000000.16666666670.50000000000.40000000000.66666666670.33333333330.25000000000.22222222220.66666666670.57142857140.6666666667", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "e5822e7f", "template_md5": "35d339e4", "result": "There are $n$ casinos lined up in a row.  For each casino $i$, there is a probability $p_i$ of winning and moving to the next casino ($i+1$) or exiting the row (if $i=n$), and a probability $1-p_i$ of losing and moving to the previous casino ($i-1$) or exiting the row (if $i=1$).\n\nWe say that a player \"dominates\" on the interval $i...j$ if they:\n\n* Start at casino $i$.\n* Never lose at casino $i$.\n* Finish their walk by winning at casino $j$.\n\nThe player can still walk left of the 1st casino and right of the $n$th casino and still finish the process.\n\nThe player has $q$ requests, which can be of two types:\n\n* **Type 1:** $1 i a b$: Set the probability of winning at casino $i$ to $a$ and the probability of winning at casino $j$ to $b$.\n* **Type 2:** $2 l r$: Calculate the probability that the player will \"dominate\" on the interval $l...r$, starting at casino $l$.\n\nIt is guaranteed that the probabilities $p_i$ form a non-decreasing sequence at all times.\n\n**Input:**\n\n* The first line contains two integers $n$ and $q$ ($1 \\le n, q \\le 100,000$), the number of casinos and the number of requests, respectively.\n* The next $n$ lines each contain two integers $a_i$ and $b_i$ ($1 \\le a_i < b_i \\le 10^9$), representing the probabilities $p_i$.\n* The next $q$ lines each contain a request of one of the specified types.\n\n**Output:**\n\n* For each request of type 2, print the probability that the player will \"dominate\" on the given interval. The answer should be accurate to within an absolute error of $10^{-4}$."}, {"prompt_md5": "4d451bb9", "template_md5": "465699a0", "result": "There are 'n' locations.  At each location, there's a chance to move to the next location or the previous location.  You want to find the probability of starting at a location and successfully moving through a specific range of locations, always winning at each location until you reach the end of the range. \n\n\nYou are given the win probabilities for each location."}]}