{"uid": "1575-I", "url": "https://codeforces.com/contest/1575/problem/I", "tags": ["data structures", " trees"], "title": "1575-I", "statement": "I. Illusions of the Deserttime limit per test3 secondsmemory limit per test512 megabytesinputstandard inputoutputstandard outputChanek Jones is back, helping his long-lost relative Indiana Jones, to find a secret treasure in a maze buried below a desert full of illusions.The map of the labyrinth forms a tree with $$$n$$$ rooms numbered from $$$1$$$ to $$$n$$$ and $$$n - 1$$$ tunnels connecting them such that it is possible to travel between each pair of rooms through several tunnels.The $$$i$$$-th room ($$$1 \\\\leq i \\\\leq n$$$) has $$$a_i$$$ illusion rate. To go from the $$$x$$$-th room to the $$$y$$$-th room, there must exist a tunnel between $$$x$$$ and $$$y$$$, and it takes $$$\\\\max(|a_x + a_y|, |a_x - a_y|)$$$ energy. $$$|z|$$$ denotes the absolute value of $$$z$$$.To prevent grave robbers, the maze can change the illusion rate of any room in it. Chanek and Indiana would ask $$$q$$$ queries.There are two types of queries to be done:$$$1\\\\ u\\\\ c$$$ — The illusion rate of the $$$x$$$-th room is changed to $$$c$$$ ($$$1 \\\\leq u \\\\leq n$$$, $$$0 \\\\leq |c| \\\\leq 10^9$$$).$$$2\\\\ u\\\\ v$$$ — Chanek and Indiana ask you the minimum sum of energy needed to take the secret treasure at room $$$v$$$ if they are initially at room $$$u$$$ ($$$1 \\\\leq u, v \\\\leq n$$$).Help them, so you can get a portion of the treasure!InputThe first line contains two integers $$$n$$$ and $$$q$$$ ($$$2 \\\\leq n \\\\leq 10^5$$$, $$$1 \\\\leq q \\\\leq 10^5$$$) — the number of rooms in the maze and the number of queries.The second line contains $$$n$$$ integers $$$a_1, a_2, \\\\ldots, a_n$$$ ($$$0 \\\\leq |a_i| \\\\leq 10^9$$$) — inital illusion rate of each room.The $$$i$$$-th of the next $$$n-1$$$ lines contains two integers $$$s_i$$$ and $$$t_i$$$ ($$$1 \\\\leq s_i, t_i \\\\leq n$$$), meaning there is a tunnel connecting $$$s_i$$$-th room and $$$t_i$$$-th room. The given edges form a tree.The next $$$q$$$ lines contain the query as described. The given queries are valid.OutputFor each type $$$2$$$ query, output a line containing an integer — the minimum sum of energy needed for Chanek and Indiana to take the secret treasure.ExampleInput6 4 10 -9 2 -1 4 -6 1 5 5 4 5 6 6 2 6 3 2 1 2 1 1 -3 2 1 2 2 3 3Output39 32 0NoteIn the first query, their movement from the $$$1$$$-st to the $$$2$$$-nd room is as follows.$$$1 \\\\rightarrow 5$$$ — takes $$$\\\\max(|10 + 4|, |10 - 4|) = 14$$$ energy.$$$5 \\\\rightarrow 6$$$ — takes $$$\\\\max(|4 + (-6)|, |4 - (-6)|) = 10$$$ energy.$$$6 \\\\rightarrow 2$$$ — takes $$$\\\\max(|-6 + (-9)|, |-6 - (-9)|) = 15$$$ energy.In total, it takes $$$39$$$ energy.In the second query, the illusion rate of the $$$1$$$-st room changes from $$$10$$$ to $$$-3$$$.In the third query, their movement from the $$$1$$$-st to the $$$2$$$-nd room is as follows.$$$1 \\\\rightarrow 5$$$ — takes $$$\\\\max(|-3 + 4|, |-3 - 4|) = 7$$$ energy.$$$5 \\\\rightarrow 6$$$ — takes $$$\\\\max(|4 + (-6)|, |4 - (-6)|) = 10$$$ energy.$$$6 \\\\rightarrow 2$$$ — takes $$$\\\\max(|-6 + (-9)|, |-6 - (-9)|) = 15$$$ energy.Now, it takes $$$32$$$ energy.", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "2fdafc9f", "template_md5": "35d339e4", "result": "You are given a tree with $n$ nodes, each node having an integer value $a_i$ associated with it. There are $n-1$ edges connecting the nodes.  \n\nTo travel from node $x$ to node $y$ along an edge, you need to expend energy equal to  $\\max(|a_x + a_y|, |a_x - a_y|)$.\n\nYou are given $q$ queries.\n\n* **Query Type 1:** Change the value of node $u$ to $c$.\n* **Query Type 2:** Find the minimum energy required to travel from node $u$ to node $v$.\n\n**Input:**\n\n* The first line contains two integers $n$ and $q$.\n* The second line contains $n$ integers $a_1, a_2, ..., a_n$.\n* The next $n-1$ lines each contain two integers $s_i$ and $t_i$, representing an edge between nodes $s_i$ and $t_i$.\n* The next $q$ lines contain the queries.\n\n**Output:**\n\nFor each query of type 2, output the minimum energy required."}, {"prompt_md5": "93b68698", "template_md5": "465699a0", "result": "You are given a tree with $n$ nodes. Each node has a value.  You can travel between nodes along edges, and the cost of traveling between two nodes is the maximum of the absolute difference and sum of their values.  You are given $q$ queries. Some queries change the value of a node, and some queries ask for the minimum cost to travel from one node to another."}]}