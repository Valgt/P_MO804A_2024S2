{"uid": "1740-H", "url": "https://codeforces.com/contest/1740/problem/H", "tags": ["data structures", " trees"], "title": "1740-H", "statement": "H. MEX Tree Manipulationtime limit per test5 secondsmemory limit per test512 megabytesinputstandard inputoutputstandard outputGiven a rooted tree, define the value of vertex $$$u$$$ in the tree recursively as the MEX$$$^\\\\dagger$$$ of thevalues of its children. Note that it is only the children, not all of its descendants. In particular, the value of a leaf is $$$0$$$.Pak Chanek has a rooted tree that initially only contains a single vertex with index $$$1$$$, which is the root. Pak Chanek is going to do $$$q$$$ queries. In the $$$i$$$-th query, Pak Chanek is given an integer $$$x_i$$$. Pak Chanek needs to add a new vertex with index $$$i+1$$$ as the child of vertex $$$x_i$$$. After adding the new vertex, Pak Chanek needs to recalculate the values of all vertices and report the sum of the values of all vertices in the current tree.$$$^\\\\dagger$$$ The MEX (minimum excluded) of an array is the smallest non-negative integer that does not belong to the array. For example, the MEX of $$$[0,1,1,2,6,7]$$$ is $$$3$$$ and the MEX of $$$[6,9]$$$ is $$$0$$$.InputThe first line contains a single integer $$$q$$$ ($$$1 \\\\le q \\\\le 3 \\\\cdot 10^5$$$) — the number of operations.Each of the next $$$q$$$ lines contains a single integer $$$x_i$$$ ($$$1 \\\\leq x_i \\\\leq i$$$) — the description of the $$$i$$$-th query.OutputFor each query, print a line containing an integer representing the sum of the new values of all vertices in the tree after adding the vertex.ExamplesInput7 1 1 3 2 5 2 1Output1 1 3 2 4 4 7Input8 1 1 1 1 5 6 7 8Output1 1 1 1 3 2 4 3NoteIn the first example, the tree after the $$$6$$$-th query will look like this.Vertex $$$7$$$ is a leaf, so its value is $$$0$$$.Vertex $$$6$$$ is a leaf, so its value is $$$0$$$.Vertex $$$5$$$ only has a child with value $$$0$$$, so its value is $$$1$$$.Vertex $$$4$$$ is a leaf, so its value is $$$0$$$.Vertex $$$3$$$ only has a child with value $$$0$$$, so its value is $$$1$$$.Vertex $$$2$$$ has children with values $$$0$$$ and $$$1$$$, so its value is $$$2$$$.Vertex $$$1$$$ has children with values $$$1$$$ and $$$2$$$, so its value is $$$0$$$.The sum of the values of all vertices is $$$0+0+1+0+1+2+0=4$$$.", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "a123cd8e", "template_md5": "35d339e4", "result": "You are given a rooted tree initially containing only a single vertex (vertex 1).  \n\nFor each of $q$ queries, you will be given an integer $x_i$. You must:\n\n1. Add a new vertex with index $i+1$ as a child of vertex $x_i$.\n2. Calculate the value of each vertex in the tree recursively. The value of a leaf vertex is 0. The value of a non-leaf vertex is the MEX (minimum excluded) of the values of its children.\n3. Report the sum of the values of all vertices in the tree.\n\n**MEX:** The MEX of an array is the smallest non-negative integer that does not appear in the array. For example, the MEX of $[0,1,1,2,6,7]$ is 3. \n\n\n\nLet me know if you'd like me to clarify any part of the problem!"}, {"prompt_md5": "bcffd231", "template_md5": "465699a0", "result": "You are given a tree with one initial node.  You will be given a series of operations, each adding a new node as a child of an existing node. After each operation, calculate the value of each node in the tree based on the values of its direct children (a leaf node has a value of 0). The value of a node is the smallest non-negative integer not present in the set of values of its children. After each operation, print the sum of the values of all nodes in the tree."}]}