{"uid": "869-D", "url": "https://codeforces.com/contest/869/problem/D", "tags": ["brute force", " dfs and similar", " graphs"], "title": "869-D", "statement": "D. The Overdosing Ubiquitytime limit per test1 secondmemory limit per test256 megabytesinputstandard inputoutputstandard outputThe fundamental prerequisite for justice is not to be correct, but to be strong. That's why justice is always the victor.The Cinderswarm Bee. Koyomi knows it.The bees, according to their nature, live in a tree. To be more specific, acomplete binary treewithnnodes numbered from1ton. The node numbered1is the root, and the parent of thei-th (2 ≤i≤n) node is. Note that, however, all edges in the tree are undirected.Koyomi addsmextra undirected edges to the tree, creating more complication to trick the bees. And you're here to count the number ofsimple pathsin the resulting graph, modulo109+ 7. Asimple pathis an alternating sequence of adjacent nodes and undirected edges, which begins and ends with nodes and does not contain any node more than once. Do note that a single node is also considered a validsimple pathunder this definition. Please refer to the examples and notes below for instances.InputThe first line of input contains two space-separated integersnandm(1 ≤n≤ 109,0 ≤m≤ 4) — the number of nodes in the tree and the number of extra edges respectively.The followingmlines each contains two space-separated integersuandv(1 ≤u,v≤n,u≠v) — describing an undirected extra edge whose endpoints areuandv.Note that there may be multiple edges between nodes in the resulting graph.OutputOutput one integer — the number ofsimple pathsin the resulting graph, modulo109+ 7.ExamplesInput3 0Output9Input3 12 3Output15Input2 41 22 11 22 1Output12NoteIn the first example, the paths are:(1);(2);(3);(1, 2);(2, 1);(1, 3);(3, 1);(2, 1, 3);(3, 1, 2). (For the sake of clarity, the edges between nodes are omitted since there are no multiple edges in this case.)In the second example, the paths are:(1);(1, 2);(1, 2, 3);(1, 3);(1, 3, 2); and similarly for paths starting with2and3. (5 × 3 = 15paths in total.)In the third example, the paths are:(1);(2); any undirected edge connecting the two nodes travelled in either direction. (2 + 5 × 2 = 12paths in total.)", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "3a6a2900", "template_md5": "35d339e4", "result": "You are given a complete binary tree with $n$ nodes numbered from 1 to $n$.  You are also given $m$ extra undirected edges that connect nodes in the tree.  \n\nFind the number of simple paths in the resulting graph, modulo $10^9 + 7$. A simple path is a sequence of nodes and edges that:\n\n* Starts and ends at distinct nodes.\n* Uses each node exactly once.\n* Uses only undirected edges.\n\nA single node is also considered a simple path. \n\n\n\n**Input:**\n\n* The first line contains two integers, $n$ and $m$ ($1 \\le n \\le 10^9$, $0 \\le m \\le 4$), representing the number of nodes and the number of extra edges, respectively.\n* The next $m$ lines each contain two integers, $u$ and $v$ ($1 \\le u, v \\le n$, $u \\neq v$), representing an extra edge between nodes $u$ and $v$.\n\n**Output:**\n\n* Output a single integer representing the number of simple paths in the resulting graph, modulo $10^9 + 7$."}, {"prompt_md5": "5666068a", "template_md5": "465699a0", "result": "You are given a tree with a certain number of nodes. You then add a few extra edges to the tree.  Count the number of unique paths you can take through the resulting graph, where a path is a sequence of connected nodes.  The number of paths should be calculated modulo 10^9 + 7."}]}