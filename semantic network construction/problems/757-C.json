{"uid": "757-C", "url": "https://codeforces.com/contest/757/problem/C", "tags": ["data structures", " hashing", " sortings", " strings"], "title": "757-C", "statement": "C. Felicity is Coming!time limit per test2 secondsmemory limit per test256 megabytesinputstandard inputoutputstandard outputIt's that time of the year, Felicity is around the corner and you can see people celebrating all around the Himalayan region. The Himalayan region hasngyms. Thei-th gym hasgiPokemon in it. There aremdistinct Pokemon types in the Himalayan region numbered from1tom. There is a special evolution camp set up in the fest which claims to evolve any Pokemon. The type of a Pokemon could change after evolving, subject to the constraint that if two Pokemon have the same type before evolving, they will have the same type after evolving. Also, if two Pokemon have different types before evolving, they will have different types after evolving. It is also possible that a Pokemon has the same type before and after evolving.Formally, anevolution planis a permutationfof{1, 2, ...,m}, such thatf(x) =ymeans that a Pokemon of typexevolves into a Pokemon of typey.The gym leaders are intrigued by the special evolution camp and all of them plan to evolve their Pokemons. The protocol of the mountain states that in each gym, for every type of Pokemon, the number of Pokemon of that type before evolving any Pokemon should be equal the number of Pokemon of that type after evolving all the Pokemons according to the evolution plan. They now want to find out how many distinctevolution plansexist which satisfy the protocol.Two evolution plansf1andf2are distinct, if they have at least one Pokemon type evolving into a different Pokemon type in the two plans, i. e. there exists anisuch thatf1(i) ≠f2(i).Your task is to find how many distinctevolution plansare possible such that if all Pokemon in all the gyms are evolved, the number of Pokemon of each type in each of the gyms remains the same. As the answer can be large, output it modulo109+ 7.InputThe first line contains two integersnandm(1 ≤n≤ 105,1 ≤m≤ 106) — the number of gyms and the number of Pokemon types.The nextnlines contain the description of Pokemons in the gyms. Thei-th of these lines begins with the integergi(1 ≤gi≤ 105) — the number of Pokemon in thei-th gym. After thatgiintegers follow, denoting types of the Pokemons in thei-th gym. Each of these integers is between1andm.The total number of Pokemons (the sum of allgi) does not exceed5·105.OutputOutput the number of valid evolution plans modulo109+ 7.ExamplesInput2 32 1 22 2 3Output1Input1 33 1 2 3Output6Input2 42 1 23 2 3 4Output2Input2 23 2 2 12 1 2Output1Input3 72 1 22 3 43 5 6 7Output24NoteIn the first case, the only possible evolution plan is:In the second case, any permutation of(1,  2,  3)is valid.In the third case, there are two possible plans:In the fourth case, the only possible evolution plan is:", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "19cd1618", "template_md5": "35d339e4", "result": "There are $n$ gyms, each with $g_i$ Pokemon. Each Pokemon has a type from 1 to $m$.  \n\nThere is a special evolution camp that can change the type of each Pokemon. The evolution camp works as follows:\n\n*  If two Pokemon have the same type before evolving, they will have the same type after evolving.\n*  If two Pokemon have different types before evolving, they will have different types after evolving.\n\nThe goal is to find the number of ways to define an evolution plan (a permutation of the numbers 1 to $m$) such that after all Pokemon are evolved, the number of Pokemon of each type in each gym remains the same.\n\nThe answer should be output modulo $10^9 + 7$."}, {"prompt_md5": "c3a0cdf4", "template_md5": "465699a0", "result": "You are given a number of groups, each containing a number of items of different types. You need to find how many ways you can reassign types to the items in each group so that the number of items of each type remains the same in each group after the reassignment."}]}