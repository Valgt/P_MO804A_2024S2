{"uid": "1665-D", "url": "https://codeforces.com/contest/1665/problem/D", "tags": ["bitmasks", " chinese remainder theorem", " constructive algorithms", " games", " interactive", " math", " number theory"], "title": "1665-D", "statement": "D. GCD Guesstime limit per test3 secondsmemory limit per test256 megabytesinputstandard inputoutputstandard outputThis is an interactive problem.There is a positive integer $$$1 \\\\le x \\\\le 10^9$$$ that you have to guess.In one query you can choose two positive integers $$$a \\\\neq b$$$. As an answer to this query you will get $$$\\\\gcd(x + a, x + b)$$$, where $$$\\\\gcd(n, m)$$$ is thegreatest common divisorof the numbers $$$n$$$ and $$$m$$$.To guess one hidden number $$$x$$$ you are allowed to make no more than $$$30$$$ queries.InputThe first line of input contains a single integer $$$t$$$ ($$$1 \\\\le t \\\\le 1000$$$) denoting the number of test cases.The integer $$$x$$$ that you have to guess satisfies the constraints: ($$$1 \\\\le x \\\\le 10^9$$$).InteractionThe hidden number $$$x$$$ is fixed before the start of the interaction and does not depend on your queries.To guess each $$$x$$$ you can make no more than $$$30$$$ queries in the following way:\"? a b\" ($$$1 \\\\le a, b \\\\le 2 \\\\cdot 10^9$$$, $$$a \\\\neq b$$$).For this query you will get $$$\\\\gcd(x + a, x + b)$$$.When you know $$$x$$$, print a single line in the following format.\"! x\" ($$$1 \\\\le x \\\\le 10^9$$$).After that continue to solve the next test case.If you ask more than $$$30$$$ queries for one $$$x$$$ or make an invalid query, the interactor will terminate immediately and your program will receive verdictWrong Answer.After printing each query do not forget to output end of line and flush the output buffer. Otherwise, you will get theIdleness limit exceededverdict. To do flush use:fflush(stdout)orcout.flush()in C++;System.out.flush()in Java;flush(output)in Pascal;stdout.flush()in Python;Read documentation for other languages.HacksTo use hacks, use the following format of tests:The first line should contain a single integer $$$t$$$ ($$$1 \\\\le t \\\\le 1000$$$) — the number of test cases.The first and only line of each test case should contain a single integer $$$x$$$ ($$$1 \\\\le x \\\\le 10^9$$$) denoting the integer $$$x$$$ that should be guessed.ExampleInput2  1  8   1Output? 1 2  ? 12 4  ! 4 ? 2000000000 1999999999  ! 1000000000NoteThe first hidden number is $$$4$$$, that's why the answers for the queries are:\"? 1 2\" — $$$\\\\gcd(4 + 1, 4 + 2) = \\\\gcd(5, 6) = 1$$$.\"? 12 4\" — $$$\\\\gcd(4 + 12, 4 + 4) = \\\\gcd(16, 8) = 8$$$.The second hidden number is $$$10^9$$$, that's why the answer for the query is:\"? 2000000000 1999999999\" — $$$\\\\gcd(3 \\\\cdot 10^9, 3 \\\\cdot 10^9 - 1) = 1$$$.These queries are made only for understanding the interaction and are not enough for finding the true $$$x$$$.", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "ca517567", "template_md5": "35d339e4", "result": "You need to guess a secret number $x$ between 1 and $10^9$. You can ask up to 30 questions.  \n\nEach question consists of two different numbers $a$ and $b$ (both between 1 and $2 \\cdot 10^9$). The answer to each question is the greatest common divisor (GCD) of $(x + a)$ and $(x + b)$.\n\nFor example, if $x = 4$, then the answer to the question \"? 1 2\" would be 1 (because GCD(5, 6) = 1).\n\nOnce you think you know the secret number, you can type \"! x\" to submit your guess. \n\n\n\nLet me know if you'd like help with strategies for solving this problem!"}, {"prompt_md5": "02b78d4f", "template_md5": "465699a0", "result": "You need to guess a secret number between 1 and 1 billion. You can ask up to 30 questions. Each question involves giving two different numbers. The answer to each question is the greatest common divisor of the secret number plus your first number and the secret number plus your second number.  After asking questions, you need to guess the secret number."}]}