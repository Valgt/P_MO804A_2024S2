{"uid": "1140-F", "url": "https://codeforces.com/contest/1140/problem/F", "tags": ["data structures", " divide and conquer", " dsu"], "title": "1140-F", "statement": "F. Extending Set of Pointstime limit per test3.5 secondsmemory limit per test1024 megabytesinputstandard inputoutputstandard outputFor a given set of two-dimensional points $$$S$$$, let's denote its extension $$$E(S)$$$ as the result of the following algorithm:Create another set of two-dimensional points $$$R$$$, which is initially equal to $$$S$$$. Then, while there exist four numbers $$$x_1$$$, $$$y_1$$$, $$$x_2$$$ and $$$y_2$$$ such that $$$(x_1, y_1) \\\\in R$$$, $$$(x_1, y_2) \\\\in R$$$, $$$(x_2, y_1) \\\\in R$$$ and $$$(x_2, y_2) \\\\notin R$$$, add $$$(x_2, y_2)$$$ to $$$R$$$. When it is impossible to find such four integers, let $$$R$$$ be the result of the algorithm.Now for the problem itself. You are given a set of two-dimensional points $$$S$$$, which is initially empty. You have to process two types of queries: add some point to $$$S$$$, or remove some point from it. After each query you have to compute the size of $$$E(S)$$$.InputThe first line contains one integer $$$q$$$ ($$$1 \\\\le q \\\\le 3 \\\\cdot 10^5$$$) — the number of queries.Then $$$q$$$ lines follow, each containing two integers $$$x_i$$$, $$$y_i$$$ ($$$1 \\\\le x_i, y_i \\\\le 3 \\\\cdot 10^5$$$), denoting $$$i$$$-th query as follows: if $$$(x_i, y_i) \\\\in S$$$, erase it from $$$S$$$, otherwise insert $$$(x_i, y_i)$$$ into $$$S$$$.OutputPrint $$$q$$$ integers. $$$i$$$-th integer should be equal to the size of $$$E(S)$$$ after processing first $$$i$$$ queries.ExampleInput7 1 1 1 2 2 1 2 2 1 2 1 3 2 1Output1 2 4 4 4 6 3", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "f6163101", "template_md5": "35d339e4", "result": "You are given a set of points in a 2D plane. You can perform two types of operations:\n\n1. **Add a point:** Add a new point to the set.\n2. **Remove a point:** Remove an existing point from the set.\n\nAfter each operation, you need to calculate the size of the \"extension\" of the set. The extension of a set of points is found by repeatedly adding new points to the set based on the following rule:\n\n* If there are four points in the set  $(x_1, y_1)$, $(x_1, y_2)$, $(x_2, y_1)$, and $(x_2, y_2)$ where $(x_2, y_2)$ is not already in the set, then add the point $(x_2, y_2)$ to the set.\n\nThis process continues until no more points can be added according to the rule.\n\n**Input:**\n\n* The first line contains an integer  *q*  (1 ≤ *q* ≤ 3 * 10^5) representing the number of operations.\n* The following *q* lines each contain two integers *x<sub>i</sub>* and *y<sub>i</sub>* (1 ≤ *x<sub>i</sub>*, *y<sub>i</sub>* ≤ 3 * 10^5) representing an operation:\n    * If the point (*x<sub>i</sub>*, *y<sub>i</sub>*) is already in the set, remove it.\n    * Otherwise, add the point (*x<sub>i</sub>*, *y<sub>i</sub>*) to the set.\n\n**Output:**\n\nPrint *q* integers. The *i*-th integer should be the size of the extension of the set after processing the first *i* operations."}, {"prompt_md5": "9701f09c", "template_md5": "465699a0", "result": "You are given a set of points. You can add or remove points from the set. After each change, you need to find the size of a special set that is created based on the current set of points.  The special set is created by repeatedly adding points that form a rectangle with existing points in the set."}]}