{"uid": "1696-D", "url": "https://codeforces.com/contest/1696/problem/D", "tags": ["binary search", " constructive algorithms", " data structures", " divide and conquer", " greedy", " shortest paths"], "title": "1696-D", "statement": "D. Permutation Graphtime limit per test2 secondsmemory limit per test512 megabytesinputstandard inputoutputstandard outputA permutation is an array consisting of $$$n$$$ distinct integers from $$$1$$$ to $$$n$$$ in arbitrary order. For example, $$$[2,3,1,5,4]$$$ is a permutation, but $$$[1,2,2]$$$ is not a permutation ($$$2$$$ appears twice in the array) and $$$[1,3,4]$$$ is also not a permutation ($$$n=3$$$ but there is $$$4$$$ in the array).You are given a permutation of $$$1,2,\\\\dots,n$$$, $$$[a_1,a_2,\\\\dots,a_n]$$$. For integers $$$i$$$, $$$j$$$ such that $$$1\\\\le i<j\\\\le n$$$, define $$$\\\\operatorname{mn}(i,j)$$$ as $$$\\\\min\\\\limits_{k=i}^j a_k$$$, and define $$$\\\\operatorname{mx}(i,j)$$$ as $$$\\\\max\\\\limits_{k=i}^j a_k$$$.Let us build an undirected graph of $$$n$$$ vertices, numbered $$$1$$$ to $$$n$$$. For every pair of integers $$$1\\\\le i<j\\\\le n$$$, if $$$\\\\operatorname{mn}(i,j)=a_i$$$ and $$$\\\\operatorname{mx}(i,j)=a_j$$$ both holds, or $$$\\\\operatorname{mn}(i,j)=a_j$$$ and $$$\\\\operatorname{mx}(i,j)=a_i$$$ both holds, add an undirected edge of length $$$1$$$ between vertices $$$i$$$ and $$$j$$$.In this graph, find the length of the shortest path from vertex $$$1$$$ to vertex $$$n$$$. We can prove that $$$1$$$ and $$$n$$$ will always be connected via some path, so a shortest path always exists.InputEach test contains multiple test cases. The first line contains the number of test cases $$$t$$$ ($$$1 \\\\le t \\\\le 5\\\\cdot 10^4$$$). Description of the test cases follows.The first line of each test case contains one integer $$$n$$$ ($$$1\\\\le n\\\\le 2.5\\\\cdot 10^5$$$).The second line of each test case contains $$$n$$$ integers $$$a_1$$$, $$$a_2$$$, $$$\\\\ldots$$$, $$$a_n$$$ ($$$1\\\\le a_i\\\\le n$$$). It's guaranteed that $$$a$$$ is a permutation of $$$1$$$, $$$2$$$, $$$\\\\dots$$$, $$$n$$$.It is guaranteed that the sum of $$$n$$$ over all test cases does not exceed $$$5\\\\cdot 10^5$$$.OutputFor each test case, print a single line containing one integer â€” the length of the shortest path from $$$1$$$ to $$$n$$$.ExampleInput51121 251 4 2 3 552 1 5 3 4107 4 8 1 6 10 3 5 2 9Output0 1 1 4 6NoteThe following are illustrations of constructed graphs in example test cases.the constructed graph in test case 1the constructed graph in test case 2the constructed graph in test case 3the constructed graph in test case 4the constructed graph in test case 5", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "0de1ba9c", "template_md5": "465699a0", "result": "You are given a list of numbers.  For each pair of numbers in the list, if the smallest number in that pair is the first number and the largest number is the last, or vice versa, connect those two numbers with a line. Find the shortest path from the first number to the last number in this graph."}, {"prompt_md5": "6b5311a5", "template_md5": "35d339e4", "result": "You are given a permutation of numbers from 1 to $n$,  $[a_1, a_2, ..., a_n]$.\n\nFor any two numbers $i$ and $j$ where $1 \\le i < j \\le n$:\n\n*  $mn(i, j)$ is the smallest number from $a_i$ to $a_j$.\n*  $mx(i, j)$ is the largest number from $a_i$ to $a_j$.\n\nCreate a graph with $n$ vertices numbered 1 to $n$.  Connect vertices $i$ and $j$ with an edge of length 1 if either:\n\n* $mn(i, j) = a_i$ and $mx(i, j) = a_j$ \n* $mn(i, j) = a_j$ and $mx(i, j) = a_i$\n\nFind the shortest path from vertex 1 to vertex $n$ in this graph. \n\n\n\nInput:\n\n* The first line contains the number of test cases, $t$.\n* For each test case:\n    * The first line contains the number of elements in the permutation, $n$.\n    * The second line contains the permutation $[a_1, a_2, ..., a_n]$.\n\nOutput:\n\n* For each test case, print the length of the shortest path from vertex 1 to vertex $n$."}]}