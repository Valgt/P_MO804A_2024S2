{"uid": "1851-E", "url": "https://codeforces.com/contest/1851/problem/E", "tags": ["dfs and similar", " dp", " graphs", " sortings"], "title": "1851-E", "statement": "E. Nastya and Potionstime limit per test3 secondsmemory limit per test256 megabytesinputstandard inputoutputstandard outputAlchemist Nastya loves mixing potions. There are a total of $$$n$$$ types of potions, and one potion of type $$$i$$$ can be bought for $$$c_i$$$ coins.Any kind of potions can be obtained in no more than one way, by mixing from several others. The potions used in the mixing process will beconsumed. Moreover, no potion can be obtained from itself through one or more mixing processes.As an experienced alchemist, Nastya has anunlimitedsupply of $$$k$$$ types of potions $$$p_1, p_2, \\\\dots, p_k$$$, but she doesn't know which one she wants to obtain next. To decide, she asks you to find, for each $$$1 \\\\le i \\\\le n$$$, the minimum number of coins she needs to spend to obtain a potion of type $$$i$$$ next.InputThe first line of each test contains an integer $$$t$$$ ($$$1 \\\\le t \\\\le 10^4$$$) — the number of test cases.Each test case is described as follows:The first line contains two integers $$$n$$$ and $$$k$$$ ($$$1 \\\\le k < n \\\\le 2 \\\\cdot 10^5$$$) — the total number of potion types and the number of potion types Nastya already has.The second line contains $$$n$$$ integers $$$c_1, c_2, \\\\dots, c_n$$$ ($$$1 \\\\le c_i \\\\le 10^9$$$) — the costs of buying the potions.The third line contains $$$k$$$ distinct integers $$$p_1, p_2, \\\\dots, p_k$$$ ($$$1 \\\\le p_i \\\\le n$$$) — the indices of potions Nastya already has anunlimitedsupply of.This is followed by $$$n$$$ lines describing ways to obtain potions by mixing.Each line starts with the integer $$$m_i$$$ ($$$0 \\\\le m_i < n$$$) — the number of potions required to mix a potion of the type $$$i$$$ ($$$1 \\\\le i \\\\le n$$$).Then line contains $$$m_i$$$ distinct integers $$$e_1, e_2, \\\\dots, e_{m_i}$$$ ($$$1 \\\\le e_j \\\\le n$$$, $$$e_j \\\\ne i$$$) — the indices of potions needed to mix a potion of the type $$$i$$$. If this list is empty, then a potion of the type $$$i$$$ can only be bought.It is guaranteed that no potion can be obtained from itself through one or more mixing processes.It is guaranteed that the sum of all $$$n$$$ values across all test cases does not exceed $$$2 \\\\cdot 10^5$$$. Similarly, it is guaranteed that the sum of all $$$m_i$$$ values across all test cases does not exceed $$$2 \\\\cdot 10^5$$$.OutputFor each test case, output $$$n$$$ integers — the minimum number of coins Nastya needs to spend to obtain a potion of each type.ExamplesInput45 130 8 3 5 1033 2 4 5002 3 503 25 143 31 31 202 1 25 15 4 1 3 422 4 53 3 5 42 1 41 504 21 1 5 42 43 2 4 302 2 41 2Output23 8 0 5 10  0 143 0  5 0 1 3 4  0 0 0 0Input36 35 5 4 5 2 23 4 52 2 51 53 4 1 64 2 6 1 5006 21 4 4 1 5 23 64 6 3 4 54 6 5 3 401 51 602 14 3101 1Output0 0 0 0 0 2  0 0 0 0 0 0  0 0NoteIn the first test case of the first sample, it is optimal:Get a potion of the first type by buying and mixing $$$2$$$, $$$4$$$ and $$$5$$$;a potion of the second type can only be obtained by purchasing it;Nastya already has an unlimited number of potions of the third type;a potion of the fourth type is more profitable to buy than to buy and mix other potions;a potion of the fifth type can only be obtained by purchasing it.", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "80a2e3f9", "template_md5": "35d339e4", "result": "There are $n$ types of potions. Each type $i$ can be bought for $c_i$ coins. Some potions can be made by mixing other potions.  You are given $k$ types of potions that are available in unlimited supply ($p_1, p_2, ..., p_k$).\n\nFor each type of potion $i$, determine the minimum number of coins needed to obtain it, considering that you can mix potions.\n\n**Input:**\n\n* $t$: the number of test cases\n* For each test case:\n    * $n$: the number of potion types\n    * $k$: the number of available potion types\n    * $c_1, c_2, ..., c_n$: the cost of buying each potion type\n    * $p_1, p_2, ..., p_k$: the indices of available potion types\n    * $m_i$: the number of potions needed to mix potion type $i$\n    * $e_1, e_2, ..., e_{m_i}$: the indices of potions needed to mix potion type $i$\n\n**Output:**\n\n* For each test case, output $n$ integers representing the minimum coins needed for each potion type."}, {"prompt_md5": "36be4ac4", "template_md5": "465699a0", "result": "You are given a list of items and their prices. Some items can be crafted by combining other items.  You are also given a list of items you already have unlimited access to. Find the cheapest way to obtain each item."}]}