{"uid": "1237-F", "url": "https://codeforces.com/contest/1237/problem/F", "tags": ["combinatorics", " dp"], "title": "1237-F", "statement": "F. Balanced Domino Placementstime limit per test2 secondsmemory limit per test512 megabytesinputstandard inputoutputstandard outputConsider a square grid with $$$h$$$ rows and $$$w$$$ columns with some dominoes on it. Each domino covers exactly two cells of the grid that share a common side. Every cell is covered by at most one domino.Let's call a placement of dominoes on the gridperfectly balancedif no row and no column contains a pair of cells covered by two different dominoes. In other words, every row and column may contain no covered cells, one covered cell, or two covered cells that belong to the same domino.You are given a perfectly balanced placement of dominoes on a grid. Find the number of ways to place zero or more extra dominoes on this grid to keep the placement perfectly balanced. Output this number modulo $$$998\\\\,244\\\\,353$$$.InputThe first line contains three integers $$$h$$$, $$$w$$$, and $$$n$$$ ($$$1 \\\\le h, w \\\\le 3600$$$; $$$0 \\\\le n \\\\le 2400$$$), denoting the dimensions of the grid and the number of already placed dominoes. The rows are numbered from $$$1$$$ to $$$h$$$, and the columns are numbered from $$$1$$$ to $$$w$$$.Each of the next $$$n$$$ lines contains four integers $$$r_{i, 1}, c_{i, 1}, r_{i, 2}, c_{i, 2}$$$ ($$$1 \\\\le r_{i, 1} \\\\le r_{i, 2} \\\\le h$$$; $$$1 \\\\le c_{i, 1} \\\\le c_{i, 2} \\\\le w$$$), denoting the row id and the column id of the cells covered by the $$$i$$$-th domino. Cells $$$(r_{i, 1}, c_{i, 1})$$$ and $$$(r_{i, 2}, c_{i, 2})$$$ are distinct and share a common side.The given domino placement is perfectly balanced.OutputOutput the number of ways to place zero or more extra dominoes on the grid to keep the placement perfectly balanced, modulo $$$998\\\\,244\\\\,353$$$.ExamplesInput5 7 2 3 1 3 2 4 4 4 5Output8Input5 4 2 1 2 2 2 4 3 4 4Output1Input23 42 0Output102848351NoteIn the first example, the initial grid looks like this:Here are $$$8$$$ ways to place zero or more extra dominoes to keep the placement perfectly balanced:In the second example, the initial grid looks like this:No extra dominoes can be placed here.", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "c9d9bd2e", "template_md5": "35d339e4", "result": "You are given a square grid of size $h \\times w$ with some dominoes already placed on it. Each domino covers two adjacent cells.  A placement of dominoes is considered \"perfectly balanced\" if no row or column has two cells covered by different dominoes.\n\nYour task is to find the number of ways to add more dominoes to the grid so that the placement remains perfectly balanced.  The answer should be given modulo 998244353.\n\nThe input will include:\n\n*  $h$, $w$, and $n$ - the dimensions of the grid and the number of existing dominoes.\n*  $n$ lines describing the placement of the existing dominoes, each line giving the row and column indices of the two cells covered by a domino.\n\n\n\nThe output should be the number of ways to add more dominoes, modulo 998244353."}, {"prompt_md5": "501320c1", "template_md5": "465699a0", "result": "You are given a grid with some dominoes placed on it in a specific way.  You need to find how many ways you can add more dominoes to the grid so that no row or column has two dominoes covering the same cell."}]}