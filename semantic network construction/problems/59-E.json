{"uid": "59-E", "url": "https://codeforces.com/contest/59/problem/E", "tags": ["graphs", " shortest paths"], "title": "59-E", "statement": "E. Shortest Pathtime limit per test3 secondsmemory limit per test256 megabytesinputstdinoutputstdoutIn Ancient Berland there werencities andmtwo-way roads of equal length. The cities are numbered with integers from1toninclusively. According to an ancient superstition, if a traveller visits three citiesai,bi,ciin row, without visiting other cities between them, a great disaster awaits him. Overall there areksuch city triplets. Each triplet is ordered, which means that, for example, you are allowed to visit the cities in the following order:ai,ci,bi. Vasya wants to get from the city1to the citynand not fulfil the superstition. Find out which minimal number of roads he should take. Also you are required to find one of his possible path routes.InputThe first line contains three integersn,m,k(2 ≤n≤ 3000, 1 ≤m≤ 20000, 0 ≤k≤ 105) which are the number of cities, the number of roads and the number of the forbidden triplets correspondingly.Then followmlines each containing two integersxi,yi(1 ≤xi,yi≤n) which are the road descriptions. The road is described by the numbers of the cities it joins. No road joins a city with itself, there cannot be more than one road between a pair of cities.Then followklines each containing three integersai,bi,ci(1 ≤ai,bi,ci≤n) which are the forbidden triplets. Each ordered triplet is listed mo more than one time. All three cities in each triplet are distinct.Cityncan be unreachable from city1by roads.OutputIf there are no path from1tonprint-1. Otherwise on the first line print the number of roadsdalong the shortest path from the city1to the cityn. On the second line printd+ 1numbers — any of the possible shortest paths for Vasya. The path should start in the city1and end in the cityn.ExamplesInput4 4 11 22 33 41 31 4 3Output21 3 4Input3 1 01 2Output-1Input4 4 21 22 33 41 31 2 31 3 4Output41 3 2 3 4", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "ddb9a53c", "template_md5": "35d339e4", "result": "There are $n$ cities and $m$ roads connecting them. Each road connects two cities.  There are $k$ forbidden triplets of cities.  \n\nYou are given a list of roads and a list of forbidden triplets.  Find the minimum number of roads needed to travel from city 1 to city $n$ without visiting any of the forbidden triplets. If it is impossible to travel from city 1 to city $n$ without visiting a forbidden triplet, output -1. If it is possible, output the minimum number of roads and one possible path."}, {"prompt_md5": "2e152962", "template_md5": "465699a0", "result": "You are given a graph with cities connected by roads. Some sets of three cities are forbidden to visit in sequence. Find the shortest path from city 1 to city n, avoiding the forbidden sets, and list one possible path. If no path exists, output -1."}]}