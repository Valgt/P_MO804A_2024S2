{"uid": "487-D", "url": "https://codeforces.com/contest/487/problem/D", "tags": ["data structures"], "title": "487-D", "statement": "D. Conveyor Beltstime limit per test3 secondsmemory limit per test256 megabytesinputstdinoutputstdoutAutomatic Bakery of Cyberland (ABC) recently bought ann×mrectangle table. To serve the diners, ABC placed seats around the table. The size of each seat is equal to a unit square, so there are2(n+m)seats in total.ABC placed conveyor belts on each unit square on the table. There are three types of conveyor belts: \"^\", \"<\" and \">\". A \"^\" belt can bring things upwards. \"<\" can bring leftwards and \">\" can bring rightwards.Let's number the rows with1tonfrom top to bottom, the columns with1tomfrom left to right. We consider the seats above and below the top of the table are rows0andn+ 1respectively. Also we define seats to the left of the table and to the right of the table to be column0andm+ 1. Due to the conveyor belts direction restriction there are currently no way for a diner sitting in the rown+ 1to be served.Given the initial table, there will beqevents in order. There are two types of events:\"Axy\" means, a piece of bread will appear at rowxand columny(we will denote such position as(x,y)). The bread will follow the conveyor belt, until arriving at a seat of a diner. It is possible that the bread gets stuck in an infinite loop. Your task is to simulate the process, and output the final position of the bread, or determine that there will be an infinite loop.\"Cxyc\" means that the type of the conveyor belt at(x,y)is changed toc.Queries are performed separately meaning that even if the bread got stuck in an infinite loop, it won't affect further queries.InputThe first line of input contains three integersn,mandq(1 ≤n≤ 105, 1 ≤m≤ 10, 1 ≤q≤ 105), separated by a space.Nextnlines, each line containsmcharacters, describing the table. The characters can only be one of \"<^>\".Nextqlines, each line describes an event. The format is \"C x y c\" or \"A x y\" (Consecutive elements are separated by a space). It's guaranteed that1 ≤x≤n, 1 ≤y≤m.cis a character from the set \"<^>\".There are at most10000queries of \"C\" type.OutputFor each event of type \"A\", output two integerstx,tyin a line, separated by a space, denoting the destination of(x,y)is(tx,ty).If there is an infinite loop, you should outputtx=ty=  - 1.ExamplesInput2 2 3>>^^A 2 1C 1 2 <A 2 1Output1 3-1 -1Input4 5 7><<^<^<^^>>>>^>>^>>^A 3 1A 2 2C 1 4 <A 3 1C 1 2 ^A 3 1A 2 2Output0 4-1 -1-1 -10 20 2NoteFor the first sample:If the bread goes from(2, 1), it will go out of the table at(1, 3).After changing the conveyor belt of(1, 2)to \"<\", when the bread goes from(2, 1)again, it will get stuck at \"><\", so output is( - 1,  - 1).", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "a8235454", "template_md5": "35d339e4", "result": "You are given a rectangular table of size $n \\times m$ with seats around it. Each seat is a unit square. There are conveyor belts on each unit square, which can move things upwards (\"^\"), leftwards (\"<\"), or rightwards (\">\").\n\nYou will be given a series of events:\n\n* **\"A x y\"**: A piece of bread appears at row $x$ and column $y$. The bread will follow the conveyor belts until it reaches a seat. It might get stuck in a loop.\n* **\"C x y c\"**: The conveyor belt at row $x$ and column $y$ is changed to type $c$ (where $c$ is \"<\", \"^\", or \">\").\n\nFor each \"A x y\" event, determine the final position of the bread (row and column) or output -1 -1 if it gets stuck in a loop. \n\nNote:\n\n*  Rows are numbered from 1 to $n$ and columns from 1 to $m$.\n*  The top row is row 1 and the bottom row is row $n$.\n*  The leftmost column is column 1 and the rightmost column is column $m$."}, {"prompt_md5": "fae19daa", "template_md5": "465699a0", "result": "A table has conveyor belts that move things in four directions: up, down, left, and right.  Items appear at different locations on the table and move along the conveyor belts until they reach a seat.  You need to determine the final location of each item, or if it gets stuck in a loop.  You can also change the direction of the conveyor belts."}]}