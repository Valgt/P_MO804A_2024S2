{"uid": "1017-G", "url": "https://codeforces.com/contest/1017/problem/G", "tags": ["data structures"], "title": "1017-G", "statement": "G. The Treetime limit per test3 secondsmemory limit per test256 megabytesinputstandard inputoutputstandard outputAbendsen assigned a mission to Juliana. In this mission, Juliana has a rooted tree with $$$n$$$ vertices. Vertex number $$$1$$$ is the root of this tree. Each vertex can be either black or white. At first, all vertices are white. Juliana is asked to process $$$q$$$ queries. Each query is one of three types:If vertex $$$v$$$ is white, mark it as black; otherwise, perform this operation on all direct sons of $$$v$$$ instead.Mark all vertices in the subtree of $$$v$$$ (including $$$v$$$) as white.Find the color of the $$$i$$$-th vertex.An example of operation \"1 1\" (corresponds to the first example test). The vertices $$$1$$$ and $$$2$$$ are already black, so the operation goes to their sons instead.Can you help Juliana to process all these queries?InputThe first line contains two integers $$$n$$$ and $$$q$$$ ($$$2\\\\leq n\\\\leq 10^5$$$, $$$1\\\\leq q\\\\leq 10^5$$$) — the number of vertices and the number of queries.The second line contains $$$n-1$$$ integers $$$p_2, p_3, \\\\ldots, p_n$$$ ($$$1\\\\leq p_i<i$$$), where $$$p_i$$$ means that there is an edge between vertices $$$i$$$ and $$$p_i$$$.Each of the next $$$q$$$ lines contains two integers $$$t_i$$$ and $$$v_i$$$ ($$$1\\\\leq t_i\\\\leq 3$$$, $$$1\\\\leq v_i\\\\leq n$$$) — the type of the $$$i$$$-th query and the vertex of the $$$i$$$-th query.It is guaranteed that the given graph is a tree.OutputFor each query of type $$$3$$$, print \"black\" if the vertex is black; otherwise, print \"white\".ExamplesInput8 101 2 1 2 5 4 51 23 23 11 11 13 53 73 42 23 5OutputblackwhiteblackwhiteblackwhiteInput8 111 1 2 3 3 6 61 11 11 33 23 43 63 72 31 63 73 6OutputblackwhiteblackwhitewhiteblackNoteThe first example is shown on the picture below.The second example is shown on the picture below.", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "abd9cb0e", "template_md5": "35d339e4", "result": "You are given a tree with $n$ vertices, numbered from 1 to $n$. Initially, all vertices are white. You need to process $q$ queries. Each query is one of the following types:\n\n1. If vertex $v$ is white, mark it as black; otherwise, perform this operation on all direct sons of $v$.\n2. Mark all vertices in the subtree of $v$ (including $v$) as white.\n3. Find the color (black or white) of the $i$-th vertex.\n\nInput:\n\n* The first line contains two integers $n$ and $q$ ($2 \\le n \\le 10^5$, $1 \\le q \\le 10^5$) — the number of vertices and the number of queries.\n* The second line contains $n-1$ integers $p_2, p_3, ..., p_n$ ($1 \\le p_i < i$) — representing the edges of the tree. $p_i$ means there is an edge between vertices $i$ and $p_i$.\n* Each of the next $q$ lines contains two integers $t_i$ and $v_i$ ($1 \\le t_i \\le 3$, $1 \\le v_i \\le n$) — the type of the $i$-th query and the vertex of the $i$-th query.\n\nOutput:\n\nFor each query of type 3, print \"black\" if the vertex is black; otherwise, print \"white\"."}, {"prompt_md5": "60fac77f", "template_md5": "465699a0", "result": "You are given a tree with a root. Each node can be either black or white. You need to process queries of three types:\n\n1. If a node is white, make it black and make all its direct children black.\n2. Make all nodes in the subtree rooted at a given node white.\n3. Determine the color (black or white) of a given node."}]}