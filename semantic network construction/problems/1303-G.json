{"uid": "1303-G", "url": "https://codeforces.com/contest/1303/problem/G", "tags": ["data structures", " divide and conquer", " geometry", " trees"], "title": "1303-G", "statement": "G. Sum of Prefix Sumstime limit per test6 secondsmemory limit per test512 megabytesinputstandard inputoutputstandard outputWe define thesum of prefix sumsof an array $$$[s_1, s_2, \\\\dots, s_k]$$$ as $$$s_1 + (s_1 + s_2) + (s_1 + s_2 + s_3) + \\\\dots + (s_1 + s_2 + \\\\dots + s_k)$$$.You are given a tree consisting of $$$n$$$ vertices. Each vertex $$$i$$$ has an integer $$$a_i$$$ written on it. We define the value of thesimplepath from vertex $$$u$$$ to vertex $$$v$$$ as follows: consider all vertices appearing on the path from $$$u$$$ to $$$v$$$, write down all the numbers written on these vertices in the order they appear on the path, and compute thesum of prefix sumsof the resulting sequence.Your task is to calculate the maximum value over all paths in the tree.InputThe first line contains one integer $$$n$$$ ($$$2 \\\\le n \\\\le 150000$$$) — the number of vertices in the tree.Then $$$n - 1$$$ lines follow, representing the edges of the tree. Each line contains two integers $$$u_i$$$ and $$$v_i$$$ ($$$1 \\\\le u_i, v_i \\\\le n$$$, $$$u_i \\\\ne v_i$$$), denoting an edge between vertices $$$u_i$$$ and $$$v_i$$$. It is guaranteed that these edges form a tree.The last line contains $$$n$$$ integers $$$a_1$$$, $$$a_2$$$, ..., $$$a_n$$$ ($$$1 \\\\le a_i \\\\le 10^6$$$).OutputPrint one integer — the maximum value over all paths in the tree.ExampleInput4 4 2 3 2 4 1 1 3 3 7Output36NoteThe best path in the first example is from vertex $$$3$$$ to vertex $$$1$$$. It gives the sequence $$$[3, 3, 7, 1]$$$, and the sum of prefix sums is $$$36$$$.", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "07600481", "template_md5": "35d339e4", "result": "You are given a tree with $n$ vertices, where each vertex has an integer value $a_i$ associated with it.  \n\nA path in the tree is defined as a sequence of vertices connecting two vertices. The value of a path is calculated as follows:\n\n1. List the values of all vertices on the path in the order they appear.\n2. Calculate the sum of prefix sums of this list.\n\nFor example, if the path is  [3, 3, 7, 1], the sum of prefix sums is: 3 + (3+3) + (3+3+7) + (3+3+7+1) = 3 + 6 + 13 + 14 = 36\n\nFind the maximum value of a path in the tree. \n\n\n\nInput:\n\n* The first line contains an integer $n$ (2 ≤ $n$ ≤ 150000), the number of vertices.\n* The next $n-1$ lines describe the edges of the tree, each line containing two integers $u_i$ and $v_i$ (1 ≤ $u_i$, $v_i$ ≤ $n$, $u_i$ ≠ $v_i$), representing an edge between vertices $u_i$ and $v_i$.\n* The last line contains $n$ integers $a_1$, $a_2$, ..., $a_n$ (1 ≤ $a_i$ ≤ 10⁶), the values associated with each vertex.\n\nOutput:\n\n* Print a single integer, the maximum value of a path in the tree."}, {"prompt_md5": "8aac0417", "template_md5": "465699a0", "result": "You are given a tree-like structure with numbered nodes, each containing a value.  Find the largest sum you can get by adding up the values along a path from one node to another, where the sum is calculated by adding up the prefix sums of the values along the path."}]}