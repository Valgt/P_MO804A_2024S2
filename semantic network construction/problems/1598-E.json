{"uid": "1598-E", "url": "https://codeforces.com/contest/1598/problem/E", "tags": ["brute force", " combinatorics", " data structures", " dfs and similar", " dp", " implementation", " math"], "title": "1598-E", "statement": "E. Staircasestime limit per test2 secondsmemory limit per test256 megabytesinputstandard inputoutputstandard outputYou are given a matrix, consisting of $$$n$$$ rows and $$$m$$$ columns. The rows are numbered top to bottom, the columns are numbered left to right.Each cell of the matrix can be either free or locked.Let's call a path in the matrixa staircaseif it:starts and ends in the free cell;visits only free cells;has one of the two following structures:the second cell is $$$1$$$ to the right from the first one, the third cell is $$$1$$$ to the bottom from the second one, the fourth cell is $$$1$$$ to the right from the third one, and so on;the second cell is $$$1$$$ to the bottom from the first one, the third cell is $$$1$$$ to the right from the second one, the fourth cell is $$$1$$$ to the bottom from the third one, and so on.In particular, a path, consisting of a single cell, is considered to be a staircase.Here are some examples of staircases:Initially all the cells of the matrix arefree.You have to process $$$q$$$ queries, each of them flips the state of a single cell. So, if a cell is currently free, it makes it locked, and if a cell is currently locked, it makes it free.Print the number of different staircases after each query. Two staircases are considered different if there exists such a cell that appears in one path and doesn't appear in the other path.InputThe first line contains three integers $$$n$$$, $$$m$$$ and $$$q$$$ ($$$1 \\\\le n, m \\\\le 1000$$$; $$$1 \\\\le q \\\\le 10^4$$$) — the sizes of the matrix and the number of queries.Each of the next $$$q$$$ lines contains two integers $$$x$$$ and $$$y$$$ ($$$1 \\\\le x \\\\le n$$$; $$$1 \\\\le y \\\\le m$$$) — the description of each query.OutputPrint $$$q$$$ integers — the $$$i$$$-th value should be equal to the number of different staircases after $$$i$$$ queries. Two staircases are considered different if there exists such a cell that appears in one path and doesn't appear in the other path.ExamplesInput2 2 8 1 1 1 1 1 1 2 2 1 1 1 2 2 1 1 1Output5 10 5 2 5 3 1 0Input3 4 10 1 4 1 2 2 3 1 2 2 3 3 2 1 3 3 4 1 3 3 1Output49 35 24 29 49 39 31 23 29 27Input1000 1000 2 239 634 239 634Output1332632508 1333333000", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "549fe583", "template_md5": "35d339e4", "result": "You are given a grid of $n \\times m$ cells. Each cell can be either free or locked. \n\nA \"staircase\" is a path of connected free cells that follows one of these patterns:\n\n*  Right, Down, Right, Down...\n*  Down, Right, Down, Right...\n\nA single cell is also considered a staircase.\n\nYou will be given $q$ queries. Each query changes the state (free to locked or locked to free) of a single cell in the grid.\n\nAfter each query, count the number of unique staircases in the grid. Two staircases are considered different if they use a different cell.\n\nOutput the count of unique staircases after each query."}, {"prompt_md5": "d6b4ebe3", "template_md5": "465699a0", "result": "You are given a grid of cells that can be either free or locked.  You perform a series of operations that toggle the state of individual cells. After each operation, count the number of unique \"staircase\" paths within the grid. A staircase path starts and ends at a free cell and moves only between free cells, following a specific alternating pattern of right and down movements."}]}