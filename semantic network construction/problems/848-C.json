{"uid": "848-C", "url": "https://codeforces.com/contest/848/problem/C", "tags": ["data structures", " divide and conquer"], "title": "848-C", "statement": "C. Goodbye Souvenirtime limit per test6 secondsmemory limit per test256 megabytesinputstandard inputoutputstandard outputI won't feel lonely, nor will I be sorrowful... not before everything is buried.A string ofnbeads is left as the message of leaving. The beads are numbered from1tonfrom left to right, each having a shape numbered by integers between1andninclusive. Some beads may have the same shapes.Thememoryof a shapexin a certain subsegment of beads, is defined to be the difference between the last position and the first position that shapexappears in the segment. Thememoryof a subsegment is the sum ofmemoriesover all shapes that occur in it.From time to time, shapes of beads change as well as thememories. Sometimes, the past secreted in subsegments are being recalled, and you are to find thememoryfor each of them.InputThe first line of input contains two space-separated integersnandm(1 ≤n,m≤ 100 000) — the number of beads in the string, and the total number of changes and queries, respectively.The second line containsnintegersa1,a2, ...,an(1 ≤ai≤n) — the initial shapes of beads1, 2, ...,n, respectively.The followingmlines each describes either a change in the beads or a query of subsegment. A line has one of the following formats:1 p x(1 ≤p≤n,1 ≤x≤n), meaning that the shape of thep-th bead is changed intox;2 l r(1 ≤l≤r≤n), denoting a query ofmemoryof the subsegment fromltor, inclusive.OutputFor each query, print one line with an integer — thememoryof the recalled subsegment.ExamplesInput7 61 2 3 1 3 2 12 3 72 1 31 7 21 3 22 1 62 5 7Output5071Input7 51 3 2 1 4 2 31 1 42 2 31 1 72 4 51 1 7Output00NoteThe initial string of beads has shapes(1, 2, 3, 1, 3, 2, 1).Consider the changes and queries in their order:2 3 7: thememoryof the subsegment[3, 7]is(7 - 4) + (6 - 6) + (5 - 3) = 5;2 1 3: thememoryof the subsegment[1, 3]is(1 - 1) + (2 - 2) + (3 - 3) = 0;1 7 2: the shape of the7-th bead changes into2. Beads now have shapes(1, 2, 3, 1, 3, 2, 2)respectively;1 3 2: the shape of the3-rd bead changes into2. Beads now have shapes(1, 2, 2, 1, 3, 2, 2)respectively;2 1 6: thememoryof the subsegment[1, 6]is(4 - 1) + (6 - 2) + (5 - 5) = 7;2 5 7: thememoryof the subsegment[5, 7]is(7 - 6) + (5 - 5) = 1.", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "2fae7ca5", "template_md5": "35d339e4", "result": "You are given a string of $n$ beads, each with a shape numbered from 1 to $n$.  The memory of a shape $x$ in a subsegment of beads is the difference between the last and first position that shape $x$ appears in the segment. The memory of a subsegment is the sum of the memories of all shapes that occur in it.\n\nYou are given $m$ operations. Each operation is either:\n\n* **Change:** Change the shape of the $p$-th bead to $x$.\n* **Query:** Find the memory of the subsegment from bead $l$ to bead $r$, inclusive.\n\nOutput the memory of each queried subsegment."}, {"prompt_md5": "3141219f", "template_md5": "465699a0", "result": "You are given a string of beads, each with a number.  You can change the number on a bead.  You need to calculate the \"memory\" of a given segment of beads. The memory of a segment is the sum of the differences between the last and first occurrence of each number in that segment."}]}