{"uid": "123-E", "url": "https://codeforces.com/contest/123/problem/E", "tags": ["dfs and similar", " dp", " probabilities", " trees"], "title": "123-E", "statement": "E. Mazetime limit per test1 secondmemory limit per test256 megabytesinputstdinoutputstdoutA maze is represented by a tree (an undirected graph, where exactly one way exists between each pair of vertices). In the maze the entrance vertex and the exit vertex are chosen with some probability. The exit from the maze is sought by Deep First Search. If there are several possible ways to move, the move is chosen equiprobably. Consider the following pseudo-code:DFS(x)if x == exit vertex thenfinish searchflag[x] <- TRUErandom shuffle the vertices' order in V(x) // here all permutations have equal probability to be chosenfor i <- 1 to length[V] doif flag[V[i]] = FALSE thencount++;DFS(y);count++;V(x)is the list vertices adjacent tox. Theflagarray is initially filled asFALSE.DFSinitially starts with a parameter of an entrance vertex. When thesearch is finished, variablecountwill contain the number of moves.Your task is to count the mathematical expectation of the number of moves one has to do to exit the maze.InputThe first line determines the number of vertices in the graphn(1 ≤n≤ 105). The nextn- 1lines contain pairs of integersaiandbi, which show the existence of an edge betweenaiandbivertices (1 ≤ai,bi≤n). It is guaranteed that the given graph is a tree.Nextnlines contain pairs of non-negative numbersxiandyi, which represent the probability of choosing thei-th vertex as an entrance and exit correspondingly. The probabilities to choose vertexias an entrance and an exit equalandcorrespondingly. The sum of allxiand the sum of allyiare positive and do not exceed106.OutputPrint the expectation of the number of moves. The absolute or relative error should not exceed10- 9.ExamplesInput21 20 11 0Output1.00000000000000000000Input31 21 31 00 20 3Output2.00000000000000000000Input71 21 32 42 53 63 71 11 11 11 11 11 11 1Output4.04081632653NoteIn the first sample the entrance vertex is always 1 and the exit vertex is always 2.In the second sample the entrance vertex is always 1 and the exit vertex with the probability of 2/5 will be 2 of with the probability if 3/5 will be 3. The mathematical expectations for the exit vertices 2 and 3 will be equal (symmetrical cases). During the first move one can go to the exit vertex with the probability of 0.5 or to go to a vertex that's not the exit vertex with the probability of 0.5. In the first case the number of moves equals 1, in the second one it equals 3. The total mathematical expectation is counted as2 / 5 × (1 × 0.5 + 3 × 0.5) + 3 / 5 × (1 × 0.5 + 3 × 0.5)", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "a2fc9eb3", "template_md5": "35d339e4", "result": "You are given a tree with $n$ vertices.  Each edge connects two vertices.  \n\nThere are probabilities $x_i$ and $y_i$ associated with each vertex $i$ representing the probability of it being chosen as the entrance and exit of the maze, respectively.\n\nYou start a Depth First Search (DFS) from the entrance vertex.  At each step, you randomly choose one of the unvisited adjacent vertices to move to.  The search continues until the exit vertex is reached.\n\nYour task is to calculate the expected number of moves required to exit the maze. \n\n\n\n**Input:**\n\n* The first line contains the number of vertices $n$.\n* The next $n-1$ lines each contain two integers $a_i$ and $b_i$ representing an edge between vertices $a_i$ and $b_i$.\n* The next $n$ lines each contain two non-negative numbers $x_i$ and $y_i$ representing the probabilities of vertex $i$ being the entrance and exit, respectively.\n\n**Output:**\n\nPrint the expected number of moves to exit the maze."}, {"prompt_md5": "cf38f35e", "template_md5": "465699a0", "result": "You have a tree-shaped maze.  There's a starting point and a randomly chosen ending point. You explore the maze by going down one branch at a time, always choosing a random unvisited branch if there are multiple options. What is the average number of steps it takes to reach the end?"}]}