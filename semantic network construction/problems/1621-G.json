{"uid": "1621-G", "url": "https://codeforces.com/contest/1621/problem/G", "tags": ["data structures", " dp", " math"], "title": "1621-G", "statement": "G. Weighted Increasing Subsequencestime limit per test1 secondmemory limit per test256 megabytesinputstandard inputoutputstandard outputYou are given the sequence of integers $$$a_1, a_2, \\\\ldots, a_n$$$ of length $$$n$$$.The sequence of indices $$$i_1 < i_2 < \\\\ldots < i_k$$$ of length $$$k$$$ denotes the subsequence $$$a_{i_1}, a_{i_2}, \\\\ldots, a_{i_k}$$$ of length $$$k$$$ of sequence $$$a$$$.The subsequence $$$a_{i_1}, a_{i_2}, \\\\ldots, a_{i_k}$$$ of length $$$k$$$ of sequence $$$a$$$ is called increasing subsequence if $$$a_{i_j} < a_{i_{j+1}}$$$ for each $$$1 \\\\leq j < k$$$.Theweightof the increasing subsequence $$$a_{i_1}, a_{i_2}, \\\\ldots, a_{i_k}$$$ of length $$$k$$$ of sequence $$$a$$$ is the number of $$$1 \\\\leq j \\\\leq k$$$, such that exists index $$$i_k < x \\\\leq n$$$ and $$$a_x > a_{i_j}$$$.For example, if $$$a = [6, 4, 8, 6, 5]$$$, then the sequence of indices $$$i = [2, 4]$$$ denotes increasing subsequence $$$[4, 6]$$$ of sequence $$$a$$$. The weight of this increasing subsequence is $$$1$$$, because for $$$j = 1$$$ exists $$$x = 5$$$ and $$$a_5 = 5 > a_{i_1} = 4$$$, but for $$$j = 2$$$ such $$$x$$$ doesn't exist.Find the sum of weights of all increasing subsequences of $$$a$$$ modulo $$$10^9+7$$$.InputThe first line contains a single integer $$$t$$$ ($$$1 \\\\leq t \\\\leq 1000$$$) — the number of test cases.The first line of each test case contains the single integer $$$n$$$ ($$$1 \\\\leq n \\\\leq 2 \\\\cdot 10^5$$$) — the length of the sequence $$$a$$$.The second line of each test case contains $$$n$$$ integers $$$a_1, a_2, \\\\ldots, a_n$$$ ($$$1 \\\\leq a_i \\\\leq 10^9$$$) — the sequence $$$a$$$.It is guaranteed that the sum of $$$n$$$ over all test cases doesn't exceed $$$2 \\\\cdot 10^5$$$.OutputFor each test case, print the sum of weights of all increasing subsequences $$$a$$$ modulo $$$10^9+7$$$.ExampleInput456 4 8 6 541 2 3 433 2 244 5 6 5Output4 12 0 6NoteIn the first test case the following increasing subsequences of $$$a$$$ have not zero weight:The weight of $$$[a_1] = [6]$$$ is $$$1$$$.The weight of $$$[a_2] = [4]$$$ is $$$1$$$.The weight of $$$[a_2, a_3] = [4, 8]$$$ is $$$1$$$.The weight of $$$[a_2, a_4] = [4, 6]$$$ is $$$1$$$.The sum of weights of increasing subsequences is $$$4$$$.In the second test case there are $$$7$$$ increasing subsequences of $$$a$$$ with not zero weight: $$$3$$$ with weight $$$1$$$, $$$3$$$ with weight $$$2$$$ and $$$1$$$ with weight $$$3$$$. The sum of weights is $$$12$$$.", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "69b9bdd1", "template_md5": "35d339e4", "result": "You are given a sequence of integers $a_1, a_2, ..., a_n$.  \n\nAn increasing subsequence is a sequence of numbers from the original sequence where each number is smaller than the next. For example, $[4, 6]$ is an increasing subsequence of $[6, 4, 8, 6, 5]$.\n\nThe weight of an increasing subsequence is the number of elements in the original sequence that are larger than each element in the subsequence.\n\nFind the sum of the weights of all increasing subsequences of the given sequence, modulo $10^9 + 7$."}, {"prompt_md5": "f374146f", "template_md5": "465699a0", "result": "You are given a list of numbers. Find the total weight of all increasing subsequences within the list. The weight of a subsequence is the number of elements in the original list that are larger than any element in the subsequence."}]}