{"uid": "1038-E", "url": "https://codeforces.com/contest/1038/problem/E", "tags": ["bitmasks", " brute force", " dfs and similar", " dp", " graphs"], "title": "1038-E", "statement": "E. Maximum Matchingtime limit per test2 secondsmemory limit per test256 megabytesinputstandard inputoutputstandard outputYou are given $$$n$$$ blocks, each of them is of the form[color$$$_1$$$|value|color$$$_2$$$], where the block can also be flipped to get[color$$$_2$$$|value|color$$$_1$$$].A sequence of blocks is calledvalidif the touching endpoints of neighboring blocks have the same color. For example, the sequence of three blocks A, B and C is valid if the left color of the B is the same as the right color of the A and the right color of the B is the same as the left color of C.The value of the sequence is defined as the sum of the values of the blocks in this sequence.Find the maximum possible value of the valid sequence that can be constructed from the subset of the given blocks. The blocks from the subset can be reordered and flipped if necessary. Each block can be used at most once in the sequence.InputThe first line of input contains a single integer $$$n$$$ ($$$1 \\\\le n \\\\le 100$$$) — the number of given blocks.Each of the following $$$n$$$ lines describes corresponding block and consists of $$$\\\\mathrm{color}_{1,i}$$$, $$$\\\\mathrm{value}_i$$$ and $$$\\\\mathrm{color}_{2,i}$$$ ($$$1 \\\\le \\\\mathrm{color}_{1,i}, \\\\mathrm{color}_{2,i} \\\\le 4$$$, $$$1 \\\\le \\\\mathrm{value}_i \\\\le 100\\\\,000$$$).OutputPrint exactly one integer — the maximum total value of the subset of blocks, which makes a valid sequence.ExamplesInput62 1 41 2 43 4 42 8 33 16 31 32 2Output63Input71 100000 11 100000 21 100000 24 50000 33 50000 44 50000 43 50000 3Output300000Input41 1000 12 500 23 250 34 125 4Output1000NoteIn the first example, it is possible to form a valid sequence from all blocks.One of the valid sequences is the following:[4|2|1][1|32|2][2|8|3][3|16|3][3|4|4][4|1|2]The first block from the input ([2|1|4]$$$\\\\to$$$[4|1|2]) and second ([1|2|4]$$$\\\\to$$$[4|2|1]) are flipped.In the second example, the optimal answers can be formed from the first three blocks as in the following (the second or the third block from the input is flipped):[2|100000|1][1|100000|1][1|100000|2]In the third example, it is not possible to form a valid sequence of two or more blocks, so the answer is a sequence consisting only of the first block since it is the block with the largest value.", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "5dc47ed8", "template_md5": "35d339e4", "result": "You are given $n$ blocks, where each block has three attributes:\n\n*  color 1\n*  value\n*  color 2\n\nA block can be flipped, changing the order of color 1 and color 2.\n\nA sequence of blocks is valid if the right color of one block matches the left color of the next block.\n\nThe value of a sequence is the sum of the values of all the blocks in the sequence.\n\nFind the maximum possible value of a valid sequence that can be created using some (or all) of the given blocks. Blocks can be reordered and flipped as needed. Each block can only be used once in a sequence. \n\n\nInput:\n\n* The first line contains an integer $n$ (1 ≤ $n$ ≤ 100), the number of blocks.\n* Each of the following $n$ lines describes a block with three space-separated values: color 1, value, color 2 (1 ≤ color 1, color 2 ≤ 4, 1 ≤ value ≤ 100,000).\n\nOutput:\n\n* Print a single integer, the maximum total value of a valid sequence."}, {"prompt_md5": "a0bb1213", "template_md5": "465699a0", "result": "You have a set of items, each with a color on two sides and a value.  You want to arrange the items in a line so that the colors match up at the edges.  The total value of the items in the line is the sum of their individual values. What is the highest total value you can achieve?"}]}