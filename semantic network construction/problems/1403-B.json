{"uid": "1403-B", "url": "https://codeforces.com/contest/1403/problem/B", "tags": ["*special", " data structures", " dfs and similar", " graphs", " trees"], "title": "1403-B", "statement": "B. Spring cleaningtime limit per test1 secondmemory limit per test256 megabytesinputstandard inputoutputstandard outputSpring cleanings are probably the most boring parts of our lives, except this year, when Flóra and her mother found a dusty old tree graph under the carpet.This tree has $$$N$$$ nodes (numbered from $$$1$$$ to $$$N$$$), connected by $$$N-1$$$ edges. The edges gathered too much dust, so Flóra's mom decided to clean them.Cleaning the edges of an arbitrary tree is done by repeating the following process:   She chooses 2 different leaves (a node is a leaf if it is connected to exactly one other node by an edge), and cleans every edge lying on the shortest path between them. If this path has $$$d$$$ edges, then the cost of cleaning this path is $$$d$$$.She doesn't want to harm the leaves of the tree, so she chooses every one of themat most once. A tree is cleaned when all of its edges are cleaned. The cost of this is the sum of costs for all cleaned paths.Flóra thinks the tree they found is too small and simple, so she imagines $$$Q$$$ variations of it. In the $$$i$$$-th variation, she adds a total of $$$D_i$$$ extra leaves to theoriginaltree: for each new leaf, she chooses a node from theoriginaltree, and connects that node with the new leaf by an edge. Note that some nodes may stop being leaves during this step.For all these $$$Q$$$ variations, we are interested in the minimum cost that is required to clean the tree.InputThe first line contains two space-separated integer, $$$N$$$ and $$$Q$$$ ($$$3 \\\\leq N \\\\leq 10^{5}$$$, $$$1 \\\\leq Q \\\\leq 10^{5}$$$) – the number of nodes the tree has and the number of variations.Each of the next $$$N-1$$$ lines contains two space-separated integers $$$u$$$ and $$$v$$$ denoting that nodes $$$u$$$ and $$$v$$$ are connected by an edge ($$$1 \\\\leq u, v \\\\leq N$$$).The next $$$Q$$$ lines describe the variations.  The first integer in the $$$i$$$th line is $$$D_i$$$ ($$$1 \\\\leq D_i \\\\leq 10^{5}$$$). Then $$$D_i$$$ space-separated integers follow: if the $$$j$$$th number is $$$a_j$$$, it means that Flóra adds a new leaf to node $$$a_j$$$ ($$$1 \\\\leq a_j \\\\leq N$$$). We may add more than one leaf to the same node. $$$\\\\sum_{1}^{Q} D_i \\\\leq 10^{5}$$$ i.e. the sum of $$$D_i$$$ in all varations is at most $$$10^5$$$.After each variation, Flóra restarts and adds extra leaves to theoriginaltree.OutputYou should print $$$Q$$$ lines. In the $$$i$$$-th line, print a single integer: the minimum cost required to clean the $$$i$$$-th variation of the tree. If the tree cannot be cleaned, print $$$-1$$$.Scoring$$$ \\\\begin{array}{|c|c|l|} \\\\hline \\\\text{Subtask} & \\\\text{Points} & \\\\text{Constraints} \\\\\\\\ \\\\hline 1 & 0 & \\\\text{samples}\\\\\\\\ \\\\hline 2 & 9 & Q = 1, \\\\text{there is an edge between node} \\\\: 1 \\\\: \\\\text{and} \\\\: i \\\\: \\\\text{for every} \\\\: i \\\\: (2 \\\\leq i \\\\leq N), \\\\\\\\ & & \\\\text{Flóra can't add extra leaf to node} \\\\: 1 \\\\\\\\ \\\\hline 3 & 9 & Q = 1, \\\\text{there is an edge between node} \\\\: i \\\\: \\\\text{and} \\\\: i+1 \\\\: \\\\text{for all} \\\\: (1 \\\\leq i < N), \\\\\\\\ & & \\\\text{Flóra can't add extra leaf to node} \\\\: 1 \\\\: \\\\text{nor node} \\\\: N \\\\\\\\ \\\\hline 4 & 16 & N \\\\leq 20000, Q \\\\leq 300\\\\\\\\ \\\\hline 5 & 19 & \\\\text{the original tree is a perfect binary tree rooted at node $$$1$$$} \\\\\\\\ & & \\\\text{(i.e. each internal node has exactly $$$2$$$ children, and every leaf} \\\\\\\\ & & \\\\text{has the same distance from the root)}\\\\\\\\ \\\\hline 6 & 17 & D_i = 1 \\\\: \\\\text{for all} \\\\: i\\\\\\\\ \\\\hline 7 & 30 & \\\\text{no additional constraints}\\\\\\\\ \\\\hline \\\\end{array} $$$ExampleInput7 3 1 2 2 4 4 5 5 6 5 7 3 4 1 4 2 2 4 1 1Output-1 10 8NoteThe following picture shows the second variation.  A possible solution is to clean the path between leaves $$$1 - 6$$$, $$$A - 7$$$ and $$$ B - 3$$$.You can download the above example and an additional (bigger) sample input here:https://gofile.io/d/8QlbsS", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "76722617", "template_md5": "35d339e4", "result": "You are given a tree with $N$ nodes ($3 \\leq N \\leq 10^5$) and $N-1$ edges.  \n\nYou need to find the minimum cost to clean the tree for $Q$ ($1 \\leq Q \\leq 10^5$) variations.\n\n**Cleaning:**\n\n*  Choose two leaves (nodes connected to only one other node).\n*  Clean all edges on the shortest path between the two leaves.\n*  The cost of cleaning a path is the number of edges in the path.\n\n**Variations:**\n\n* For each variation, you add $D_i$ ($1 \\leq D_i \\leq 10^5$) new leaves to the tree.\n* Each new leaf is connected to an existing node.\n\n**Input:**\n\n* The first line contains $N$ and $Q$.\n* The next $N-1$ lines describe the edges of the original tree.\n* Each of the next $Q$ lines describes a variation:\n    * The first number is $D_i$.\n    * The next $D_i$ numbers are the nodes to which new leaves are added.\n\n**Output:**\n\n* For each variation, print the minimum cost to clean the tree.\n* If the tree cannot be cleaned, print $-1$.\n\n\n\nLet me know if you'd like me to elaborate on any part of the problem!"}, {"prompt_md5": "b6d6495e", "template_md5": "465699a0", "result": "You are given a tree with a certain number of nodes.  You can add new leaves to the tree in different variations.  For each variation, find the minimum cost to clean all the edges in the tree. Cleaning an edge costs the number of edges on the shortest path between two leaves."}]}