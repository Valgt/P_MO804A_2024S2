{"uid": "2006-A", "url": "https://codeforces.com/contest/2006/problem/A", "tags": ["constructive algorithms", " dfs and similar", " games", " graphs", " greedy", " trees"], "title": "2006-A", "statement": "A. Iris and Game on the Treetime limit per test2 secondsmemory limit per test256 megabytesinputstandard inputoutputstandard outputIris has a tree rooted at vertex $$$1$$$. Each vertex has a value of $$$\\\\mathtt 0$$$ or $$$\\\\mathtt 1$$$.Let's consider a leaf of the tree (the vertex $$$1$$$ is never considered a leaf) and define itsweight. Construct a string formed by the values of the vertices on the path starting at the root and ending in this leaf. Then the weight of the leaf is the difference between the number of occurrences of $$$\\\\mathtt{10}$$$ and $$$\\\\mathtt{01}$$$ substrings in it.Take the following tree as an example. Green vertices have a value of $$$\\\\mathtt 1$$$ while white vertices have a value of $$$\\\\mathtt 0$$$.Let's calculate the weight of the leaf $$$5$$$: the formed string is $$$\\\\mathtt{10110}$$$. The number of occurrences of substring $$$\\\\mathtt{10}$$$ is $$$2$$$, the number of occurrences of substring $$$\\\\mathtt{01}$$$ is $$$1$$$, so the difference is $$$2 - 1 = 1$$$.Let's calculate the weight of the leaf $$$6$$$: the formed string is $$$\\\\mathtt{101}$$$. The number of occurrences of substring $$$\\\\mathtt{10}$$$ is $$$1$$$, the number of occurrences of substring $$$\\\\mathtt{01}$$$ is $$$1$$$, so the difference is $$$1 - 1 = 0$$$.Thescoreof a tree is defined as the number of leaves with non-zero weight in the tree.But the values of some vertices haven't been decided and will be given to you as $$$\\\\texttt{?}$$$. Filling the blanks would be so boring, so Iris is going to invite Dora to play a game. On each turn, one of the girls chooses any of the remaining vertices with value $$$\\\\texttt{?}$$$ and changes its value to $$$\\\\mathtt{0}$$$ or $$$\\\\mathtt{1}$$$,with Iris going first. The game continues until there are no vertices with value $$$\\\\mathtt{?}$$$ left in the tree. Iris aims to maximize the score of the tree, while Dora aims to minimize that.Assuming that both girls play optimally, please determine the final score of the tree.InputEach test consists of multiple test cases. The first line contains a single integer $$$t$$$ ($$$1 \\\\leq t \\\\leq 5\\\\cdot 10^4$$$) — the number of test cases. The description of the test cases follows.The first line of each test case contains a single integer $$$n$$$ ($$$2 \\\\leq n \\\\leq 10^5$$$) — the number of vertices in the tree.The following $$$n - 1$$$ lines each contain two integers $$$u$$$ and $$$v$$$ ($$$1 \\\\leq u, v \\\\leq n$$$) — denoting an edge between vertices $$$u$$$ and $$$v$$$.It's guaranteed that the given edges form a tree.The last line contains a string $$$s$$$ of length $$$n$$$. The $$$i$$$-th character of $$$s$$$ represents the value of vertex $$$i$$$. It's guaranteed that $$$s$$$ only contains characters $$$\\\\mathtt{0}$$$, $$$\\\\mathtt{1}$$$ and $$$\\\\mathtt{?}$$$.It is guaranteed that the sum of $$$n$$$ over all test cases doesn't exceed $$$2\\\\cdot 10^5$$$.OutputFor each test case, output a single integer — the final score of the tree.ExampleInput641 21 34 1010141 23 22 4???051 21 32 42 5?1?0161 22 33 45 33 6?0????51 21 31 41 511?1?22 1??Output2 1 1 2 1 0NoteIn the first test case, all the values of the vertices have been determined. There are three different paths from the root to a leaf:From vertex $$$1$$$ to vertex $$$2$$$. The string formed by the path is $$$\\\\mathtt{01}$$$, so the weight of the leaf is $$$0-1=-1$$$.From vertex $$$1$$$ to vertex $$$3$$$. The string formed by the path is $$$\\\\mathtt{00}$$$, so the weight of the leaf is $$$0-0=0$$$.From vertex $$$1$$$ to vertex $$$4$$$. The string formed by the path is $$$\\\\mathtt{01}$$$, so the weight of the leaf is $$$0-1=-1$$$.Thus, there are two leaves with non-zero weight, so the score of the tree is $$$2$$$.In the second test case, one of the sequences of optimal choices for the two players can be:Iris chooses to change the value of the vertex $$$3$$$ to $$$\\\\mathtt 1$$$.Dora chooses to change the value of the vertex $$$1$$$ to $$$\\\\mathtt 0$$$.Iris chooses to change the value of the vertex $$$2$$$ to $$$\\\\mathtt 0$$$.The final tree is as follows:The only leaf with non-zero weight is $$$3$$$, so the score of the tree is $$$1$$$. Note that this may not be the only sequence of optimal choices for Iris and Dora.", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "8209bc6b", "template_md5": "35d339e4", "result": "You are given a tree with $n$ vertices, where each vertex has a value of 0 or 1.  Some vertices may have a value of \"?\".\n\n* **Leaf Weight:** For each leaf (a vertex with no children), calculate its weight as the difference between the number of times the substring \"10\" appears in the path from the root to the leaf and the number of times the substring \"01\" appears in that path.\n\n* **Tree Score:** The score of the tree is the number of leaves with a non-zero weight.\n\nTwo players take turns changing the value of a \"?\" vertex to either 0 or 1. The first player goes first.  \n\nDetermine the final score of the tree assuming both players play optimally.\n\n**Input:**\n\n* $t$ test cases.\n* For each test case:\n    * $n$ (number of vertices)\n    * $n-1$ lines, each with two integers $u$ and $v$ representing an edge between vertices $u$ and $v$.\n    * A string $s$ of length $n$ representing the values of the vertices.  '?' represents an unknown value.\n\n**Output:**\n\nFor each test case, output the final score of the tree."}, {"prompt_md5": "45820a23", "template_md5": "465699a0", "result": "You are given a tree with nodes that can have values 0 or 1.  Some nodes have a question mark, meaning their value is unknown. Two players take turns assigning a 0 or 1 to a question mark node. The goal is to determine the final number of leaves in the tree that have a non-zero weight. The weight of a leaf is the difference between the number of times the substring \"10\" appears in the path from the root to the leaf and the number of times the substring \"01\" appears in that path."}]}