{"uid": "1784-C", "url": "https://codeforces.com/contest/1784/problem/C", "tags": ["data structures", " greedy"], "title": "1784-C", "statement": "C. Monsters (hard version)time limit per test4 secondsmemory limit per test512 megabytesinputstandard inputoutputstandard outputThis is the hard version of the problem. In this version, you need to find the answer for every prefix of the monster array.In a computer game, you are fighting against $$$n$$$ monsters. Monster number $$$i$$$ has $$$a_i$$$ health points, all $$$a_i$$$ are integers. A monster is alive while it has at least $$$1$$$ health point.You can cast spells of two types:Deal $$$1$$$ damage to any single alive monster of your choice.Deal $$$1$$$ damage to all alive monsters. If at least one monster dies (ends up with $$$0$$$ health points) as a result of this action, then repeat it (and keep repeating while at least one monster dies every time).Dealing $$$1$$$ damage to a monster reduces its health by $$$1$$$.Spells of type 1 can be cast any number of times, while a spell of type 2 can be cast at most once during the game.For every $$$k = 1, 2, \\\\ldots, n$$$, answer the following question. Suppose that only the first $$$k$$$ monsters, with numbers $$$1, 2, \\\\ldots, k$$$, are present in the game. What is the smallest number of times you need to cast spells of type 1 to kill all $$$k$$$ monsters?InputEach test contains multiple test cases. The first line contains the number of test cases $$$t$$$ ($$$1 \\\\le t \\\\le 10^4$$$). The description of the test cases follows.Each test case consists of two lines. The first line contains a single integer $$$n$$$ ($$$1 \\\\le n \\\\le 2 \\\\cdot 10^5$$$) — the number of monsters.The second line contains $$$n$$$ integers $$$a_1, a_2, \\\\ldots, a_n$$$ ($$$1 \\\\le a_i \\\\le n$$$) — monsters' health points.It is guaranteed that the sum of $$$n$$$ over all test cases does not exceed $$$2 \\\\cdot 10^5$$$.OutputFor each test case, print $$$n$$$ integers. The $$$k$$$-th of these integers must be equal to the smallest number of times you need to cast spells of type 1 to kill all $$$k$$$ monsters, if only monsters with numbers $$$1, 2, \\\\ldots, k$$$ are present in the game.ExampleInput233 1 264 1 5 4 1 1Output2 1 0 3 2 4 4 4 4NoteIn the first test case, for $$$k = n$$$, the initial health points of the monsters are $$$[3, 1, 2]$$$. It is enough to cast a spell of type 2:Monsters' health points change to $$$[2, 0, 1]$$$. Since monster number $$$2$$$ dies, the spell is repeated.Monsters' health points change to $$$[1, 0, 0]$$$. Since monster number $$$3$$$ dies, the spell is repeated.Monsters' health points change to $$$[0, 0, 0]$$$. Since monster number $$$1$$$ dies, the spell is repeated.Monsters' health points change to $$$[0, 0, 0]$$$.Since it is possible to use no spells of type 1 at all, the answer is $$$0$$$.In the second test case, for $$$k = n$$$, the initial health points of the monsters are $$$[4, 1, 5, 4, 1, 1]$$$. Here is one of the optimal action sequences:Using a spell of type 1, deal $$$1$$$ damage to monster number $$$1$$$. Monsters' health points change to $$$[3, 1, 5, 4, 1, 1]$$$.Using a spell of type 1, deal $$$1$$$ damage to monster number $$$4$$$. Monsters' health points change to $$$[3, 1, 5, 3, 1, 1]$$$.Using a spell of type 1, deal $$$1$$$ damage to monster number $$$4$$$ again. Monsters' health points change to $$$[3, 1, 5, 2, 1, 1]$$$.Use a spell of type 2:Monsters' health points change to $$$[2, 0, 4, 1, 0, 0]$$$. Since monsters number $$$2$$$, $$$5$$$, and $$$6$$$ die, the spell is repeated.Monsters' health points change to $$$[1, 0, 3, 0, 0, 0]$$$. Since monster number $$$4$$$ dies, the spell is repeated.Monsters' health points change to $$$[0, 0, 2, 0, 0, 0]$$$. Since monster number $$$1$$$ dies, the spell is repeated.Monsters' health points change to $$$[0, 0, 1, 0, 0, 0]$$$.Using a spell of type 1, deal $$$1$$$ damage to monster number $$$3$$$. Monsters' health points change to $$$[0, 0, 0, 0, 0, 0]$$$.Spells of type 1 are cast $$$4$$$ times in total. It can be shown that this is the smallest possible number.", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "fa2df5d1", "template_md5": "35d339e4", "result": "You are given an array of integers $a_1, a_2, ..., a_n$ representing the health points of $n$ monsters. You can use two types of spells:\n\n* **Spell 1:** Deal 1 damage to a single monster.\n* **Spell 2:** Deal 1 damage to all monsters. If at least one monster dies (health points reach 0) after this spell, you can repeat it.\n\nYou want to find the minimum number of Spell 1 casts required to kill all monsters for every possible prefix of the array (i.e., for $k = 1, 2, ..., n$).\n\n**Input:**\n\n* The first line contains the number of test cases $t$.\n* Each test case consists of two lines:\n    * The first line contains the number of monsters $n$.\n    * The second line contains the $n$ integers representing the monsters' health points $a_1, a_2, ..., a_n$.\n\n**Output:**\n\nFor each test case, print $n$ integers. The $k$-th integer represents the minimum number of Spell 1 casts needed to kill all monsters in the prefix $a_1, a_2, ..., a_k$."}, {"prompt_md5": "7d3cc561", "template_md5": "465699a0", "result": "You have a list of numbers representing the health of monsters. You can use two types of spells:\n\n1. Deal 1 damage to a single monster.\n2. Deal 1 damage to all monsters. If a monster dies from this spell, you can repeat it.\n\nFor each possible subset of monsters (from 1 to the full list), find the minimum number of type 1 spells needed to kill all monsters in that subset."}]}