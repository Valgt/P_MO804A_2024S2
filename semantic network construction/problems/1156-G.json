{"uid": "1156-G", "url": "https://codeforces.com/contest/1156/problem/G", "tags": ["graphs", " greedy", " hashing", " implementation"], "title": "1156-G", "statement": "G. Optimizertime limit per test1 secondmemory limit per test256 megabytesinputstandard inputoutputstandard outputLet's analyze a program written on some strange programming language. The variables in this language have names consisting of $$$1$$$ to $$$4$$$ characters, and each character is a lowercase or an uppercase Latin letter, or a digit. There is an extra constraint that the first character should not be a digit.There are four types of operations in the program, each denoted by one of the characters:$,^,#or&.Each line of the program has one of the following formats:<lvalue>=<rvalue>, where<lvalue>and<rvalue>are valid variable names;<lvalue>=<arg1><op><arg2>, where<lvalue>,<arg1>and<arg2>are valid variable names, and <op> is an operation character.The program is executed line-by-line, and the result of execution is stored in a variable having the nameres. Ifresis never assigned in the program, then the result will be equal to the value ofresbefore running the program.Two programs are called equivalent if no matter which operations do characters$,^,#and&denote (but, obviously, performing the same operation on the same arguments gives the same result) and which values do variables have before execution of program, the value ofresafter running the first program is equal to the value ofresafter running the second program (the programs are executed independently).You are given a program consisting of $$$n$$$ lines. Your task is to write a program consisting of minimum possible number of lines that is equivalent to the program you are given.InputThe first line contains one integer $$$n$$$ ($$$1 \\\\le n \\\\le 1000$$$) — the number of lines in the program.Then $$$n$$$ lines follow — the program itself. Each line corresponds to the format described in the statement and has no extra whitespaces.OutputIn the first line print $$$k$$$ — the minimum number of lines in the equivalent program.Then print $$$k$$$ lines without any whitespaces — an equivalent program having exactly $$$k$$$ lines, in the same format it is described in the statement.ExamplesInput4 c=aa#bb d12=c res=c^d12 tmp=aa$cOutput2 aaaa=aa#bb res=aaaa^aaaaInput2 max=aaaa$bbbb min=bbbb^aaaaOutput0", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "f5e423c6", "template_md5": "35d339e4", "result": "You are given a program with a set of instructions. Each instruction has a specific format:\n\n*  `variable = value`  (assigns a value to a variable)\n*  `variable = arg1 op arg2` (performs an operation on two variables and assigns the result to a variable)\n\nThe program uses four operations denoted by the characters $, ^, #, and &.  \n\nThe goal is to find the shortest possible equivalent program. Two programs are equivalent if they produce the same result regardless of the values of the variables before execution and the specific meaning of the operation characters.\n\n**Input:**\n\n* The first line contains an integer  $n$ ($1 \\le n \\le 1000$) representing the number of lines in the program.\n* The next $n$ lines contain the program instructions.\n\n**Output:**\n\n* The first line should contain an integer $k$ representing the minimum number of lines in an equivalent program.\n* The next $k$ lines should contain the equivalent program instructions."}, {"prompt_md5": "08f12190", "template_md5": "465699a0", "result": "You are given a program with a set of instructions.  Each instruction involves variables and operations.  \n\nYour task is to find the shortest possible equivalent program that achieves the same result as the original program."}]}