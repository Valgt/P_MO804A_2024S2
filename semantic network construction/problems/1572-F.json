{"uid": "1572-F", "url": "https://codeforces.com/contest/1572/problem/F", "tags": ["data structures"], "title": "1572-F", "statement": "F. Stationstime limit per test2.5 secondsmemory limit per test256 megabytesinputstandard inputoutputstandard outputThere are $$$n$$$ cities in a row numbered from $$$1$$$ to $$$n$$$.The cities will be building broadcasting stations. The station in the $$$i$$$-th city has height $$$h_i$$$ and range $$$w_i$$$. It can broadcast information to city $$$j$$$ if the following constraints are met:$$$i \\\\le j \\\\le w_i$$$, andfor each $$$k$$$ such that $$$i < k \\\\le j$$$, the following condition holds: $$$h_k < h_i$$$.In other words, the station in city $$$i$$$ can broadcast information to city $$$j$$$ if $$$j \\\\ge i$$$, $$$j$$$ is in the range of $$$i$$$-th station, and $$$i$$$ is strictly highest on the range from $$$i$$$ to $$$j$$$ (including city $$$j$$$).At the beginning, for every city $$$i$$$, $$$h_i = 0$$$ and $$$w_i = i$$$.Then $$$q$$$ events will take place. During $$$i$$$-th event one of the following will happen:City $$$c_i$$$ will rebuild its station so that its height will be strictly highest among all stations and $$$w_{c_i}$$$ will be set to $$$g_i$$$.Let $$$b_j$$$ be the number of stations that can broadcast information to city $$$j$$$. Print the sum of $$$b_j$$$ over all $$$j$$$ satisfying $$$l_i \\\\le j \\\\le r_i$$$.Your task is to react to all events and print answers to all queries.InputThe first line contains two integers $$$n$$$ and $$$q$$$ ($$$1 \\\\le n, q \\\\le 2\\\\cdot10^5$$$) — number of cities and number of events.Then $$$q$$$ lines follow. The $$$i$$$-th line begins with an integer $$$p_i$$$ ($$$p_i = 1$$$ or $$$p_i = 2$$$).If $$$p_i = 1$$$ a station will be rebuilt. Then two integers $$$c_i$$$ and $$$g_i$$$ ($$$1 \\\\le c_i \\\\le g_i \\\\le n$$$) follow — the city in which the station is rebuilt and its new broadcasting range.If $$$p_i = 2$$$ you are given a query. Then two integers $$$l_i$$$ and $$$r_i$$$ ($$$1 \\\\le l_i \\\\le r_i \\\\le n$$$) follow — the range of cities in the query.OutputFor each query, print in a single line the sum of $$$b_j$$$ over the given interval.ExamplesInput1 3 2 1 1 1 1 1 2 1 1Output1 1Input5 10 1 3 4 2 3 5 1 1 5 2 1 5 1 4 5 2 2 4 1 2 3 2 1 3 1 5 5 2 2 5Output4 10 5 4 5NoteIn the first test case, only station $$$1$$$ reaches city $$$1$$$ before and after it is rebuilt.In the second test case, after each rebuild, the array $$$b$$$ looks as follows:$$$[1, 1, 1, 2, 1]$$$;$$$[1, 2, 2, 3, 2]$$$;$$$[1, 2, 2, 1, 2]$$$;$$$[1, 1, 2, 1, 2]$$$;$$$[1, 1, 2, 1, 1]$$$.", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "e4b92d77", "template_md5": "35d339e4", "result": "There are $n$ cities numbered from 1 to $n$. Each city has a broadcasting station. Initially, each station has a height of 0 and a range of $i$ (meaning it can broadcast to cities from $i$ to $n$).\n\nThere are $q$ events. Each event can be one of two types:\n\n* **Rebuild:**  A station in city $c_i$ is rebuilt with a new height and range. The new height is the highest among all stations, and the new range is $g_i$.\n* **Query:** Find the sum of the number of stations that can broadcast to each city in the range from $l_i$ to $r_i$.\n\nA station can broadcast to city $j$ if:\n\n* $j$ is greater than or equal to the station's city.\n* $j$ is within the station's range.\n* The station's height is the highest among all stations between its city and $j$ (including $j$).\n\nFor each query, output the sum of the number of stations that can broadcast to each city in the given range."}, {"prompt_md5": "a79e9ee8", "template_md5": "465699a0", "result": "You have a line of cities. Each city has a station with a height and a range. A station can broadcast to cities within its range if it's the tallest station in that range.\n\nYou are given events that change the height and range of stations. You also have queries asking for the number of stations that can broadcast to a given set of cities. \n\nCalculate the answer for each query."}]}