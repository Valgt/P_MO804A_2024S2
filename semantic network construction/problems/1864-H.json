{"uid": "1864-H", "url": "https://codeforces.com/contest/1864/problem/H", "tags": ["dp", " math", " matrices"], "title": "1864-H", "statement": "H. Asterism Streamtime limit per test3 secondsmemory limit per test256 megabytesinputstandard inputoutputstandard outputBogocubic is playing a game with amenotiomoi. First, Bogocubic fixed an integer $$$n$$$, and then he gave amenotiomoi an integer $$$x$$$ which is initially equal to $$$1$$$.In one move amenotiomoi performsoneof the following operations with the same probability:increase $$$x$$$ by $$$1$$$;multiply $$$x$$$ by $$$2$$$.Bogocubic wants to find the expected number of moves amenotiomoi has to do to make $$$x$$$ greater than or equal to $$$n$$$. Help him find this number modulo $$$998\\\\,244\\\\,353$$$.Formally, let $$$M = 998\\\\,244\\\\,353$$$. It can be shown that the answer can be expressed as an irreducible fraction $$$\\\\frac{p}{q}$$$, where $$$p$$$ and $$$q$$$ are integers and $$$q \\\\not \\\\equiv 0 \\\\pmod{M}$$$. Output the integer equal to $$$p \\\\cdot q^{-1} \\\\bmod M$$$. In other words, output such an integer $$$y$$$ that $$$0 \\\\le y < M$$$ and $$$y \\\\cdot q \\\\equiv p \\\\pmod{M}$$$.InputEach test contains multiple test cases. The first line contains the number of test cases $$$t$$$ ($$$1 \\\\le t \\\\le 100$$$). The description of the test cases follows.The only line of each test case contains one integer $$$n$$$ ($$$1 \\\\le n \\\\le 10^{18}$$$).OutputFor each test case, output a single integer — the expected number of moves modulo $$$998\\\\,244\\\\,353$$$.ExampleInput714815998244353296574916252563317494288321850420024Output0 499122179 717488133 900515847 93715054 44488799 520723508NoteIn the first test case, $$$n\\\\le x$$$ without any operations, so the answer is $$$0$$$.In the second test case, for $$$n = 4$$$, here is the list of all possible sequences of operations and their probabilities:$$$1\\\\stackrel{+1}{\\\\longrightarrow}2\\\\stackrel{+1}{\\\\longrightarrow}3\\\\stackrel{+1}{\\\\longrightarrow}4$$$, the probability is $$$\\\\frac{1}{8}$$$;$$$1\\\\stackrel{\\\\times 2}{\\\\longrightarrow}2\\\\stackrel{+1}{\\\\longrightarrow}3\\\\stackrel{+1}{\\\\longrightarrow}4$$$, the probability is $$$\\\\frac{1}{8}$$$;$$$1\\\\stackrel{+1}{\\\\longrightarrow}2\\\\stackrel{+1}{\\\\longrightarrow}3\\\\stackrel{\\\\times 2}{\\\\longrightarrow}6$$$, the probability is $$$\\\\frac{1}{8}$$$;$$$1\\\\stackrel{\\\\times 2}{\\\\longrightarrow}2\\\\stackrel{+1}{\\\\longrightarrow}3\\\\stackrel{\\\\times 2}{\\\\longrightarrow}6$$$, the probability is $$$\\\\frac{1}{8}$$$;$$$1\\\\stackrel{+1}{\\\\longrightarrow}2\\\\stackrel{\\\\times 2}{\\\\longrightarrow}4$$$, the probability is $$$\\\\frac{1}{4}$$$;$$$1\\\\stackrel{\\\\times 2}{\\\\longrightarrow}2\\\\stackrel{\\\\times 2}{\\\\longrightarrow}4$$$, the probability is $$$\\\\frac{1}{4}$$$.So the expected number of moves is $$$4 \\\\cdot \\\\left(3 \\\\cdot \\\\frac{1}{8}\\\\right) + 2 \\\\cdot \\\\left(2 \\\\cdot \\\\frac{1}{4} \\\\right) =\\\\frac{5}{2} \\\\equiv 499122179 \\\\pmod{998244353}$$$.In the third test case, for $$$n = 8$$$, the expected number of moves is $$$\\\\frac{137}{32}\\\\equiv 717488133\\\\pmod{998244353}$$$.In the fourth test case, for $$$n = 15$$$, the expected number of moves is $$$\\\\frac{24977}{4096} \\\\equiv 900515847 \\\\pmod{998244353}$$$.", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "76eb5928", "template_md5": "35d339e4", "result": "You are given an integer $n$.  A game starts with a value $x = 1$.  In each turn, you can either increase $x$ by 1 or multiply $x$ by 2.  What is the expected number of turns it takes for $x$ to be greater than or equal to $n$, modulo 998244353? \n\nThe answer can be expressed as a fraction $p/q$, where $q$ is not divisible by 998244353. Output the integer $y$ such that $0 \\le y < 998244353$ and $y \\cdot q \\equiv p \\pmod{998244353}$."}, {"prompt_md5": "678c5e95", "template_md5": "465699a0", "result": "You start with a number equal to 1. You can either add 1 to the number or double it. What is the average number of times you need to do this before the number is greater than or equal to a given target number?  The answer should be a whole number."}]}