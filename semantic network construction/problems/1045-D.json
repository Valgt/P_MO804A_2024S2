{"uid": "1045-D", "url": "https://codeforces.com/contest/1045/problem/D", "tags": ["math", " probabilities", " trees"], "title": "1045-D", "statement": "D. Interstellar battletime limit per test1 secondmemory limit per test256 megabytesinputstandard inputoutputstandard outputIn the intergalactic empire Bubbledom there are $$$N$$$ planets, of which some pairs are directly connected by two-way wormholes. There are $$$N-1$$$ wormholes. The wormholes are of extreme religious importance in Bubbledom, a set of planets in Bubbledom consider themselves one intergalactic kingdom if and only if any two planets in the set can reach each other by traversing the wormholes. You are given that Bubbledom is one kingdom.In other words, the network of planets and wormholes is a tree.However, Bubbledom is facing a powerful enemy also possessing teleportation technology. The enemy attacks every night, and the government of Bubbledom retakes all the planets during the day. In a single attack, the enemy attacks every planet of Bubbledom at once, but some planets are more resilient than others. Planets are number $$$0,1,â€¦,N-1$$$ and the planet $$$i$$$ will fall with probability $$$p_i$$$. Before every night (including the very first one), the government reinforces or weakens the defenses of a single planet.The government of Bubbledom is interested in the following question: what is the expected number of intergalactic kingdoms Bubbledom will be split into, after a single enemy attack (before they get a chance to rebuild)?In other words, you need to print the expected number of connected components after every attack.InputThe first line contains one integer number $$$N$$$ ($$$1 \\\\le N \\\\le 10^5$$$) denoting the number of planets in Bubbledom (numbered from $$$0$$$ to $$$N-1$$$).The next line contains $$$N$$$ different real numbers in the interval $$$[0,1]$$$, specified with 2 digits after the decimal point, denoting the probabilities that the corresponding planet will fall.The next $$$N-1$$$ lines contain all the wormholes in Bubbledom, where a wormhole is specified by the two planets it connects.The next line contains a positive integer $$$Q$$$ ($$$1 \\\\le Q \\\\le 10^5$$$), denoting the number of enemy attacks.The next $$$Q$$$ lines each contain a non-negative integer and a real number from interval $$$[0,1]$$$, denoting the planet the government of Bubbledom decided to reinforce or weaken, along with the new probability that the planet will fall.OutputOutput contains $$$Q$$$ numbers, each of which represents the expected number of kingdoms that are left after each enemy attack. Your answers will be considered correct if their absolute or relative error does not exceed $$$10^{-4}$$$.ExampleInput50.50 0.29 0.49 0.95 0.832 30 33 42 134 0.661 0.690 0.36Output1.680401.484401.61740", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "e018983e", "template_md5": "35d339e4", "result": "There are $N$ planets connected by $N-1$ wormholes, forming a tree-like structure. Each planet has a probability $p_i$ of falling during an enemy attack.  \n\nBefore each attack, the government can choose a planet and change its fall probability. \n\nGiven the initial probabilities and the sequence of government actions, calculate the expected number of connected components (kingdoms) remaining after each attack."}, {"prompt_md5": "4b902e5d", "template_md5": "465699a0", "result": "You are given a tree with $N$ nodes. Each node has a probability of falling.  You are given $Q$ operations, each operation updates the probability of a specific node falling. After each operation, you need to find the expected number of connected components in the tree."}]}