{"uid": "793-E", "url": "https://codeforces.com/contest/793/problem/E", "tags": ["constructive algorithms", " dfs and similar", " dp", " trees"], "title": "793-E", "statement": "E. Problem of officestime limit per test2 secondsmemory limit per test256 megabytesinputstandard inputoutputstandard outputEarlier, when there was no Internet, each bank had a lot of offices all around Bankopolis, and it caused a lot of problems. Namely, each day the bank had to collect cash from all the offices.Once Oleg the bank client heard a dialogue of two cash collectors. Each day they traveled through all the departments and offices of the bank following the same route every day. The collectors started from the central department and moved between some departments or between some department and some office using special roads. Finally, they returned to the central department. The total number of departments and offices wasn, the total number of roads wasn- 1. In other words, the special roads system was a rooted tree in which the root was the central department, the leaves were offices, the internal vertices were departments. The collectors always followed the same route in which the number of roads was minimum possible, that is2n- 2.One of the collectors said that the number of offices they visited between their visits to officesaand thenb(in the given order) is equal to the number of offices they visited between their visits to officesband thena(in this order). The other collector said that the number of offices they visited between their visits to officescand thend(in this order) is equal to the number of offices they visited between their visits to officesdand thenc(in this order). The interesting part in this talk was that the shortest path (using special roads only) between any pair of offices amonga,b,canddpassed through the central department.Given the special roads map and the indexes of officesa,b,candd, determine if the situation described by the collectors was possible, or not.InputThe first line contains single integern(5 ≤n≤ 5000) — the total number of offices and departments. The departments and offices are numbered from1ton, the central office has index1.The second line contains four integersa,b,candd(2 ≤a,b,c,d≤n) — the indexes of the departments mentioned in collector's dialogue. It is guaranteed that these indexes are offices (i.e. leaves of the tree), not departments. It is guaranteed that the shortest path between any pair of these offices passes through the central department.On the third linen- 1integers follow:p2,p3, ...,pn(1 ≤pi<i), wherepidenotes that there is a special road between thei-th office or department and thepi-th department.Please note the joint enumeration of departments and offices.It is guaranteed that the given graph is a tree. The offices are the leaves, the departments are the internal vertices.OutputIf the situation described by the cash collectors was possible, print \"YES\". Otherwise, print \"NO\".ExamplesInput52 3 4 51 1 1 1OutputYESInput103 8 9 101 2 2 2 2 2 1 1 1OutputNOInput1313 12 9 71 1 1 1 5 5 2 2 2 3 3 4OutputYESNoteIn the first example the following collector's route was possible:. We can note that between their visits to officesaandbthe collectors visited the same number of offices as between visits to officesbanda; the same holds forcandd(the collectors' route is infinite as they follow it each day).In the second example there is no route such that between their visits to officescanddthe collectors visited the same number of offices as between visits to officesdandc. Thus, there situation is impossible.In the third example one of the following routes is:.", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "7f832ffc", "template_md5": "35d339e4", "result": "You are given a tree with $n$ nodes, where $n$ is between 5 and 5000. The nodes are numbered from 1 to $n$.  Node 1 is the root of the tree.\n\nYou are also given four nodes $a$, $b$, $c$, and $d$, where each node is a leaf (a node with no children).\n\nThe problem asks if there exists a path through the tree that satisfies the following conditions:\n\n* The number of nodes visited between nodes $a$ and $b$ is the same as the number of nodes visited between nodes $b$ and $a$.\n* The number of nodes visited between nodes $c$ and $d$ is the same as the number of nodes visited between nodes $d$ and $c$.\n\nThe path must always go through the root node (node 1).\n\nInput:\n\n* The first line contains the number of nodes $n$.\n* The second line contains the four nodes $a$, $b$, $c$, and $d$.\n* The third line contains $n-1$ integers, where the $i$-th integer represents the parent of node $i$.\n\nOutput:\n\nPrint \"YES\" if the conditions are satisfied, otherwise print \"NO\"."}, {"prompt_md5": "cb4ca2ad", "template_md5": "465699a0", "result": "You are given a tree with a central node.  Some nodes are leaves representing offices.  You are given four offices. Determine if it is possible to travel through the tree in a way that the number of nodes visited between two pairs of offices is the same, regardless of the order."}]}