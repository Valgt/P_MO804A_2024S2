{"uid": "1628-F", "url": "https://codeforces.com/contest/1628/problem/F", "tags": ["binary search", " data structures", " geometry", " sortings"], "title": "1628-F", "statement": "F. Spaceship Crisis Managementtime limit per test8 secondsmemory limit per test256 megabytesinputstandard inputoutputstandard outputNASA (Norwegian Astronaut Stuff Association) is developing a new steering system for spaceships. But in its current state, it wouldn't be very safe if the spaceship would end up in a bunch of space junk. To make the steering system safe, they need to answer the following:Given the target position $$$t = (0, 0)$$$, a set of $$$n$$$ pieces of space junk $$$l$$$ described by line segments $$$l_i = ((a_{ix}, a_{iy}), (b_{ix}, b_{iy}))$$$, and a starting position $$$s = (s_x, s_y)$$$, is there a direction such that floating in that direction from the starting position would lead to the target position?When the spaceship hits a piece of space junk, what happens depends on the absolute difference in angle between the floating direction and the line segment, $$$\\\\theta$$$:If $$$\\\\theta < 45^{\\\\circ}$$$, the spaceship slides along the piece of space junk in the direction that minimizes the change in angle, and when the spaceship slides off the end of the space junk, it continues floating in the direction it came in (before hitting the space junk).If $$$\\\\theta \\\\ge 45^{\\\\circ}$$$, the spaceship stops, because there is too much friction to slide along the space junk.You are only given the set of pieces of space junk once, and the target position is always $$$(0, 0)$$$, but there are $$$q$$$ queries, each with a starting position $$$s_j = (s_{jx}, s_{jy})$$$.Answer the above question for each query.InputThe first line contains the the integer $$$n$$$ ($$$1 \\\\le n \\\\le 1500$$$).Then follows $$$n$$$ lines, the $$$i$$$-th of which containing the $$$4$$$ integers $$$a_{ix}$$$, $$$a_{iy}$$$, $$$b_{ix}$$$, and $$$b_{iy}$$$ ($$$|a_{ix}|, |a_{iy}|, |b_{ix}|, |b_{iy}| \\\\le 1000$$$).Then follows a line containing the integer $$$q$$$ ($$$1 \\\\le q \\\\le 1000$$$).Then follows $$$q$$$ lines, the $$$j$$$-th of which containing the $$$2$$$ integers $$$s_{jx}$$$ and $$$s_{jy}$$$ ($$$|s_{jx}|, |s_{jy}| \\\\le 1000$$$).It is guaranteed that none of the segments in $$$l$$$ cross or touch, that $$$t$$$ is not on any segment in $$$l$$$, that $$$s_j$$$ is not on any segment in $$$l$$$, and that $$$s \\\\neq t$$$.OutputFor each query $$$s_j$$$ print an answer. If there exists a direction such that floating from $$$s_j$$$ in that direction, possibly sliding along some pieces of space junk, leads to $$$t$$$, print \"YES\". Otherwise, print \"NO\" (case insensitive).ExampleInput3 0 1 2 4 1 3 -1 6 0 -1 1 -1 14 -2 10 -1 10 0 10 1 10 2 10 3 10 4 10 5 10 6 10 -1 -2 0 -2 1 -2 2 -2 3 -2OutputYES YES YES YES YES NO NO NO YES YES NO NO NO YESNoteThe blue cross represents the target location, and the other blue line segments represent the space junk.Green dots represent starting locations where the answer is yes, and red dots represent starting locations where the answer is no.The yellow lines are possible paths to the target location for the $$$3$$$rd and $$$14$$$th queries.The black line is a possible path from the starting location in the $$$6$$$th query, but it barely misses the target location.", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "de8466cf", "template_md5": "35d339e4", "result": "Given a target position $(0,0)$ and a set of line segments representing space junk, determine if there is a direction a spaceship can float from a given starting position that will eventually reach the target position.\n\nHere's how the spaceship interacts with the space junk:\n\n* If the angle between the spaceship's direction and the line segment is less than 45 degrees, the spaceship slides along the segment in the direction that minimizes the change in angle. When it slides off the end, it continues floating in the original direction.\n* If the angle is 45 degrees or greater, the spaceship stops.\n\nYou are given the space junk positions once, and the target is always $(0,0)$. You will be given multiple starting positions and need to determine if a path to the target exists for each one.\n\n**Input:**\n\n* The first line contains the number of space junk segments ($n$).\n* The next $n$ lines each contain four integers representing the coordinates of the endpoints of a space junk segment.\n* The next line contains the number of starting positions ($q$).\n* The next $q$ lines each contain two integers representing the coordinates of a starting position.\n\n**Output:**\n\nFor each starting position, print \"YES\" if a path to the target exists, and \"NO\" otherwise."}, {"prompt_md5": "c483a10f", "template_md5": "465699a0", "result": "You are given a set of line segments representing obstacles and a target point.  You are also given multiple starting points. For each starting point, determine if you can reach the target point by moving in a straight line, potentially sliding along the obstacles at a shallow angle."}]}