{"uid": "461-D", "url": "https://codeforces.com/contest/461/problem/D", "tags": ["dsu", " math"], "title": "461-D", "statement": "D. Appleman and Complicated Tasktime limit per test2 secondsmemory limit per test256 megabytesinputstdinoutputstdoutToastman came up with a very complicated task. He gives it to Appleman, but Appleman doesn't know how to solve it. Can you help him?Given an×ncheckerboard. Each cell of the board has either character 'x', or character 'o', or nothing. How many ways to fill all the empty cells with 'x' or 'o' (each cell must contain only one character in the end) are there, such that for each cell the number of adjacent cells with 'o' will be even? Find the number of ways modulo1000000007(109+ 7). Two cells of the board are adjacent if they share a side.InputThe first line contains two integersn,k(1 ≤n,k≤ 105) — the size of the board, and the number of cells that has characters initially.Thenklines follows. Thei-th line contains two integers and a character:ai,bi,ci(1 ≤ai,bi≤n;ciis either 'o' or 'x'). This line means: there is a characterciin the cell that is located on the intersection of theai-th row andbi-th column. All the given cells are distinct.Consider that the rows are numbered from1tonfrom top to bottom. Analogically, the columns are numbered from1tonfrom left to right.OutputPrint a single integer — the answer to the problem.ExamplesInput3 21 1 x2 2 oOutput2Input4 32 4 x3 4 x3 2 xOutput2NoteIn the first example there are two ways:xxo          xooxox          ooooxx          oox", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "12fefd3e", "template_md5": "35d339e4", "result": "Given an $n \\times n$ checkerboard. Some cells of the board already have characters 'x' or 'o'. You need to fill all the empty cells with 'x' or 'o' (each cell must contain only one character in the end).  \n\nFind the number of ways to fill the empty cells such that for each cell, the number of adjacent cells with 'o' is even. Two cells are adjacent if they share a side.\n\nPrint the number of ways modulo $10^9 + 7$. \n\n\nThe input will contain:\n\n* Two integers $n$ and $k$ (where $1 \\le n, k \\le 10^5$) representing the size of the board and the number of cells with initial characters.\n* $k$ lines, each containing three integers $a_i$, $b_i$, and a character $c_i$ (where $1 \\le a_i, b_i \\le n$ and $c_i$ is either 'o' or 'x'). This line indicates that there is a character $c_i$ in the cell at the intersection of the $a_i$-th row and $b_i$-th column."}, {"prompt_md5": "71180386", "template_md5": "465699a0", "result": "You are given a grid of squares. Some squares already have an 'x' or 'o' in them.  You need to fill the empty squares with 'x' or 'o'.  The rule is that for each square, the number of 'o' squares touching it (sharing a side) must be even.  How many ways can you fill the grid following this rule?"}]}