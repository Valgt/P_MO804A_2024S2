{"uid": "1396-E", "url": "https://codeforces.com/contest/1396/problem/E", "tags": ["constructive algorithms", " dfs and similar", " trees"], "title": "1396-E", "statement": "E. Distance Matchingtime limit per test2 secondsmemory limit per test512 megabytesinputstandard inputoutputstandard outputYou are given an integer $$$k$$$ and atree$$$T$$$ with $$$n$$$ nodes ($$$n$$$ is even).Let $$$dist(u, v)$$$ be the number of edges on the shortest path from node $$$u$$$ to node $$$v$$$ in $$$T$$$.Let us define aundirected weighted complete graph$$$G = (V, E)$$$ as following:$$$V = \\\\{x \\\\mid 1 \\\\le x \\\\le n \\\\}$$$ i.e. the set of integers from $$$1$$$ to $$$n$$$$$$E = \\\\{(u, v, w) \\\\mid 1 \\\\le u, v \\\\le n, u \\\\neq v, w = dist(u, v) \\\\}$$$ i.e. there is an edge between every pair of distinct nodes, the weight being the distance between their respective nodes in $$$T$$$Your task is simple, find aperfect matchingin $$$G$$$ with total edge weight $$$k$$$ $$$(1 \\\\le k \\\\le n^2)$$$.InputThe first line of input contains two integers $$$n$$$, $$$k$$$ ($$$2 \\\\le n \\\\le 100\\\\,000$$$, $$$n$$$ is even, $$$1 \\\\le k \\\\le n^2$$$): number of nodes and the total edge weight of the perfect matching you need to find.The $$$i$$$-th of the following $$$n - 1$$$ lines contains two integers $$$v_i$$$, $$$u_i$$$ ($$$1 \\\\le v_i, u_i \\\\le n$$$) denoting an edge between $$$v_i$$$ and $$$u_i$$$ in $$$T$$$. It is guaranteed that the given graph is a tree.OutputIf there are no matchings that satisfy the above condition, output \"NO\" (without quotes) on a single line.Otherwise, you should output \"YES\" (without quotes) on the first line of output.You should then output $$$\\\\frac{n}{2}$$$ lines, the $$$i$$$-th line containing $$$p_i, q_i$$$ ($$$1 \\\\le p_i, q_i \\\\le n$$$): the $$$i$$$-th pair of the matching.ExamplesInput4 2 1 2 2 3 3 4OutputYES 2 1 3 4Input4 4 1 2 2 3 3 4OutputYES 3 1 2 4NoteAtreeis a connected acyclic undirected graph.Amatchingis set of pairwise non-adjacent edges, none of which are loops; that is, no two edges share a common vertex.Aperfect matchingis a matching which matches all vertices of the graph; that is, every vertex of the graph is incident to exactly one edge of the matching.", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "dbb7e297", "template_md5": "465699a0", "result": "You are given a tree with an even number of nodes.  You need to find a pairing of the nodes where the total distance between each pair is equal to a given number.  If such a pairing exists, output \"YES\" and list the pairings. Otherwise, output \"NO\"."}, {"prompt_md5": "f81c7376", "template_md5": "35d339e4", "result": "You are given a tree $T$ with an even number of nodes ($n$).  The tree has edges with no weight.\n\nYou need to create a complete undirected graph $G$ from the tree $T$.  In graph $G$, every pair of distinct nodes is connected by an edge, and the weight of the edge between nodes $u$ and $v$ is the number of edges on the shortest path between $u$ and $v$ in tree $T$.\n\nFind a perfect matching in graph $G$ where the total weight of all the edges in the matching is equal to $k$ ($1 \\le k \\le n^2$).\n\nA perfect matching is a set of edges where:\n\n* No two edges share a common vertex.\n* Every vertex in the graph is connected to exactly one edge in the matching.\n\nIf no such matching exists, output \"NO\". Otherwise, output \"YES\" followed by $n/2$ lines, each containing a pair of nodes that are connected in the matching."}]}