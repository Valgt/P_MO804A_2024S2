{"uid": "1476-E", "url": "https://codeforces.com/contest/1476/problem/E", "tags": ["bitmasks", " data structures", " dfs and similar", " graphs", " hashing", " sortings", " strings"], "title": "1476-E", "statement": "E. Pattern Matchingtime limit per test2 secondsmemory limit per test256 megabytesinputstandard inputoutputstandard outputYou are given $$$n$$$ patterns $$$p_1, p_2, \\\\dots, p_n$$$ and $$$m$$$ strings $$$s_1, s_2, \\\\dots, s_m$$$. Each pattern $$$p_i$$$ consists of $$$k$$$ characters that are either lowercase Latin letters or wildcard characters (denoted by underscores). All patterns are pairwise distinct. Each string $$$s_j$$$ consists of $$$k$$$ lowercase Latin letters.A string $$$a$$$ matches a pattern $$$b$$$ if for each $$$i$$$ from $$$1$$$ to $$$k$$$ either $$$b_i$$$ is a wildcard character or $$$b_i=a_i$$$.You are asked to rearrange the patterns in such a way that the first pattern the $$$j$$$-th string matches is $$$p[mt_j]$$$. You are allowed to leave the order of the patterns unchanged.Can you perform such a rearrangement? If you can, then print any valid order.InputThe first line contains three integers $$$n$$$, $$$m$$$ and $$$k$$$ ($$$1 \\\\le n, m \\\\le 10^5$$$, $$$1 \\\\le k \\\\le 4$$$) — the number of patterns, the number of strings and the length of each pattern and string.Each of the next $$$n$$$ lines contains a pattern — $$$k$$$ characters that are either lowercase Latin letters or underscores. All patterns are pairwise distinct.Each of the next $$$m$$$ lines contains a string — $$$k$$$ lowercase Latin letters, and an integer $$$mt$$$ ($$$1 \\\\le mt \\\\le n$$$) — the index of the first pattern the corresponding string should match.OutputPrint \"NO\" if there is no way to rearrange the patterns in such a way that the first pattern that the $$$j$$$-th string matches is $$$p[mt_j]$$$.Otherwise, print \"YES\" in the first line. The second line should contain $$$n$$$ distinct integers from $$$1$$$ to $$$n$$$ — the order of the patterns. If there are multiple answers, print any of them.ExamplesInput5 3 4 _b_d __b_ aaaa ab__ _bcd abcd 4 abba 2 dbcd 5OutputYES 3 2 4 5 1Input1 1 3 __c cba 1OutputNOInput2 2 2 a_ _b ab 1 ab 2OutputNONoteThe order of patterns after the rearrangement in the first example is the following:aaaa__b_ab___bcd_b_dThus, the first string matches patternsab__,_bcd,_b_din that order, the first of them isab__, that is indeed $$$p[4]$$$. The second string matches__b_andab__, the first of them is__b_, that is $$$p[2]$$$. The last string matches_bcdand_b_d, the first of them is_bcd, that is $$$p[5]$$$.The answer to that test is not unique, other valid orders also exist.In the second examplecbadoesn't match__c, thus, no valid order exists.In the third example the order (a_,_b) makes both strings match pattern $$$1$$$ first and the order (_b,a_) makes both strings match pattern $$$2$$$ first. Thus, there is no order that produces the result $$$1$$$ and $$$2$$$.", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "6c590eeb", "template_md5": "35d339e4", "result": "You are given $n$ patterns, each of length $k$, consisting of lowercase letters or underscores (_). You are also given $m$ strings, each of length $k$, consisting of lowercase letters.\n\nFor each string, you are given an integer $mt_j$ (between 1 and $n$) indicating which pattern the string should first match.\n\nYour task is to rearrange the patterns so that the $j$-th string matches the $mt_j$-th pattern first. \n\nDetermine if such a rearrangement is possible. If yes, output \"YES\" followed by the rearranged order of the patterns. If no, output \"NO\"."}, {"prompt_md5": "1a779bf0", "template_md5": "465699a0", "result": "You are given a list of patterns and a list of strings. Each pattern can contain wildcard characters.  You need to rearrange the patterns so that for each string, the first pattern it matches is the one specified by a given index.  Is this possible? If so, show one way to rearrange the patterns."}]}