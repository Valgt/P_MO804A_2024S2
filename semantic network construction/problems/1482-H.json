{"uid": "1482-H", "url": "https://codeforces.com/contest/1482/problem/H", "tags": ["data structures", " string suffix structures", " trees"], "title": "1482-H", "statement": "H. Examtime limit per test2 secondsmemory limit per test512 megabytesinputstandard inputoutputstandard outputThis year a Chunin Selection Exam is held again in Konoha, and taking part in it are $$$n$$$ ninjas named $$$s_1$$$, $$$s_2$$$, ..., $$$s_n$$$. All names are distinct. One of the exam stages consists of fights between the participants. This year the rules determining the ninjas for each fight are the following: ninjas $$$i$$$ and $$$j$$$ fight against each other if the following conditions are held:$$$i \\\\neq j$$$;$$$s_{j}$$$ is a substring of $$$s_{i}$$$;there is no $$$k$$$ except $$$i$$$ and $$$j$$$ that $$$s_{j}$$$ is a substring of $$$s_{k}$$$, and $$$s_{k}$$$ is a substring of $$$s_{i}$$$.A string $$$a$$$ is a substring of a string $$$b$$$ if $$$a$$$ can be obtained from $$$b$$$ by deletion of several (possibly, zero or all) characters from the beginning and several (possibly, zero or all) characters from the end.Your task is to find out how many fights are going to take place this year.InputThe first line consists of the only integer $$$n$$$ ($$$1 \\\\leq n \\\\leq 10^{6}$$$) standing for the number of examinees.The following $$$n$$$ lines contain their names. No two names coincide, all names are non-empty and consist of lowercase English letters. The total length of all names doesn't exceed $$$10^6$$$.OutputPrint the only integer standing for the number of fights.ExamplesInput5 hidan dan hanabi bi nabiOutput3Input4 abacaba abaca acaba acaOutput4NoteIn the first examplehidanfights againstdan, andhanabifights againstnabi, who also fightsbi. Ninjas namedhanabiandbidon't fight each other since there is the ninja callednabiwho breaks the third condition for them.In the second example the fights are held betweenabacabaandacaba,abacabaandabaca,acabaandaca,abacaandaca.", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "14d1fb8b", "template_md5": "35d339e4", "result": "You are given a list of $n$ strings.  Two strings $s_i$ and $s_j$ will fight if:\n\n* $i \\neq j$\n* $s_j$ is a substring of $s_i$\n* There is no other string $s_k$ (besides $s_i$ and $s_j$) where $s_j$ is a substring of $s_k$ and $s_k$ is a substring of $s_i$.\n\nFind the total number of fights that will occur. \n\n\nInput:\n\n* The first line contains an integer $n$ ($1 \\leq n \\leq 10^6$) representing the number of strings.\n* The next $n$ lines each contain a string. No two strings are the same, and all strings are made up of lowercase English letters. The total length of all strings does not exceed $10^6$.\n\nOutput:\n\n* Print a single integer representing the number of fights."}, {"prompt_md5": "8320e759", "template_md5": "465699a0", "result": "You are given a list of names.  Two names fight if one is a substring of the other and no other name has both of those names as substrings. Count the number of fights."}]}