{"uid": "1575-F", "url": "https://codeforces.com/contest/1575/problem/F", "tags": ["math"], "title": "1575-F", "statement": "F. Finding Expected Valuetime limit per test3 secondsmemory limit per test512 megabytesinputstandard inputoutputstandard outputMr. Chanek opened a letter from his fellow, who is currently studying at Singanesia. Here is what it says.Define an array $$$b$$$ ($$$0 \\\\leq b_i < k$$$) with $$$n$$$ integers. While there exists a pair $$$(i, j)$$$ such that $$$b_i \\\\ne b_j$$$, do the following operation:Randomly pick a number $$$i$$$ satisfying $$$0 \\\\leq i < n$$$. Note that each number $$$i$$$ has a probability of $$$\\\\frac{1}{n}$$$ to be picked.Randomly Pick a number $$$j$$$ satisfying $$$0 \\\\leq j < k$$$.Change the value of $$$b_i$$$ to $$$j$$$. It is possible for $$$b_i$$$ to be changed to the same value.Denote $$$f(b)$$$ as the expected number of operations done to $$$b$$$ until all elements of $$$b$$$ are equal.You are given two integers $$$n$$$ and $$$k$$$, and an array $$$a$$$ ($$$-1 \\\\leq a_i < k$$$) of $$$n$$$ integers.For every index $$$i$$$ with $$$a_i = -1$$$, replace $$$a_i$$$ with a random number $$$j$$$ satisfying $$$0 \\\\leq j < k$$$. Let $$$c$$$ be the number of occurrences of $$$-1$$$ in $$$a$$$. There are $$$k^c$$$ possibilites of $$$a$$$ after the replacement, each with equal probability of being the final array.Find the expected value of $$$f(a)$$$ modulo $$$10^9 + 7$$$.Formally, let $$$M = 10^9 + 7$$$. It can be shown that the answer can be expressed as an irreducible fraction $$$\\\\frac{p}{q}$$$, where $$$p$$$ and $$$q$$$ are integers and $$$q \\\\not \\\\equiv 0 \\\\pmod{M}$$$. Output the integer equal to $$$p \\\\cdot q^{-1} \\\\bmod M$$$. In other words, output such an integer $$$x$$$ that $$$0 \\\\le x < M$$$ and $$$x \\\\cdot q \\\\equiv p \\\\pmod{M}$$$.After reading the letter, Mr. Chanek gave the task to you. Solve it for the sake of their friendship!InputThe first line contains two integers $$$n$$$ and $$$k$$$ ($$$2 \\\\leq n \\\\leq 10^5$$$, $$$2 \\\\leq k \\\\leq 10^9$$$).The second line contains $$$n$$$ integers $$$a_1, a_2, \\\\ldots, a_n$$$ ($$$-1 \\\\leq a_i < k$$$).OutputOutput an integer denoting the expected value of $$$f(a)$$$ modulo $$$10^9 + 7$$$.ExamplesInput2 2 0 1Output2Input2 2 0 -1Output1Input3 3 0 1 1Output12Input3 3 -1 -1 -1Output11Input10 9 -1 0 -1 1 1 2 2 3 3 3Output652419213", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "f9697eb0", "template_md5": "35d339e4", "result": "You are given two integers $n$ and $k$ and an array $a$ of $n$ integers, where $-1 \\leq a_i < k$.  There are some $-1$s in the array.  \n\nFor each $-1$ in the array, replace it with a random integer between 0 and $k-1$.  \n\nDefine a function $f(b)$ as follows:\n\n* Let $b$ be an array of $n$ integers where $0 \\leq b_i < k$.\n* While there are two different elements in the array $b$, do the following:\n    * Randomly choose an index $i$ between 0 and $n-1$ (each index has an equal probability of being chosen).\n    * Randomly choose an integer $j$ between 0 and $k-1$.\n    * Change the value of $b_i$ to $j$.\n* The number of operations performed until all elements of $b$ are equal is denoted as $f(b)$.\n\nCalculate the expected value of $f(a)$ (the function $f$ applied to the array $a$ after replacing the $-1$s) modulo $10^9 + 7$.  \n\n**Note:**\n\n* There are $k^c$ possible arrays $a$ after replacing the $-1$s, where $c$ is the number of $-1$s in the original array.\n* Each possible array $a$ has an equal probability of occurring."}, {"prompt_md5": "93f95907", "template_md5": "465699a0", "result": "You are given an array of numbers. You can randomly change any number in the array to any other number.  The goal is to find the average number of times you need to do this until all the numbers in the array are the same."}]}