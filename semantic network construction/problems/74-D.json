{"uid": "74-D", "url": "https://codeforces.com/contest/74/problem/D", "tags": ["data structures"], "title": "74-D", "statement": "D. Hangertime limit per test4 secondsmemory limit per test256 megabytesinputstdinoutputstdoutIn one very large and very respectable company there is a cloakroom with a coat hanger. It is represented bynhooks, positioned in a row. The hooks are numbered with positive integers from 1 tonfrom the left to the right.The company workers have a very complicated work schedule. At the beginning of a work day all the employees are not there and the coat hanger in the cloakroom is empty. At some moments of time the employees arrive and some of them leave.When some employee arrives, he hangs his cloak on one of the available hooks. To be of as little discomfort to his colleagues as possible, the hook where the coat will hang, is chosen like this. First the employee chooses the longest segment among available hooks following in a row. If there are several of such segments, then he chooses the one closest to the right. After that the coat is hung on the hook located in the middle of this segment. If the segment has an even number of hooks, then among two central hooks we choose the one closest to the right.When an employee leaves, he takes his coat. As all the company workers deeply respect each other, no one takes somebody else's coat.From time to time the director of this respectable company gets bored and he sends his secretary to see how many coats hang on the coat hanger from thei-th to thej-th hook inclusive. And this whim is always to be fulfilled, otherwise the director gets angry and has a mental breakdown.Not to spend too much time traversing from the director's office to the cloakroom and back again, the secretary asked you to write a program, emulating the company cloakroom's work.InputThe first line contains two integersn,q(1 ≤n≤ 109,1 ≤q≤ 105), which are the number of hooks on the hanger and the number of requests correspondingly. Then followqlines with requests, sorted according to time. The request of the type \"0ij\" (1 ≤i≤j≤n) — is the director's request. The input data has at least one director's request. In all other cases the request contains a positive integer not exceeding109— an employee identificator. Each odd appearance of the identificator of an employee in the request list is his arrival. Each even one is his leaving. All employees have distinct identificators. When any employee arrives, there is always at least one free hook.OutputFor each director's request in the input data print a single number on a single line — the number of coats hanging on the hooks from thei-th one to thej-th one inclusive.ExamplesInput9 11120 5 81130 3 890 6 960 1 9Output2325", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "a6f741b0", "template_md5": "35d339e4", "result": "You are given a coat rack with $n$ hooks numbered from 1 to $n$.  Employees arrive and leave throughout the day, hanging their coats on the rack.\n\nAn arriving employee chooses the longest consecutive sequence of empty hooks, and hangs their coat on the hook in the middle of that sequence. If there are two middle hooks, they choose the one further to the right.\n\nThe secretary needs to answer $q$ queries. Each query is of the form \"i j\", asking for the number of coats on hooks $i$ through $j$ (inclusive).\n\n**Input:**\n\n* The first line contains two integers, $n$ and $q$ ($1 \\le n \\le 10^9$, $1 \\le q \\le 10^5$), representing the number of hooks and the number of queries.\n* The next $q$ lines describe the events:\n    * A line starting with \"0 i j\" is a query for the number of coats on hooks $i$ to $j$.\n    * A line with a positive integer is an employee arriving or leaving. An odd number indicates an arrival, an even number indicates a departure.\n\n**Output:**\n\n* For each query, print a single line with the number of coats on the specified hooks."}, {"prompt_md5": "a7f598c0", "template_md5": "465699a0", "result": "You are given a line of hooks. People arrive and leave, each hanging or taking a coat from the line. When someone arrives, they choose the longest consecutive empty section of hooks and hang their coat in the middle.  You need to answer queries about how many coats are on a given section of the line at a specific time."}]}