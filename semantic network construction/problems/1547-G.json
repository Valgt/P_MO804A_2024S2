{"uid": "1547-G", "url": "https://codeforces.com/contest/1547/problem/G", "tags": ["dfs and similar", " dp", " graphs", " trees"], "title": "1547-G", "statement": "G. How Many Paths?time limit per test4 secondsmemory limit per test512 megabytesinputstandard inputoutputstandard outputYou are given a directed graph $$$G$$$ which can contain loops (edges from a vertex to itself). Multi-edges are absent in $$$G$$$ which means that for all ordered pairs $$$(u, v)$$$ exists at most one edge from $$$u$$$ to $$$v$$$. Vertices are numbered from $$$1$$$ to $$$n$$$.A path from $$$u$$$ to $$$v$$$ is a sequence of edges such that:vertex $$$u$$$ is the start of the first edge in the path;vertex $$$v$$$ is the end of the last edge in the path;for all pairs of adjacent edges next edge starts at the vertex that the previous edge ends on.We will assume that the empty sequence of edges is a path from $$$u$$$ to $$$u$$$.For each vertex $$$v$$$ output one of four values:$$$0$$$, if there are no paths from $$$1$$$ to $$$v$$$;$$$1$$$, if there is only one path from $$$1$$$ to $$$v$$$;$$$2$$$, if there is more than one path from $$$1$$$ to $$$v$$$ and the number of paths is finite;$$$-1$$$, if the number of paths from $$$1$$$ to $$$v$$$ is infinite.Let's look at the example shown in the figure.Then:the answer for vertex $$$1$$$ is $$$1$$$: there is only one path from $$$1$$$ to $$$1$$$ (path with length $$$0$$$);the answer for vertex $$$2$$$ is $$$0$$$: there are no paths from $$$1$$$ to $$$2$$$;the answer for vertex $$$3$$$ is $$$1$$$: there is only one path from $$$1$$$ to $$$3$$$ (it is the edge $$$(1, 3)$$$);the answer for vertex $$$4$$$ is $$$2$$$: there are more than one paths from $$$1$$$ to $$$4$$$ and the number of paths are finite (two paths: $$$[(1, 3), (3, 4)]$$$ and $$$[(1, 4)]$$$);the answer for vertex $$$5$$$ is $$$-1$$$: the number of paths from $$$1$$$ to $$$5$$$ is infinite (the loop can be used in a path many times);the answer for vertex $$$6$$$ is $$$-1$$$: the number of paths from $$$1$$$ to $$$6$$$ is infinite (the loop can be used in a path many times).InputThe first contains an integer $$$t$$$ ($$$1 \\\\le t \\\\le 10^4$$$) — the number of test cases in the input. Then $$$t$$$ test cases follow. Before each test case, there is an empty line.The first line of the test case contains two integers $$$n$$$ and $$$m$$$ ($$$1 \\\\le n \\\\le 4 \\\\cdot 10^5, 0 \\\\le m \\\\le 4 \\\\cdot 10^5$$$) — numbers of vertices and edges in graph respectively. The next $$$m$$$ lines contain edges descriptions. Each line contains two integers $$$a_i$$$, $$$b_i$$$ ($$$1 \\\\le a_i, b_i \\\\le n$$$) — the start and the end of the $$$i$$$-th edge. The vertices of the graph are numbered from $$$1$$$ to $$$n$$$. The given graph can contain loops (it is possible that $$$a_i = b_i$$$), but cannot contain multi-edges (it is not possible that $$$a_i = a_j$$$ and $$$b_i = b_j$$$ for $$$i \\\\ne j$$$).The sum of $$$n$$$ over all test cases does not exceed $$$4 \\\\cdot 10^5$$$. Similarly, the sum of $$$m$$$ over all test cases does not exceed $$$4 \\\\cdot 10^5$$$.OutputOutput $$$t$$$ lines. The $$$i$$$-th line should contain an answer for the $$$i$$$-th test case: a sequence of $$$n$$$ integers from $$$-1$$$ to $$$2$$$.ExampleInput5  6 7 1 4 1 3 3 4 4 5 2 1 5 5 5 6  1 0  3 3 1 2 2 3 3 1  5 0  4 4 1 2 2 3 1 4 4 3Output1 0 1 2 -1 -1  1  -1 -1 -1  1 0 0 0 0  1 1 2 1", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "9846d453", "template_md5": "35d339e4", "result": "You are given a directed graph with $n$ vertices and $m$ edges.  Each edge connects two vertices.  \n\nFor each vertex $v$, determine the following:\n\n* **0:** If there are no paths from vertex 1 to vertex $v$.\n* **1:** If there is only one path from vertex 1 to vertex $v$.\n* **2:** If there are multiple paths from vertex 1 to vertex $v$, but a finite number of them.\n* **-1:** If there are infinitely many paths from vertex 1 to vertex $v$.\n\n**Input:**\n\n* The first line contains an integer $t$ ($1 \\le t \\le 10^4$) representing the number of test cases.\n* Each test case is preceded by an empty line.\n* The first line of each test case contains two integers $n$ and $m$ ($1 \\le n \\le 4 \\cdot 10^5$, $0 \\le m \\le 4 \\cdot 10^5$) representing the number of vertices and edges, respectively.\n* The next $m$ lines each contain two integers $a_i$ and $b_i$ ($1 \\le a_i, b_i \\le n$) representing an edge from vertex $a_i$ to vertex $b_i$.\n\n**Output:**\n\n* For each test case, output a line containing $n$ integers from $-1$ to $2$, one for each vertex, representing the answer for that vertex as described above."}, {"prompt_md5": "c9a1382c", "template_md5": "465699a0", "result": "You are given a directed graph with loops.  For each vertex, determine if there are zero, one, a finite number, or an infinite number of paths from a starting vertex to that vertex."}]}