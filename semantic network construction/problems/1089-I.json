{"uid": "1089-I", "url": "https://codeforces.com/contest/1089/problem/I", "tags": ["combinatorics"], "title": "1089-I", "statement": "I. Interval-Free Permutationstime limit per test1.5 secondsmemory limit per test512 megabytesinputstandard inputoutputstandard outputConsider a permutation $$$p_1, p_2, \\\\dots p_n$$$ of integers from 1 to $$$n$$$. We call a sub-segment $$$p_l, p_{l+1}, \\\\dots, p_{r-1}, p_{r}$$$ of the permutation anintervalif it is a reordering of some set of consecutive integers. For example, the permutation $$$(6,7,1,8,5,3,2,4)$$$ has the intervals $$$(6,7)$$$, $$$(5,3,2,4)$$$, $$$(3,2)$$$, and others.Each permutation has some trivial intervals — the full permutation itself and every single element. We call a permutationinterval-freeif it does not have non-trivial intervals. In other words, interval-free permutation does not have intervals of length between 2 and $$$n - 1$$$ inclusive.Your task is to count the number of interval-free permutations of length $$$n$$$ modulo prime number $$$p$$$.InputIn the first line of the input there are two integers $$$t$$$ ($$$1 \\\\le t \\\\le 400$$$) and $$$p$$$ ($$$10^8 \\\\le p \\\\le 10^9$$$) — the number of test cases to solve and the prime modulo. In each of the next $$$t$$$ lines there is one integer $$$n$$$ ($$$1 \\\\le n \\\\le 400$$$) — the length of the permutation.OutputFor each of $$$t$$$ test cases print a single integer — the number of interval-free permutations modulo $$$p$$$.ExamplesInput4 998244353 1 4 5 9Output1 2 6 28146Input1 437122297 20Output67777575NoteFor $$$n = 1$$$ the only permutation is interval-free. For $$$n = 4$$$ two interval-free permutations are $$$(2,4,1,3)$$$ and $$$(3,1,4,2)$$$. For $$$n = 5$$$ — $$$(2,4,1,5,3)$$$, $$$(2,5,3,1,4)$$$, $$$(3,1,5,2,4)$$$, $$$(3,5,1,4,2)$$$, $$$(4,1,3,5,2)$$$, and $$$(4,2,5,1,3)$$$. We will not list all 28146 for $$$n = 9$$$, but for example $$$(4,7,9,5,1,8,2,6,3)$$$, $$$(2,4,6,1,9,7,3,8,5)$$$, $$$(3,6,9,4,1,5,8,2,7)$$$, and $$$(8,4,9,1,3,6,2,7,5)$$$ are interval-free.The exact value for $$$n = 20$$$ is 264111424634864638.", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "1d13b6d5", "template_md5": "35d339e4", "result": "You are given a positive integer $n$. A permutation of length $n$ is an arrangement of the numbers from 1 to $n$ in a specific order.  \n\nAn interval in a permutation is a subsequence of consecutive numbers. For example, in the permutation $(6,7,1,8,5,3,2,4)$, the subsequences $(6,7)$, $(5,3,2,4)$, and $(3,2)$ are intervals.\n\nAn interval-free permutation is a permutation that does not contain any intervals of length 2 to $n-1$.  \n\nYour task is to find the number of interval-free permutations of length $n$ modulo a prime number $p$. \n\n\n\nInput:\n\n* The first line contains two integers $t$ and $p$ ($1 \\le t \\le 400$, $10^8 \\le p \\le 10^9$) representing the number of test cases and the prime modulo, respectively.\n* Each of the next $t$ lines contains an integer $n$ ($1 \\le n \\le 400$) representing the length of the permutation.\n\nOutput:\n\nFor each test case, print a single integer representing the number of interval-free permutations of length $n$ modulo $p$."}, {"prompt_md5": "bbd84e42", "template_md5": "465699a0", "result": "You are given a number n. Find the number of ways to arrange numbers from 1 to n without creating any sub-sequences of consecutive numbers (other than single numbers).  The answer should be given modulo a given prime number p."}]}