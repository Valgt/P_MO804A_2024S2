{"uid": "936-B", "url": "https://codeforces.com/contest/936/problem/B", "tags": ["dfs and similar", " dp", " games", " graphs"], "title": "936-B", "statement": "B. Sleepy Gametime limit per test2 secondsmemory limit per test256 megabytesinputstandard inputoutputstandard outputPetya and Vasya arranged a game. The game runs by the following rules. Players have a directed graph consisting ofnvertices andmedges. One of the vertices contains a chip. Initially the chip is located at vertexs. Players take turns moving the chip along some edge of the graph. Petya goes first. Player who can't move the chip loses. If the game lasts for106turns the draw is announced.Vasya was performing big laboratory work in \"Spelling and parts of speech\" at night before the game, so he fell asleep at the very beginning of the game. Petya decided to take the advantage of this situation and make both Petya's and Vasya's moves.Your task is to help Petya find out if he can win the game or at least draw a tie.InputThe first line of input contain two integersnandm— the number of vertices and the number of edges in the graph (2 ≤n≤ 105,0 ≤m≤ 2·105).The nextnlines contain the information about edges of the graph.i-th line (1 ≤i≤n) contains nonnegative integerci— number of vertices such that there is an edge fromito these vertices andcidistinct integersai,j— indices of these vertices (1 ≤ai,j≤n,ai,j≠i).It is guaranteed that the total sum ofciequals tom.The next line contains index of vertexs— the initial position of the chip (1 ≤s≤n).OutputIf Petya can win print «Win» in the first line. In the next line print numbersv1,v2, ...,vk(1 ≤k≤ 106) — the sequence of vertices Petya should visit for the winning. Vertexv1should coincide withs. Fori= 1...k- 1there should be an edge fromvitovi+ 1in the graph. There must be no possible move from vertexvk. The sequence should be such that Petya wins the game.If Petya can't win but can draw a tie, print «Draw» in the only line. Otherwise print «Lose».ExamplesInput5 62 2 32 4 51 41 501OutputWin1 2 4 5Input3 21 31 102OutputLoseInput2 21 21 11OutputDrawNoteIn the first example the graph is the following:Initially the chip is located at vertex1. In the first move Petya moves the chip to vertex2, after that he moves it to vertex4for Vasya. After that he moves to vertex5. Now it is Vasya's turn and there is no possible move, so Petya wins.In the second example the graph is the following:Initially the chip is located at vertex2. The only possible Petya's move is to go to vertex1. After that he has to go to3for Vasya. Now it's Petya's turn but he has no possible move, so Petya loses.In the third example the graph is the following:Petya can't win, but he can move along the cycle, so the players will draw a tie.", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "a5b3e6d5", "template_md5": "35d339e4", "result": "You are given a directed graph with $n$ vertices and $m$ edges.  One vertex is designated as the starting position of a chip. Two players take turns moving the chip along the edges of the graph. The first player to be unable to make a move loses. If the game lasts for $10^6$ turns, it is a draw.\n\nYour task is to determine if the first player can win the game, draw the game, or if they will always lose. If the first player can win, output a sequence of vertices that they should visit to guarantee a win. \n\n**Input:**\n\n* The first line contains two integers, $n$ and $m$, representing the number of vertices and edges, respectively.\n* The next $n$ lines describe the edges of the graph. The $i$-th line contains a non-negative integer $c_i$ followed by $c_i$ distinct integers $a_{i,1}, a_{i,2}, ..., a_{i,c_i}$, representing the vertices that have an edge directed from vertex $i$ to them.\n* The next line contains an integer $s$, representing the starting vertex of the chip.\n\n**Output:**\n\n* If the first player can win, output \"Win\" followed by a sequence of vertices representing a winning strategy.\n* If the first player cannot win but can draw, output \"Draw\".\n* Otherwise, output \"Lose\"."}, {"prompt_md5": "e21399dd", "template_md5": "465699a0", "result": "You are given a directed graph with a starting point.  Players take turns moving along the edges of the graph. The game ends when a player cannot make a move. Determine if a player can force a win or if a draw is inevitable. If a win is possible, provide the sequence of moves to achieve it."}]}