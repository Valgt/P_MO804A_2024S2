{"uid": "1398-E", "url": "https://codeforces.com/contest/1398/problem/E", "tags": ["binary search", " data structures", " greedy", " implementation", " math", " sortings"], "title": "1398-E", "statement": "E. Two Types of Spellstime limit per test3.5 secondsmemory limit per test256 megabytesinputstandard inputoutputstandard outputPolycarp plays a computer game (yet again). In this game, he fights monsters using magic spells.There are two types of spells:firespell of power $$$x$$$ deals $$$x$$$ damage to the monster, andlightningspell of power $$$y$$$ deals $$$y$$$ damage to the monster anddoublesthe damage of the next spell Polycarp casts. Each spell can be castonly once per battle, but Polycarp can cast them in any order.For example, suppose that Polycarp knows three spells: a fire spell of power $$$5$$$, a lightning spell of power $$$1$$$, and a lightning spell of power $$$8$$$. There are $$$6$$$ ways to choose the order in which he casts the spells:first, second, third. This order deals $$$5 + 1 + 2 \\\\cdot 8 = 22$$$ damage;first, third, second. This order deals $$$5 + 8 + 2 \\\\cdot 1 = 15$$$ damage;second, first, third. This order deals $$$1 + 2 \\\\cdot 5 + 8 = 19$$$ damage;second, third, first. This order deals $$$1 + 2 \\\\cdot 8 + 2 \\\\cdot 5 = 27$$$ damage;third, first, second. This order deals $$$8 + 2 \\\\cdot 5 + 1 = 19$$$ damage;third, second, first. This order deals $$$8 + 2 \\\\cdot 1 + 2 \\\\cdot 5 = 20$$$ damage.Initially, Polycarp knows $$$0$$$ spells. His spell set changes $$$n$$$ times, each time he either learns a new spell or forgets an already known one. After each change, calculate the maximum possible damage Polycarp may deal using the spells he knows.InputThe first line contains one integer $$$n$$$ ($$$1 \\\\le n \\\\le 2 \\\\cdot 10^5$$$) — the number of changes to the spell set.Each of the next $$$n$$$ lines contains two integers $$$tp$$$ and $$$d$$$ ($$$0 \\\\le tp_i \\\\le 1$$$; $$$-10^9 \\\\le d \\\\le 10^9$$$; $$$d_i \\\\neq 0$$$) — the description of the change. If $$$tp_i$$$ if equal to $$$0$$$, then Polycarp learns (or forgets) a fire spell, otherwise he learns (or forgets) a lightning spell.If $$$d_i > 0$$$, then Polycarp learns a spell of power $$$d_i$$$. Otherwise, Polycarp forgets a spell with power $$$-d_i$$$, and it is guaranteed that he knew that spell before the change.It is guaranteed that the powers of all spells Polycarp knows after each change are different (Polycarp never knows two spells with the same power).OutputAfter each change, print the maximum damage Polycarp can deal with his current set of spells.ExampleInput6 1 5 0 10 1 -5 0 5 1 11 0 -10Output5 25 10 15 36 21", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "91b7f293", "template_md5": "35d339e4", "result": "There are two types of spells:\n\n* **Fire spell:** Deals $x$ damage.\n* **Lightning spell:** Deals $y$ damage and doubles the damage of the next spell cast.\n\nYou can cast each spell only once.  \n\nYou are given a sequence of operations:\n\n* **Operation 0:** Learn a new fire spell of power $d$.\n* **Operation 1:** Learn a new lightning spell of power $d$.\n* **Operation -d:** Forget a spell of power $d$.\n\nAfter each operation, calculate the maximum damage that can be dealt using the current set of spells. \n\n**Input:**\n\n* The first line contains an integer $n$ ($1 \\le n \\le 2 \\cdot 10^5$) representing the number of operations.\n* Each of the next $n$ lines contains two integers $tp$ and $d$ ($0 \\le tp \\le 1$, $-10^9 \\le d \\le 10^9$, $d_i \\neq 0$):\n    * $tp = 0$: Learn a fire spell.\n    * $tp = 1$: Learn a lightning spell.\n    * $tp = -d$: Forget a spell.\n\n**Output:**\n\nAfter each operation, print the maximum damage that can be dealt."}, {"prompt_md5": "2130e94c", "template_md5": "465699a0", "result": "You are given a sequence of operations. Each operation either adds a spell of a given power to a set of spells or removes a spell of a given power from the set.  After each operation, find the maximum damage that can be dealt using the current set of spells, given that spells have two types: fire spells deal their power in damage, and lightning spells deal their power in damage and double the power of the next spell cast."}]}