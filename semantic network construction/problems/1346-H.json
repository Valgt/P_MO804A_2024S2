{"uid": "1346-H", "url": "https://codeforces.com/contest/1346/problem/H", "tags": ["*special", " data structures", " games"], "title": "1346-H", "statement": "H. Game with Segmentstime limit per test3 secondsmemory limit per test512 megabytesinputstandard inputoutputstandard outputAlice and Bob are playing a game (yet again).They have two sequences of segments of the coordinate axis: a sequence of $$$n$$$initial segments: $$$[l_1, r_1]$$$, $$$[l_2, r_2]$$$, ..., $$$[l_n, r_n]$$$, and a sequence of $$$m$$$terminal segments: $$$[L_1, R_1]$$$, $$$[L_2, R_2]$$$, ..., $$$[L_m, R_m]$$$. At the beginning of the game, they choose one of theinitial segmentsand set it as thecurrent segment.Alice and Bob make alternating moves: Alice makes the first move, Bob makes the second move, Alice makes the third one, and so on. During each move, the current playermustshrink thecurrent segmenteither by increasing its left endpoint by $$$1$$$, or by decreasing its right endpoint by $$$1$$$. So, if the current segment is $$$[c_l, c_r]$$$, it becomes either $$$[c_l + 1, c_r]$$$, or $$$[c_l, c_r - 1]$$$.If at the beginning of the game or after Bob's move thecurrent segmentcoincides with one of theterminal segments, Bob wins. If thecurrent segmentbecomes degenerate ($$$c_l = c_r$$$), and Bob hasn't won yet, Alice wins. If thecurrent segmentcoincides with one of theterminal segmentsafter Alice's move, nothing happens — the game continues.Both players play optimally — if they can win, they always use a strategy that leads them to victory in the minimum number of turns, and if they cannot win, they try to prolong the game, using the strategy allowing them to make the maximum possible number of moves until their defeat.For each of theinitial segmentsyou have to determine who will win the game if this segment is chosen as thecurrent segmentat the beginning of the game. If Bob wins, you also have to calculate the number of moves Alice will make before her defeat.InputThe first line contains two integers $$$n$$$ and $$$m$$$ ($$$1 \\\\le n, m \\\\le 2 \\\\cdot 10^5$$$) — the number ofinitial segmentsandterminal segments, respectively.Then $$$n$$$ lines follow, the $$$i$$$-th line contains two integers $$$l_i$$$ and $$$r_i$$$ ($$$1 \\\\le l_i < r_i \\\\le 10^6$$$) — the endpoints of the $$$i$$$-thinitial segment.Then $$$m$$$ lines follow, the $$$i$$$-th line contains two integers $$$L_i$$$ and $$$R_i$$$ ($$$1 \\\\le L_i < R_i \\\\le 10^6$$$) — the endpoints of the $$$i$$$-thterminal segment.Note that some of the segments given in the input may coincide.OutputPrint $$$n$$$ integers, the $$$i$$$-th of them should describe the result of the game if the $$$i$$$-thinitial segmentis chosen at the beginning of the game:if Alice wins, print $$$-1$$$;if Bob wins, print the number of moves Alice will make before she is defeated.ExamplesInput1 1 4 7 4 7Output0Input1 2 2 5 2 4 3 5Output-1Input2 1 1 5 1 4 2 3Output-1 1", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "cfee1173", "template_md5": "35d339e4", "result": "There are two sets of segments on a number line:\n\n* **Initial segments:**  $[l_1, r_1]$, $[l_2, r_2]$, ..., $[l_n, r_n]$\n* **Terminal segments:** $[L_1, R_1]$, $[L_2, R_2]$, ..., $[L_m, R_m]$\n\nThe game starts by choosing one of the initial segments. Players take turns shrinking the current segment by either increasing its left endpoint by 1 or decreasing its right endpoint by 1.\n\n* **Winning conditions:**\n    * **Bob wins** if the current segment overlaps with any terminal segment.\n    * **Alice wins** if the current segment becomes a single point (degenerate).\n\nPlayers play optimally, meaning they always choose the move that leads to victory or delays defeat as long as possible.\n\nFor each initial segment, determine:\n\n* **Who wins:** Alice or Bob\n* **If Bob wins, how many moves Alice makes before losing.**"}, {"prompt_md5": "9004cb20", "template_md5": "465699a0", "result": "Two players take turns shrinking a segment on a number line. The segment starts at a given point and can be shrunk by increasing its left endpoint or decreasing its right endpoint. The game ends when the segment overlaps with a target segment or becomes a single point. The first player to make the segment overlap a target segment wins. Determine who wins for each starting segment and, if the second player wins, how many moves the first player makes before losing."}]}