{"uid": "629-E", "url": "https://codeforces.com/contest/629/problem/E", "tags": ["combinatorics", " data structures", " dfs and similar", " dp", " probabilities", " trees"], "title": "629-E", "statement": "E. Famil Door and Roadstime limit per test5 secondsmemory limit per test512 megabytesinputstandard inputoutputstandard outputFamil Door’s City map looks like a tree (undirected connected acyclic graph) so other people call it Treeland. There arenintersections in the city connected byn- 1bidirectional roads.There aremfriends of Famil Door living in the city. Thei-th friend lives at the intersectionuiand works at the intersectionvi. Everyone in the city is unhappy because there is exactly one simple path between their home and work.Famil Door plans to construct exactly one new road and he will randomly choose one amongn·(n- 1) / 2possibilities. Note, that he may even build a new road between two cities that are already connected by one.He knows, that each of his friends will become happy, if after Famil Door constructs a new road there is a path from this friend home to work and back that doesn't visit the same road twice. Formally, there is a simple cycle containing bothuiandvi.Moreover, if the friend becomes happy, his pleasure is equal to the length of such path (it's easy to see that it's unique). For each of his friends Famil Door wants to know his expected pleasure, that is the expected length of the cycle containing bothuiandviif we consider only cases when such a cycle exists.InputThe first line of the input contains integersnandm(2 ≤n,m≤ 100 000) — the number of the intersections in the Treeland and the number of Famil Door's friends.Then follown- 1lines describing bidirectional roads. Each of them contains two integersaiandbi(1 ≤ai,bi≤n)— the indices of intersections connected by thei-th road.Lastmlines of the input describe Famil Door's friends. Thei-th of these lines contain two integersuiandvi(1 ≤ui,vi≤n,ui≠vi) — indices of intersections where thei-th friend lives and works.OutputFor each friend you should print the expected value of pleasure if he will be happy. Your answer will be considered correct if its absolute or relative error does not exceed10- 6.Namely: let's assume that your answer isa, and the answer of the jury isb. The checker program will consider your answer correct, if.ExamplesInput4 32 44 13 23 12 34 1Output4.000000003.000000003.00000000Input3 31 21 31 21 32 3Output2.500000002.500000003.00000000NoteConsider the second sample.Both roads(1, 2)and(2, 3)work, so the expected length ifRoads(1, 3)and(2, 3)make the second friend happy. Same as for friend1the answer is2.5The only way to make the third friend happy is to add road(2, 3), so the answer is3", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "7eca7b29", "template_md5": "35d339e4", "result": "There is a city with $n$ intersections connected by $n-1$ bidirectional roads, forming a tree.  \n\n$m$ people live in the city. The $i$-th person lives at intersection $u_i$ and works at intersection $v_i$.  \n\nThe city is unhappy because everyone has only one path between their home and work.\n\nTo make everyone happy, one new road will be built randomly out of $n(n-1)/2$ possibilities.  A person becomes happy if there is a cycle containing both their home and work after the new road is built.\n\nFor each person, calculate the expected length of the cycle containing their home and work if they become happy.\n\n\nInput:\n\n* The first line contains two integers, $n$ and $m$ ($2 \\le n, m \\le 100,000$), representing the number of intersections and the number of people, respectively.\n* The next $n-1$ lines describe the roads, each containing two integers $a_i$ and $b_i$ ($1 \\le a_i, b_i \\le n$), representing the intersections connected by the $i$-th road.\n* The last $m$ lines describe the people, each containing two integers $u_i$ and $v_i$ ($1 \\le u_i, v_i \\le n$, $u_i \\neq v_i$), representing the home and work intersections of the $i$-th person.\n\nOutput:\n\n* For each person, print the expected length of the cycle containing their home and work if they become happy. The answer should be accurate to within an absolute or relative error of $10^{-6}$."}, {"prompt_md5": "2ec286c7", "template_md5": "465699a0", "result": "There is a network of roads connecting cities.  Some people live in one city and work in another.  You can build one new road.  For each person, calculate the expected length of the shortest loop that connects their home and work after you build a road."}]}