{"uid": "335-E", "url": "https://codeforces.com/contest/335/problem/E", "tags": ["dp", " math", " probabilities"], "title": "335-E", "statement": "E. Counting Skyscraperstime limit per test2 secondsmemory limit per test256 megabytesinputstdinoutputstdoutA number of skyscrapers have been built in a line. The number of skyscrapers was chosen uniformly at random between2and314!(314 factorial, a very large number). The height of each skyscraper was chosen randomly and independently, with heightihaving probability2-ifor all positive integersi. The floors of a skyscraper with heightiare numbered0throughi- 1.To speed up transit times, a number of zip lines were installed between skyscrapers. Specifically, there is a zip line connecting thei-th floor of one skyscraper with thei-th floor of another skyscraper if and only if there are no skyscrapers between them that have ani-th floor.Alice and Bob decide to count the number of skyscrapers.Alice is thorough, and wants to know exactly how many skyscrapers there are. She begins at the leftmost skyscraper, with a counter at 1. She then moves to the right, one skyscraper at a time, adding 1 to her counter each time she moves. She continues until she reaches the rightmost skyscraper.Bob is impatient, and wants to finish as fast as possible. He begins at the leftmost skyscraper, with a counter at 1. He moves from building to building using zip lines. At each stage Bob uses the highest available zip line to the right, but ignores floors with a height greater thanhdue to fear of heights. When Bob uses a zip line, he travels too fast to count how many skyscrapers he passed. Instead, he just adds2ito his counter, whereiis the number of the floor he's currently on. He continues until he reaches the rightmost skyscraper.Consider the following example. There are6buildings, with heights1,4,3,4,1,2from left to right, andh= 2. Alice begins with her counter at1and then adds1five times for a result of6. Bob begins with his counter at1, then he adds1,4,4, and2, in order, for a result of12. Note that Bob ignores the highest zip line because of his fear of heights (h= 2).Bob's counter is at the top of the image, and Alice's counter at the bottom. All zip lines are shown. Bob's path is shown by the green dashed line and Alice's by the pink dashed line. The floors of the skyscrapers are numbered, and the zip lines Bob uses are marked with the amount he adds to his counter.When Alice and Bob reach the right-most skyscraper, they compare counters. You will be given either the value of Alice's counter or the value of Bob's counter, and must compute the expected value of the other's counter.InputThe first line of input will be a name, either string \"Alice\" or \"Bob\". The second line of input contains two integersnandh(2 ≤n≤ 30000,0 ≤h≤ 30). If the name is \"Alice\", thennrepresents the value of Alice's counter when she reaches the rightmost skyscraper, otherwisenrepresents the value of Bob's counter when he reaches the rightmost skyscraper;hrepresents the highest floor number Bob is willing to use.OutputOutput a single real value giving the expected value of the Alice's counter if you were given Bob's counter, or Bob's counter if you were given Alice's counter.You answer will be considered correct if its absolute or relative error doesn't exceed10- 9.ExamplesInputAlice3 1Output3.500000000InputBob2 30Output2InputAlice2572 10Output3439.031415943NoteIn the first example, Bob's counter has a 62.5% chance of being 3, a 25% chance of being 4, and a 12.5% chance of being 5.", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "11cfce09", "template_md5": "35d339e4", "result": "There are $n$ buildings in a line. The height of each building is randomly chosen, with building $i$ having a height of $i$ with probability $2^{-i}$.  \n\nThere are zip lines connecting the $i$-th floor of one building to the $i$-th floor of another building if and only if there are no buildings between them that have an $i$-th floor.\n\nPerson A counts the number of buildings by walking from left to right, adding 1 to their count for each building they pass.\n\nPerson B counts the number of buildings by using the zip lines. They start at the leftmost building and use the highest available zip line to the right, but they ignore floors higher than $h$. When they use a zip line, they add $2^i$ to their count, where $i$ is the number of the floor they are currently on.\n\nYou are given either Person A's count or Person B's count, and you need to calculate the expected value of the other person's count."}, {"prompt_md5": "4264e056", "template_md5": "465699a0", "result": "You are given a number representing the count of buildings someone reached while traveling between buildings.  You are also given a height limit.  The other person traveled between buildings using zip lines, but only used lines up to the given height limit.  Calculate the expected count the other person would have reached."}]}