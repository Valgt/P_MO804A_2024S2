{"uid": "1743-F", "url": "https://codeforces.com/contest/1743/problem/F", "tags": ["data structures", " dp", " matrices", " probabilities"], "title": "1743-F", "statement": "F. Intersection and Uniontime limit per test5 secondsmemory limit per test512 megabytesinputstandard inputoutputstandard outputYou are given $$$n$$$ segments on the coordinate axis. The $$$i$$$-th segment is $$$[l_i, r_i]$$$. Let's denote the set of all integer points belonging to the $$$i$$$-th segment as $$$S_i$$$.Let $$$A \\\\cup B$$$ be the union of two sets $$$A$$$ and $$$B$$$, $$$A \\\\cap B$$$ be the intersection of two sets $$$A$$$ and $$$B$$$, and $$$A \\\\oplus B$$$ be the symmetric difference of $$$A$$$ and $$$B$$$ (a set which contains all elements of $$$A$$$ and all elements of $$$B$$$, except for the ones that belong to both sets).Let $$$[\\\\mathbin{op}_1, \\\\mathbin{op}_2, \\\\dots, \\\\mathbin{op}_{n-1}]$$$ be an array where each element is either $$$\\\\cup$$$, $$$\\\\oplus$$$, or $$$\\\\cap$$$. Over all $$$3^{n-1}$$$ ways to choose this array, calculate the sum of the following values:$$$$$$|(((S_1\\\\ \\\\mathbin{op}_1\\\\ S_2)\\\\ \\\\mathbin{op}_2\\\\ S_3)\\\\ \\\\mathbin{op}_3\\\\ S_4)\\\\ \\\\dots\\\\ \\\\mathbin{op}_{n-1}\\\\ S_n|$$$$$$In this expression, $$$|S|$$$ denotes the size of the set $$$S$$$.InputThe first line contains one integer $$$n$$$ ($$$2 \\\\le n \\\\le 3 \\\\cdot 10^5$$$).Then, $$$n$$$ lines follow. The $$$i$$$-th of them contains two integers $$$l_i$$$ and $$$r_i$$$ ($$$0 \\\\le l_i \\\\le r_i \\\\le 3 \\\\cdot 10^5$$$).OutputPrint one integer â€” the sum of $$$|(((S_1\\\\ \\\\mathbin{op}_1\\\\ S_2)\\\\ \\\\mathbin{op}_2\\\\ S_3)\\\\ \\\\mathbin{op}_3\\\\ S_4)\\\\ \\\\dots\\\\ \\\\mathbin{op}_{n-1}\\\\ S_n|$$$ over all possible ways to choose $$$[\\\\mathbin{op}_1, \\\\mathbin{op}_2, \\\\dots, \\\\mathbin{op}_{n-1}]$$$. Since the answer can be huge, print it modulo $$$998244353$$$.ExamplesInput4 3 5 4 8 2 2 1 9Output162Input4 1 9 3 5 4 8 2 2Output102", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "004a044c", "template_md5": "35d339e4", "result": "You are given $n$ segments on a number line. The $i$-th segment is $[l_i, r_i]$.  \n\nFor each segment, find the set of all integers it contains. Let's call this set $S_i$.\n\nYou can combine these sets using three operations:\n\n* $\\cup$ (union):  This combines all elements from both sets.\n* $\\oplus$ (symmetric difference): This includes all elements that are in either set, but not in both.\n* $\\cap$ (intersection): This includes only the elements that are in both sets.\n\nYou can choose any combination of these operations to connect the sets together. For example, you could have $(S_1 \\cup S_2) \\oplus S_3 \\cap S_4$.\n\nCalculate the size of the resulting set for every possible combination of operations.  The final answer is the sum of all these sizes, modulo 998244353."}, {"prompt_md5": "6f69dfaa", "template_md5": "465699a0", "result": "You are given a list of intervals on a number line.  You need to find the sum of the sizes of the resulting sets after performing various operations (union, intersection, symmetric difference) on the intervals in all possible orders.  The size of a set is the number of elements it contains.  The answer should be given modulo 998244353."}]}