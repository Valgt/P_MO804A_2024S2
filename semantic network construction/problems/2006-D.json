{"uid": "2006-D", "url": "https://codeforces.com/contest/2006/problem/D", "tags": ["data structures", " greedy", " implementation", " math"], "title": "2006-D", "statement": "D. Iris and Adjacent Productstime limit per test3 secondsmemory limit per test256 megabytesinputstandard inputoutputstandard outputIris has just learned multiplication in her Maths lessons. However, since her brain is unable to withstand too complex calculations, she could not multiply two integers with the product greater than $$$k$$$ together. Otherwise, her brain may explode!Her teacher sets a difficult task every day as her daily summer holiday homework. Now she is given an array $$$a$$$ consisting of $$$n$$$ elements, and she needs to calculate the product of each two adjacent elements (that is, $$$a_1 \\\\cdot a_2$$$, $$$a_2 \\\\cdot a_3$$$, and so on). Iris wants her brain to work safely, and in order to do that, she would like to modify the array $$$a$$$ in such a way that $$$a_i \\\\cdot a_{i + 1} \\\\leq k$$$ holds for every $$$1 \\\\leq i < n$$$. There are two types of operations she can perform:She can rearrange the elements of the array $$$a$$$ in an arbitrary way.She can select an arbitrary element of the array $$$a$$$ and change its value to an arbitrary integer from $$$1$$$ to $$$k$$$.Iris wants to minimize the number of operations oftype $$$2$$$that she uses.However, that's completely not the end of the summer holiday! Summer holiday lasts for $$$q$$$ days, and on the $$$i$$$-th day, Iris is asked to solve the Math homework for the subarray $$$b_{l_i}, b_{l_i + 1}, \\\\ldots, b_{r_i}$$$. Help Iris and tell her the minimum number of type $$$2$$$ operations she needs to perform for each day. Note that the operations areindependentfor each day, i.e. the array $$$b$$$ is not changed.InputEach test consists of multiple test cases. The first line contains a single integer $$$t$$$ ($$$1 \\\\leq t \\\\leq 5\\\\cdot 10^4$$$) — the number of test cases. The description of the test cases follows.The first line of each test case contains three integers $$$n$$$, $$$q$$$ and $$$k$$$ ($$$2 \\\\leq n \\\\leq 10^5$$$, $$$1 \\\\leq q \\\\leq 10^5$$$, $$$1 \\\\leq k \\\\leq 10^6$$$) — the length of array $$$b$$$, the number of days, and the upper bound for the multiplication calculation.The second line of each test case contains $$$n$$$ integers $$$b_1, b_2, \\\\ldots, b_n$$$ ($$$1 \\\\leq b_i \\\\leq k$$$) — the elements of the array $$$b$$$.Then $$$q$$$ lines follow, the $$$i$$$-th of them contains two integers $$$l_i$$$ and $$$r_i$$$ ($$$1 \\\\leq l_i < r_i \\\\leq n$$$) — the boundaries of the subarray on the $$$i$$$-th day.It is guaranteed that the sum of $$$n$$$ over all test cases does not exceed $$$10^5$$$, and the sum of $$$q$$$ over all test cases does not exceed $$$10^5$$$.OutputFor each test, output a single line containing $$$q$$$ integers — the minimum number of operations of type $$$2$$$ needed for each day.ExampleInput53 1 11 1 11 33 2 101 10 91 32 35 4 22 2 2 2 21 22 42 51 56 5 103 2 5 10 10 11 43 61 62 55 610 10 1010 9 8 7 6 5 4 3 2 11 101 91 81 72 103 104 105 103 96 8Output0  0 1  1 1 2 2  1 1 1 1 0  3 3 4 3 2 2 1 1 2 1NoteIn the first test case, as Iris can always multiply $$$1$$$ and $$$1$$$ together, no operations are needed, so the answer is $$$0$$$.In the second test case, the first day's homework is $$$[1, 10, 9]$$$. Iris can rearrange its elements to get $$$[9, 1, 10]$$$, so no operations of type $$$2$$$ are needed. The second day's homework is $$$[10, 9]$$$, and she can change one element to get the array $$$[1, 9]$$$, so one operation of type $$$2$$$ is needed.", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "42e60042", "template_md5": "465699a0", "result": "You are given a list of numbers. You can rearrange the list or change any number to a value between 1 and a given limit.  You need to find the minimum number of changes needed to ensure that the product of any two adjacent numbers in the list is less than or equal to the given limit, for each of several given sublists within the original list."}, {"prompt_md5": "8c119c05", "template_md5": "35d339e4", "result": "You are given an array of $n$ integers. You can perform two types of operations:\n\n1. Rearrange the elements of the array.\n2. Change the value of any element to an integer between 1 and $k$.\n\nThe goal is to minimize the number of operations of type 2 needed to ensure that the product of each pair of adjacent elements in the array is less than or equal to $k$.\n\nYou are also given $q$ queries, each specifying a subarray of the array. For each query, determine the minimum number of operations of type 2 needed to satisfy the condition for that subarray.\n\n**Input:**\n\n* $t$ - the number of test cases\n* For each test case:\n    * $n$ - the length of the array\n    * $q$ - the number of queries\n    * $k$ - the upper bound for the product\n    * $a_1, a_2, ..., a_n$ - the elements of the array\n    * For each query:\n        * $l_i, r_i$ - the boundaries of the subarray\n\n**Output:**\n\nFor each test case, output a line containing $q$ integers, where each integer represents the minimum number of operations of type 2 needed for the corresponding query."}]}