{"uid": "1372-F", "url": "https://codeforces.com/contest/1372/problem/F", "tags": ["binary search", " divide and conquer", " interactive"], "title": "1372-F", "statement": "F. Omkar and Modestime limit per test3 secondsmemory limit per test256 megabytesinputstandard inputoutputstandard outputRay lost his array and needs to find it by asking Omkar. Omkar is willing to disclose that the array has the following qualities:The array has $$$n$$$ ($$$1 \\\\le n \\\\le 2 \\\\cdot 10^5$$$) elements.Every element in the array $$$a_i$$$ is an integer in the range $$$1 \\\\le a_i \\\\le 10^9.$$$The array is sorted in nondecreasing order.Ray is allowed to send Omkar a series of queries. A query consists of two integers, $$$l$$$ and $$$r$$$ such that $$$1 \\\\le l \\\\le r \\\\le n$$$. Omkar will respond with two integers, $$$x$$$ and $$$f$$$. $$$x$$$ is the mode of the subarray from index $$$l$$$ to index $$$r$$$ inclusive. The mode of an array is defined by the number that appears the most frequently. If there are multiple numbers that appear the most number of times, the smallest such number is considered to be the mode. $$$f$$$ is the amount of times that $$$x$$$ appears in the queried subarray.The array has $$$k$$$ ($$$1 \\\\le k \\\\le \\\\min(25000,n)$$$) distinct elements. However, due to Ray's sins, Omkar will not tell Ray what $$$k$$$ is. Ray is allowed to send at most $$$4k$$$ queries.Help Ray find his lost array.InputThe only line of the input contains a single integer $$$n$$$ ($$$1 \\\\le n \\\\le 2 \\\\cdot 10^5$$$), which equals to the length of the array that you are trying to find.InteractionThe interaction starts with reading $$$n$$$.Then you can make one type of query:\"$$$? \\\\enspace l \\\\enspace r$$$\" ($$$1 \\\\le l \\\\le r \\\\le n$$$) where $$$l$$$ and $$$r$$$ are the bounds of the subarray that you wish to query.The answer to each query will be in the form \"$$$x \\\\enspace f$$$\" where $$$x$$$ is the mode of the subarray and $$$f$$$ is the number of times $$$x$$$ appears in the subarray.$$$x$$$ satisfies ($$$1 \\\\leq x \\\\leq 10^9$$$).$$$f$$$ satisfies ($$$1 \\\\leq f \\\\leq r-l+1$$$).If you make more than $$$4k$$$ queries or violate the number range in the query, you will get an output \"-1.\"If you terminate after receiving the response \"$$$-1$$$\", you will get the \"Wrong answer\" verdict. Otherwise you can get an arbitrary verdict because your solution will continue to read from a closed stream.To output your answer, print:\"$$$! \\\\enspace a_1 \\\\enspace a_2 \\\\enspace \\\\ldots \\\\enspace a_{n-1} \\\\enspace a_n$$$\" which is an exclamation point followed by the array with a space between every element.And quit after that. This query is not counted towards the $$$4k$$$ queries limit.After printing a query do not forget to output end of line and flush the output. Otherwise, you will getIdleness limit exceeded. To do this, use:fflush(stdout)orcout.flush()in C++;System.out.flush()in Java;flush(output)in Pascal;stdout.flush()in Python;see documentation for other languages.Hack FormatTo hack, output $$$1$$$ integer on the first line, $$$n$$$ ($$$1 \\\\le n \\\\le 2 \\\\cdot 10^5$$$). On the second line output $$$n$$$ integers $$$a_1, a_2, \\\\ldots, a_{n-1}, a_n$$$ separated by a space such that there are at most $$$25000$$$ distinct numbers and $$$a_j \\\\le a_{j+1}$$$ for all $$$j$$$ from $$$1$$$ to $$$n-1$$$.ExampleInput6  2 2  2 2  3 2  2 1Output? 1 6  ? 1 3  ? 4 6  ? 3 4  ! 1 2 2 3 3 4NoteThe first query is $$$l=1$$$ and $$$r=6$$$. The mode is $$$2$$$, and $$$2$$$ appears $$$2$$$ times, so $$$x=2$$$ and $$$f=2$$$. Note that $$$3$$$ also appears two times, but $$$2$$$ is outputted because $$$2$$$ is smaller.The second query is $$$l=1$$$ and $$$r=3$$$. The mode is $$$2$$$ and $$$2$$$ appears twice in the subarray with indices $$$[1,3]$$$.The third query is $$$l=4$$$ and $$$r=6$$$. The mode is $$$3$$$ and $$$3$$$ appears twice in the subarray with indices $$$[4,6]$$$.The fourth query is $$$l=3$$$ and $$$r=4$$$. The mode is $$$2$$$, which appears once in the subarray with indices $$$[3,4]$$$. Note that $$$3$$$ also appears once in that range, but $$$2$$$ is smaller than $$$3$$$.", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "c0d972cf", "template_md5": "35d339e4", "result": "You are given an array of $n$ integers ($1 \\le n \\le 2 \\cdot 10^5$) that is sorted in nondecreasing order.  Each element in the array is between 1 and $10^9$ inclusive. You know the array has at most 25000 distinct elements.\n\nYou can ask queries of the form \"? $l$ $r$\" where $1 \\le l \\le r \\le n$.  For each query, you will be given two numbers:\n\n* $x$: the mode of the subarray from index $l$ to $r$ (inclusive). The mode is the number that appears most frequently. If there are multiple numbers that appear most frequently, the smallest one is considered the mode.\n* $f$: the number of times $x$ appears in the subarray.\n\nYou are allowed to ask at most $4k$ queries, where $k$ is the number of distinct elements in the array.\n\nYour goal is to determine the entire array. To do this, output \"! $a_1$ $a_2$ ... $a_{n-1}$ $a_n$\" where $a_i$ is the $i$-th element of the array."}, {"prompt_md5": "eb590a7b", "template_md5": "465699a0", "result": "You need to find a sorted list of numbers. You can ask questions about specific parts of the list to find the most frequent number and how many times it appears in that part. You have a limited number of questions."}]}