{"uid": "1899-G", "url": "https://codeforces.com/contest/1899/problem/G", "tags": ["data structures", " dfs and similar", " dsu", " shortest paths", " sortings", " trees", " two pointers"], "title": "1899-G", "statement": "G. Unusual Entertainmenttime limit per test3 secondsmemory limit per test256 megabytesinputstandard inputoutputstandard outputAtreeis a connected graph without cycles.Apermutationis an array consisting of $$$n$$$ distinct integers from $$$1$$$ to $$$n$$$ in any order. For example, $$$[5, 1, 3, 2, 4]$$$ is a permutation, but $$$[2, 1, 1]$$$ is not a permutation (as $$$1$$$ appears twice in the array) and $$$[1, 3, 2, 5]$$$ is also not a permutation (as $$$n = 4$$$, but $$$5$$$ is present in the array).After a failed shoot in the BrMeast video, Alex fell into depression. Even his birthday did not make him happy. However, after receiving a gift from Timofey, Alex's mood suddenly improved. Now he spent days playing with the gifted constructor. Recently, he came up with an unusual entertainment.Alex builds a tree from his constructor, consisting of $$$n$$$ vertices numbered from $$$1$$$ to $$$n$$$, with the root at vertex $$$1$$$. Then he writes down each integer from $$$1$$$ to $$$n$$$ in some order, obtaining a permutation $$$p$$$. After that, Alex comes up with $$$q$$$ triples of integers $$$l, r, x$$$. For each triple, he tries to determine if there is at least one descendant of vertex $$$x$$$ among the vertices $$$p_l, p_{l+1}, \\\\ldots, p_r$$$.A vertex $$$u$$$ is a descendant of vertex $$$v$$$ if and only if $$$\\\\mathrm{dist}(1, v) + \\\\mathrm{dist}(v, u) = \\\\mathrm{dist}(1, u)$$$, where $$$\\\\mathrm{dist}(a, b)$$$ is the distance between vertices $$$a$$$ and $$$b$$$. In other words, vertex $$$v$$$ must be on the path from the root to vertex $$$u$$$.Alex told Zakhar about this entertainment. Now Alex tells his friend $$$q$$$ triples as described above, hoping that Zakhar can check for the presence of a descendant. Zakhar is very sleepy, so he turned to you for help. Help Zakhar answer all of Alex's questions and finally go to sleep.InputThe first line of the input contains a single integer $$$t$$$ ($$$1 \\\\le t \\\\le 10^4$$$) — the number of test cases.The first line of each test case contains two integers $$$n, q$$$ ($$$1 \\\\le n, q \\\\le 10^5$$$) — the number of vertices in the tree and the number of questions, respectively.Each of the next $$$n - 1$$$ lines contains two integers $$$u_i$$$ and $$$v_i$$$ ($$$1 \\\\le u_i, v_i \\\\le n$$$), indicating that there is an edge between vertices $$$u_i$$$ and $$$v_i$$$ (it is guaranteed that the resulting graph is a tree).The next line contains $$$n$$$ integers $$$p_1, p_2, \\\\dots, p_n$$$ ($$$1 \\\\le p_i \\\\le n$$$) — the permutation $$$p$$$ (it is guaranteed that each integer from $$$1$$$ to $$$n$$$ appears exactly once).Then follow $$$q$$$ lines describing Alex's questions. The $$$i$$$-th line contains three integers $$$l, r, x$$$ ($$$1 \\\\le l \\\\le r \\\\le n$$$, $$$1 \\\\le x \\\\le n$$$), as described in the statement.It is guaranteed that the sum of $$$n$$$ and the sum of $$$q$$$ over all test cases do not exceed $$$10^5$$$.OutputFor each of Alex's questions, print \"Yes\" (without quotes) if the described descendant exists, otherwise print \"No\" (without quotes).You can output the answer in any case (for example, the strings \"yEs\", \"yes\", \"Yes\", and \"YES\" will be recognized as a positive answer).ExampleInput33 51 22 31 2 31 2 21 2 32 3 11 2 32 3 310 102 62 72 41 72 810 68 59 43 410 2 5 9 1 7 6 4 3 88 9 87 8 17 10 64 8 95 5 107 10 19 9 29 10 66 6 210 10 61 111 1 1OutputYES NO YES NO YES  NO YES YES YES NO YES YES NO NO NO  YES", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "1f1346f6", "template_md5": "35d339e4", "result": "You are given a tree with $n$ nodes, numbered from 1 to $n$.  A permutation $p$ of length $n$ is also given.\n\nYou will be given $q$ queries, each query consists of three integers $l$, $r$, and $x$. For each query, determine if there is at least one descendant of node $x$ among the nodes $p_l$, $p_{l+1}$, ..., $p_r$.\n\n**Input:**\n\n* The first line contains an integer $t$ ($1 \\le t \\le 10^4$) representing the number of test cases.\n* For each test case:\n    * The first line contains two integers $n$ and $q$ ($1 \\le n, q \\le 10^5$) representing the number of nodes in the tree and the number of queries, respectively.\n    * The next $n-1$ lines each contain two integers $u_i$ and $v_i$ ($1 \\le u_i, v_i \\le n$) representing an edge between nodes $u_i$ and $v_i$.\n    * The next line contains $n$ integers $p_1, p_2, ..., p_n$ ($1 \\le p_i \\le n$) representing the permutation $p$.\n    * The next $q$ lines each contain three integers $l$, $r$, and $x$ ($1 \\le l \\le r \\le n$, $1 \\le x \\le n$) representing a query.\n\n**Output:**\n\n* For each query, print \"Yes\" if there is a descendant of node $x$ among the nodes $p_l$, $p_{l+1}$, ..., $p_r$, otherwise print \"No\"."}, {"prompt_md5": "416831ea", "template_md5": "465699a0", "result": "You are given a tree with $n$ nodes.  A permutation of the numbers 1 to $n$ is also given. You are then asked $q$ questions. Each question consists of three numbers $l$, $r$, and $x$. For each question, determine if there is a descendant of node $x$ within the subarray of the permutation from index $l$ to $r$ (inclusive)."}]}