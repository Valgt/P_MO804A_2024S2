{"uid": "1091-D", "url": "https://codeforces.com/contest/1091/problem/D", "tags": ["combinatorics", " dp", " math"], "title": "1091-D", "statement": "D. New Year and the Permutation Concatenationtime limit per test2 secondsmemory limit per test256 megabytesinputstandard inputoutputstandard outputLet $$$n$$$ be an integer. Consider all permutations on integers $$$1$$$ to $$$n$$$ in lexicographic order, and concatenate them into one big sequence $$$p$$$. For example, if $$$n = 3$$$, then $$$p = [1, 2, 3, 1, 3, 2, 2, 1, 3, 2, 3, 1, 3, 1, 2, 3, 2, 1]$$$. The length of this sequence will be $$$n \\\\cdot n!$$$.Let $$$1 \\\\leq i \\\\leq j \\\\leq n \\\\cdot n!$$$ be a pair of indices. We call the sequence $$$(p_i, p_{i+1}, \\\\dots, p_{j-1}, p_j)$$$ asubarrayof $$$p$$$. Itslengthis defined as the number of its elements, i.e., $$$j - i + 1$$$. Itssumis the sum of all its elements, i.e., $$$\\\\sum_{k=i}^j p_k$$$.You are given $$$n$$$. Find the number of subarrays of $$$p$$$ of length $$$n$$$ having sum $$$\\\\frac{n(n+1)}{2}$$$. Since this number may be large, output it modulo $$$998244353$$$ (a prime number).InputThe only line contains one integer $$$n$$$ ($$$1 \\\\leq n \\\\leq 10^6$$$), as described in the problem statement.OutputOutput a single integer — the number of subarrays of length $$$n$$$ having sum $$$\\\\frac{n(n+1)}{2}$$$, modulo $$$998244353$$$.ExamplesInput3Output9Input4Output56Input10Output30052700NoteIn the first sample, there are $$$16$$$ subarrays of length $$$3$$$. In order of appearance, they are:$$$[1, 2, 3]$$$, $$$[2, 3, 1]$$$, $$$[3, 1, 3]$$$, $$$[1, 3, 2]$$$, $$$[3, 2, 2]$$$, $$$[2, 2, 1]$$$, $$$[2, 1, 3]$$$, $$$[1, 3, 2]$$$, $$$[3, 2, 3]$$$, $$$[2, 3, 1]$$$, $$$[3, 1, 3]$$$, $$$[1, 3, 1]$$$, $$$[3, 1, 2]$$$, $$$[1, 2, 3]$$$, $$$[2, 3, 2]$$$, $$$[3, 2, 1]$$$.Their sums are $$$6$$$, $$$6$$$, $$$7$$$, $$$6$$$, $$$7$$$, $$$5$$$, $$$6$$$, $$$6$$$, $$$8$$$, $$$6$$$, $$$7$$$, $$$5$$$, $$$6$$$, $$$6$$$, $$$7$$$, $$$6$$$. As $$$\\\\frac{n(n+1)}{2} = 6$$$, the answer is $$$9$$$.", "source": "CF", "vjudge": false, "processed": [{"prompt_md5": "6499d92e", "template_md5": "35d339e4", "result": "You are given an integer $n$.  \n\nConsider all the possible arrangements (permutations) of the numbers 1 through $n$.  \n\nConcatenate these permutations together to form a long sequence $p$.  \n\nFor example, if $n=3$, then $p = [1, 2, 3, 1, 3, 2, 2, 1, 3, 2, 3, 1, 3, 1, 2, 3, 2, 1]$.\n\nA subarray of $p$ is a continuous segment of numbers within $p$.  The length of a subarray is the number of numbers in it. The sum of a subarray is the sum of all the numbers in it.\n\nFind the number of subarrays of length $n$ in $p$ that have a sum of $\\frac{n(n+1)}{2}$.  Since this number can be very large, give the answer modulo 998244353 (a prime number)."}, {"prompt_md5": "16182679", "template_md5": "465699a0", "result": "You are given a number *n*.  Imagine all possible arrangements of the numbers 1 through *n* written in order.  Now, take all those arrangements and link them together into one long list.  Find how many groups of *n* consecutive numbers in this long list add up to  *n*( *n* + 1) / 2.  Give your answer as a number."}]}